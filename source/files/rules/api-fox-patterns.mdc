---
globs:
  - "src/api/**/*.js"
alwaysApply: false
description: å•†å¨é¡¹ç›® Apifox API å¼€å‘è§„èŒƒ
keywords: ["æ¥å£", "API", "apifox", "æ¥å£æ–‡æ¡£", "è·å–æ¥å£"]
tags: ["æ¥å£", "API", "æ–‡æ¡£"]
size: small
trigger: manual
---

# å•†å¨é¡¹ç›® Apifox API å¼€å‘è§„èŒƒ

## Apifox æ–‡æ¡£æŸ¥è¯¢è§„èŒƒ

### 1. ä½¿ç”¨ apifox-mcp-server æŸ¥è¯¢æ–‡æ¡£

åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå½“éœ€è¦æŸ¥è¯¢ Apifox æ–‡æ¡£æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ `apifox-mcp-server` å·¥å…·ï¼š

```javascript
// æŸ¥è¯¢ Apifox æ–‡æ¡£ç¤ºä¾‹
// ä½¿ç”¨ apifox-mcp-server è·å–æ¥å£æ–‡æ¡£ä¿¡æ¯
// åŒ…æ‹¬æ¥å£è·¯å¾„ã€å‚æ•°ã€å“åº”æ ¼å¼ç­‰
```

### 2. æ–‡æ¡£æŸ¥è¯¢æ­¥éª¤

1. **ç¡®å®šæ¥å£æ¨¡å—**ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚ç¡®å®šè¦æŸ¥è¯¢çš„æ¥å£æ¨¡å—
2. **ä½¿ç”¨ apifox-mcp-server**ï¼šé€šè¿‡ MCP å·¥å…·æŸ¥è¯¢ç›¸å…³æ¥å£æ–‡æ¡£
3. **åˆ†ææ¥å£ä¿¡æ¯**ï¼šè·å–æ¥å£è·¯å¾„ã€å‚æ•°ã€å“åº”æ ¼å¼ç­‰è¯¦ç»†ä¿¡æ¯
4. **å®ç°å‰ç«¯è°ƒç”¨**ï¼šæ ¹æ®æ–‡æ¡£ä¿¡æ¯å®ç°å‰ç«¯ API è°ƒç”¨

### 3. æ–‡æ¡£æŸ¥è¯¢æœ€ä½³å®è·µ

- **ä¼˜å…ˆæŸ¥è¯¢æ–‡æ¡£**ï¼šåœ¨å®ç°æ¥å£è°ƒç”¨å‰ï¼Œå…ˆæŸ¥è¯¢ Apifox æ–‡æ¡£
- **éªŒè¯æ¥å£ä¿¡æ¯**ï¼šç¡®ä¿è·å–çš„æ¥å£ä¿¡æ¯æ˜¯æœ€æ–°çš„
- **å‚è€ƒç¤ºä¾‹ä»£ç **ï¼šæŸ¥çœ‹æ–‡æ¡£ä¸­çš„ç¤ºä¾‹ä»£ç å’Œå‚æ•°è¯´æ˜
- **æ³¨æ„ç‰ˆæœ¬å·®å¼‚**ï¼šç¡®è®¤æ¥å£ç‰ˆæœ¬å’Œå‚æ•°è¦æ±‚

### 4. å¸¸è§æŸ¥è¯¢åœºæ™¯

```javascript
// åœºæ™¯1ï¼šæŸ¥è¯¢***æ¨¡å—ç›¸å…³æ¥å£
// ä½¿ç”¨ apifox-mcp-server æŸ¥è¯¢***æ¨¡å—çš„æ¥å£æ–‡æ¡£
```

#### 5.3 æ¥å£åˆ†ç±»è¯´æ˜

**æŸ¥è¯¢ç±»æ¥å£**ï¼š

- `GET /{module}/page` - åˆ†é¡µæŸ¥è¯¢
- `GET /{module}/{id}` - æ ¹æ® ID æŸ¥è¯¢è¯¦æƒ…

**æ“ä½œç±»æ¥å£**ï¼š

- `POST /{module}/save` - æ–°å¢
- `POST /{module}/update` - ä¿®æ”¹
- `GET /{module}/del` - åˆ é™¤
- `POST /{module}/delObjs` - æ‰¹é‡åˆ é™¤
- `POST /{module}/exported` - å¯¼å‡º

## æŠ€æœ¯æ ˆè§„èŒƒ

### å½“å‰æŠ€æœ¯æ ˆ

- **Vue**: 3.2.45
- **æ„å»ºå·¥å…·**: Vite 3.2.3
- **UI æ¡†æ¶**: Element Plus 2.11.3
- **çŠ¶æ€ç®¡ç†**: Pinia 2.0.22
- **è·¯ç”±**: Vue Router 4.1.4
- **HTTP å®¢æˆ·ç«¯**: Axios 0.27.2
- **è¡¨æ ¼ç»„ä»¶**: VXE Table 4.15.10 + VXE PC UI 4.8.20
- **å›¾è¡¨åº“**: ECharts 5.4.2
- **åŒ…ç®¡ç†**: pnpm npm
- **ä»£ç è§„èŒƒ**: ESLint + Prettier
- **è¯­è¨€**: JavaScript (ES6+)
- **æ ·å¼**: SCSS
- **å›½é™…åŒ–**: Element Plus ä¸­æ–‡è¯­è¨€åŒ…
- **å·¥å…·åº“**: Lodash-es, QS, Crypto-js, JSEncrypt

### 2. å‡½æ•°å‘½åè§„èŒƒ

#### æŸ¥è¯¢ç±»æ¥å£ (fetchXXXX)

```javascript
// è·å–åˆ—è¡¨æ•°æ®
export function fetchServiceConfigList(data) {
  return request({
    url: "/afterSales/serviceConfig/page",
    method: "post",
    data
  });
}

// è·å–è¯¦æƒ…æ•°æ®
export function fetchUserDetail(id) {
  return request({
    url: `/system/user/${id}`,
    method: "get"
  });
}

// è·å–æ ‘å½¢ç»“æ„
export function fetchProjectInstallmentOptions() {
  return request({
    url: "/admin/projectMasterData/user/tree",
    method: "get"
  });
}

// è·å–ä¸‹æ‹‰é€‰é¡¹
export function fetchProjectOptions() {
  return request({
    url: "/admin/projectMasterData/list",
    method: "get"
  });
}
```

#### æ“ä½œç±»æ¥å£ (ç»Ÿä¸€API)

```javascript
// æ–°å¢/ä¿®æ”¹æ•°æ®ï¼ˆç»Ÿä¸€æ¥å£ï¼‰
export function serviceConfigApi(data) {
  return request({
    url: "/sales/serviceConfig/save",
    method: "post",
    data
  });
}

// åˆ é™¤æ•°æ®
export function deleteServiceConfig(id) {
  return request({
    url: `/afterSales/serviceConfig/del/${id}`,
    method: "get"
  });
}

// æ‰¹é‡åˆ é™¤
export function batchDeleteServiceConfig(ids) {
  return request({
    url: "/afterSales/serviceConfig/delObjs",
    method: "post",
    data: ids
  });
}

// çŠ¶æ€æ›´æ–°
export function invalidPriceConfig(id) {
  return request({
    url: `/sale/priceConfig/invalid/${id}`,
    method: "post"
  });
}
```

#### çŠ¶æ€ç®¡ç†æ¥å£

```javascript
// æ›´æ–°çŠ¶æ€
export function updateUserStatus(id, status) {
  return request({
    url: "/api/user/status",
    method: "put",
    data: {
      id: id,
      status: status,
    },
  });
}
```

#### å¯¼å‡ºæ¥å£

```javascript
// å¯¼å‡ºæ•°æ®
export function exportUserData(data) {
  return request({
    url: "/api/user/export",
    method: "post",
    data,
    responseType: "blob",
  });
}
```

### 1. JSDoc æ³¨é‡Šè§„èŒƒ

> **âš ï¸ åŸºç¡€è§„èŒƒ**ï¼šJSDoc æ³¨é‡Šçš„åŸºç¡€æ ¼å¼ã€å¸¸ç”¨æ ‡ç­¾ã€å®Œæ•´ç¤ºä¾‹ç­‰é€šç”¨è§„èŒƒè¯·å‚è€ƒ [vue-development-patterns.mdc](./vue-development-patterns.mdc) ä¸­çš„"JSDoc æ³¨é‡Šè§„èŒƒ"ç« èŠ‚ã€‚

**æ¥å£å°è£…ä¸“ç”¨çš„ JSDoc è§„èŒƒè¦æ±‚**ï¼š

```javascript
/**
 * è·å–ç”¨æˆ·åˆ—è¡¨
 * @param {Object} params - æŸ¥è¯¢å‚æ•°
 * @param {number} params.pageNum - é¡µç 
 * @param {number} params.pageSize - æ¯é¡µæ•°é‡
 * @param {string} params.keyword - æœç´¢å…³é”®è¯
 * @param {string} params.status - çŠ¶æ€ç­›é€‰
 * @returns {Promise<Object>} è¿”å›ç”¨æˆ·åˆ—è¡¨æ•°æ®
 */
export function fetchUserList(params) {
  return request({
    url: "/api/user/list",
    method: "get",
    params,
  });
}

/**
 * ç”¨æˆ·ä¿¡æ¯ç±»å‹å®šä¹‰
 * @typedef {Object} UserInfo
 * @property {string} id - ç”¨æˆ·ID
 * @property {string} username - ç”¨æˆ·å
 * @property {string} email - é‚®ç®±
 * @property {string} status - çŠ¶æ€
 * @property {string} createTime - åˆ›å»ºæ—¶é—´
 */

/**
 * åˆ›å»ºç”¨æˆ·
 * @param {UserInfo} data - ç”¨æˆ·ä¿¡æ¯
 * @returns {Promise<Object>} åˆ›å»ºç»“æœ
 */
export function createUser(data) {
  return request({
    url: "/api/user",
    method: "post",
    data,
  });
}
```

**æ¥å£å°è£…ä¸“ç”¨çš„ JSDoc æ³¨é‡Šè§„èŒƒè¦æ±‚**ï¼š
- **ç¦æ­¢@example**: âš ï¸ æŒ‰ç…§ api-fox-patterns.mdc è¿›è¡Œæ¥å£å°è£…æ—¶ï¼ŒJSDoc æ³¨é‡Šè§„èŒƒæ³¨è§£ä¸­**ç¦æ­¢ç”Ÿæˆ@exampleç¤ºä¾‹**
- **å¿…éœ€å‚æ•°**: å¿…é¡»åŒ…å«@paramå‚æ•°è¯´æ˜
- **å¿…éœ€è¿”å›å€¼**: å¿…é¡»åŒ…å«@returnsè¿”å›å€¼è¯´æ˜
- **ç±»å‹å®šä¹‰**: å¤æ‚å¯¹è±¡ä½¿ç”¨@typedefå®šä¹‰ç±»å‹
- **ç®€æ´æ˜äº†**: æ³¨é‡Šå†…å®¹ç®€æ´æ˜äº†ï¼Œé¿å…å†—ä½™

### 2. è¯·æ±‚é…ç½®è§„èŒƒ

```javascript
// æ ‡å‡†è¯·æ±‚é…ç½®
export function standardApi(config) {
  return request({
    url: config.url,
    method: config.method,
    params: config.params,
    data: config.data,
    responseType: config.responseType || "json",
  });
}
```

## è¯·æ±‚é…ç½®è§„èŒƒ

### 1. åŸºç¡€é…ç½®

```javascript
import request from "@/utils/request";

// æ ‡å‡†è¯·æ±‚é…ç½®
export function standardApi(config) {
  return request({
    url: config.url,
    method: config.method,
    params: config.params,
    data: config.data,
    responseType: config.responseType || "json",
  });
}
```

### 2. å‚æ•°ä¼ é€’è§„èŒƒ

```javascript
// æŸ¥è¯¢å‚æ•° - ä½¿ç”¨ params
export function fetchData(params) {
  return request({
    url: "/api/data",
    method: "get",
    params: {
      pageNum: params.pageNum,
      pageSize: params.pageSize,
      keyword: params.keyword,
    },
  });
}

// è¯·æ±‚ä½“å‚æ•° - ä½¿ç”¨ data
export function createData(data) {
  return request({
    url: "/api/data",
    method: "post",
    data: {
      name: data.name,
      description: data.description,
      status: data.status,
    },
  });
}
```

### 3. å“åº”å¤„ç†è§„èŒƒ

```javascript
// æ ‡å‡†å“åº”å¤„ç†
export async function handleApiResponse(apiCall) {
  try {
    const response = await apiCall();
    return {
      success: true,
      data: response.data,
    };
  } catch (error) {
    return {
      success: false,
      data: null,
      error: error.message || "è¯·æ±‚å¤±è´¥",
    };
  }
}
```

## æ¥å£æ–‡æ¡£è§„èŒƒ

> **âš ï¸ JSDoc æ³¨é‡Šè§„èŒƒ**ï¼šæ¥å£å°è£…æ—¶çš„ JSDoc æ³¨é‡Šè§„èŒƒè¦æ±‚è¯·å‚è€ƒæœ¬æ–‡ä»¶ä¸­çš„"JSDoc æ³¨é‡Šè§„èŒƒ"ç« èŠ‚ï¼ˆç¬¬1èŠ‚ï¼‰ã€‚

## æ³¨æ„äº‹é¡¹

- ğŸ”´ **æ–‡æ¡£æ›´æ–°**: é€šè¿‡mcpå·¥å…·æŸ¥é˜…apifoxæ–‡æ¡£æ—¶ï¼Œå§‹ç»ˆè·å–æœ€æ–°çš„æ–‡æ¡£ï¼Œå¦‚è·å–ä¸åˆ°åˆ™è¦æ›´æ–°apifoxæ–‡æ¡£
- ğŸ”´ **æ€§èƒ½è€ƒè™‘**: ä¼˜åŒ–å‰ç«¯è¯·æ±‚
- ğŸ”´ **å®‰å…¨æ³¨æ„**: æ³¨æ„æ•æ„Ÿå­—æ®µçš„å¤„ç†å’Œæƒé™æ§åˆ¶
- ğŸ”´ **é”€å”®ç‰¹è‰²**: æ³¨æ„æˆ¿åœ°äº§é”€å”®è¡Œä¸šçš„ç‰¹æ®Šä¸šåŠ¡éœ€æ±‚

- ğŸ”´ **ä»£ç å¤ç”¨**ï¼šé¿å…é‡å¤ä»£ç ï¼Œæå–å…¬å…±å‡½æ•°
- ğŸ”´  **æ€§èƒ½ä¼˜åŒ–**ï¼šåˆç†ä½¿ç”¨ç¼“å­˜å’Œé˜²æŠ–æœºåˆ¶
- ğŸ”´ **å®‰å…¨è€ƒè™‘**ï¼šæ³¨æ„å‚æ•°éªŒè¯å’Œæƒé™æ§åˆ¶
