---
globs: 
  - "**/listData.js"
  - "**/index.vue"
  - "**/TableCommon/**"
alwaysApply: false
description: TableCommon åˆ—è¡¨é¡µç»„ä»¶å®Œæ•´ä½¿ç”¨è§„åˆ™
keywords: ["TableCommon", "åˆ—è¡¨é¡µ", "listData", "è¡¨æ ¼", "åˆ†é¡µ", "è¡¨æ ¼é…ç½®", "æŸ¥è¯¢æ¡ä»¶"]
tags: ["ç»„ä»¶", "è¡¨æ ¼", "åˆ—è¡¨"]
size: large
---

# TableCommon ç»„ä»¶é¡¹ç›®çº§ä½¿ç”¨è§„åˆ™

## ğŸ“‹ ç›®å½•

- [ç»„ä»¶æ¦‚è¿°](#ç»„ä»¶æ¦‚è¿°)
- [å¼€å‘è§„èŒƒ](#å¼€å‘è§„èŒƒ) âš ï¸ **é‡è¦ï¼šå¼€å‘å‰å¿…è¯»**
- [é¡¹ç›®é›†æˆè§„èŒƒ](#é¡¹ç›®é›†æˆè§„èŒƒ)
- [é…ç½®æ–‡ä»¶è¯¦è§£ (listData.js)](#é…ç½®æ–‡ä»¶è¯¦è§£-listdatajs)
- [ç»„ä»¶æ’æ§½è¯¦è§£](#ç»„ä»¶æ’æ§½è¯¦è§£)
- [ç»„ä»¶æš´éœ²çš„æ–¹æ³•å’Œå±æ€§](#ç»„ä»¶æš´éœ²çš„æ–¹æ³•å’Œå±æ€§)
- [å•é€‰å¤šé€‰é…ç½®](#å•é€‰å¤šé€‰é…ç½®)
- [tableMethods ä¸æŒ‰é’®äº‹ä»¶å…³è”](#tablemethods-ä¸æŒ‰é’®äº‹ä»¶å…³è”)
- [å¸¸ç”¨åŠŸèƒ½ç»„åˆä½¿ç”¨](#å¸¸ç”¨åŠŸèƒ½ç»„åˆä½¿ç”¨)
- [æŒ‰é’®çŠ¶æ€æ§åˆ¶ (showRowBtn)](#æŒ‰é’®çŠ¶æ€æ§åˆ¶-showrowbtn)
- [formatter å’Œ slots ä½¿ç”¨è§„èŒƒ](#formatter-å’Œ-slots-ä½¿ç”¨è§„èŒƒ)
- [ç»„ä»¶å›è°ƒå‡½æ•°](#ç»„ä»¶å›è°ƒå‡½æ•°)
- [ç¦æ­¢è¡Œä¸ºè§„èŒƒ](#ç¦æ­¢è¡Œä¸ºè§„èŒƒ)
- [å®Œæ•´ä½¿ç”¨ç¤ºä¾‹](#å®Œæ•´ä½¿ç”¨ç¤ºä¾‹)

## ç»„ä»¶æ¦‚è¿°

TableCommon æ˜¯åŸºäº VXE Table å°è£…çš„é€šç”¨åˆ—è¡¨é¡µç»„ä»¶ï¼Œæä¾›å®Œæ•´çš„ CRUD æ“ä½œã€æœç´¢ã€åˆ†é¡µã€æƒé™æ§åˆ¶ã€æ•°æ®å¯¼å‡ºå¯¼å…¥ç­‰åŠŸèƒ½ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **å®Œæ•´çš„ CRUD æ“ä½œ**ï¼šæ”¯æŒæ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤ã€æŸ¥çœ‹ç­‰æ“ä½œ
- âœ… **çµæ´»çš„æŸ¥è¯¢æ¡ä»¶**ï¼šæ”¯æŒå­—å…¸ã€è‡ªå®šä¹‰ä¸‹æ‹‰ã€æ’æ§½ç­‰å¤šç§æŸ¥è¯¢æ–¹å¼
- âœ… **æƒé™æ§åˆ¶**ï¼šå†…ç½®æƒé™éªŒè¯ï¼Œæ”¯æŒæŒ‰é’®çº§åˆ«çš„æƒé™æ§åˆ¶
- âœ… **æ•°æ®å¯¼å‡ºå¯¼å…¥**ï¼šå†…ç½®å¯¼å‡ºå¯¼å…¥åŠŸèƒ½ï¼Œæ”¯æŒ Excel ç­‰æ ¼å¼
- âœ… **å®¡æ‰¹æµç¨‹**ï¼šæ”¯æŒå®¡æ‰¹ã€æµç¨‹è·Ÿè¸ªç­‰ä¸šåŠ¡åŠŸèƒ½
- âœ… **æ ‘å½¢ç»“æ„**ï¼šæ”¯æŒæ ‘å½¢æ•°æ®å±•ç¤ºå’Œæ“ä½œ
- âœ… **å•é€‰å¤šé€‰**ï¼šæ”¯æŒå•é€‰æ¡†å’Œå¤šé€‰æ¡†ä¸¤ç§é€‰æ‹©æ¨¡å¼

### æŠ€æœ¯æ ˆ

- **VXE Table**: 4.15.10 - é«˜æ€§èƒ½è¡¨æ ¼ç»„ä»¶
- **VXE PC UI**: 4.8.20 - PC ç«¯ UI ç»„ä»¶åº“
- **Element Plus**: 2.11.3 - åŸºç¡€ UI ç»„ä»¶åº“
- **Vue 3**: 3.2.45 - Composition API
- **Pinia**: 2.0.22 - çŠ¶æ€ç®¡ç†

## å¼€å‘è§„èŒƒ

âš ï¸ **é‡è¦ï¼šä»¥ä¸‹è§„èŒƒæ˜¯ä½¿ç”¨ TableCommon ç»„ä»¶æ—¶å¿…é¡»éµå®ˆçš„é€šç”¨è§„åˆ™ï¼Œè¯·åœ¨ä½¿ç”¨å‰ä»”ç»†é˜…è¯»ã€‚**

### 1. é‡‘é¢æ ¼å¼åŒ–è§„èŒƒ

**è§„åˆ™**ï¼šè¡¨æ ¼ä¸­é‡‘é¢å±•ç¤ºå¿…é¡»é€šè¿‡ `formatter` å‡½æ•°è‡ªå®šä¹‰ï¼Œå¹¶ä¸”é…åˆ `formatAmount` å‡½æ•°è¿›è¡Œé‡‘é¢çš„æ ¼å¼åŒ–ï¼šåƒåˆ†ç¬¦å¹¶ä¿ç•™ä¸¤ä½å°æ•°ã€‚

**å®ç°æ–¹å¼**ï¼š

```javascript
// listData.js
import { formatAmount } from '@/utils'

{
  title: 'é‡‘é¢(å…ƒ)',
  dataIndex: 'amount',
  width: 150,
  align: 'right',
  formatter: ({ cellValue }) => {
    return formatAmount(cellValue)
    // æ˜¾ç¤ºï¼š100,000.00ï¼ˆåƒåˆ†ç¬¦å¹¶ä¿ç•™ä¸¤ä½å°æ•°ï¼‰
  }
}
```

**formatAmount å‡½æ•°è¯´æ˜**ï¼š

```javascript
/**
 * é‡‘é¢æ ¼å¼åŒ–,åƒåˆ†ç¬¦ä¸”ä¿ç•™ä¸¤ä½å°æ•°
 * @param {Number|String} amount - é‡‘é¢æ•°å€¼
 * @param {Boolean} isDecimal - æ˜¯å¦ä¿ç•™å°æ•°ï¼Œé»˜è®¤true
 * @param {Boolean} isThousand - æ˜¯å¦æ·»åŠ åƒåˆ†ç¬¦ï¼Œé»˜è®¤true
 * @param {Number} decimalN - ä¿ç•™å°æ•°ä½æ•°ï¼Œé»˜è®¤2ä½
 * @returns {String} æ ¼å¼åŒ–åçš„é‡‘é¢å­—ç¬¦ä¸²
 * @example
 * formatAmount(1234567.89) // "1,234,567.89"
 * formatAmount(1234567.89, false) // "1,234,568"
 */
```

### 2. æ—¶é—´æ ¼å¼åŒ–è§„èŒƒ

**è§„åˆ™**ï¼šæ—¶é—´æ ¼å¼åŒ–è¯·ç”¨ `dayjs` å®ç°ï¼

**å®ç°æ–¹å¼**ï¼š

```javascript
// listData.js
import dayjs from 'dayjs'

{
  title: 'åˆ›å»ºæ—¶é—´',
  dataIndex: 'createTime',
  width: 180,
  formatter: ({ cellValue }) => {
    if (!cellValue) return '-'
    return dayjs(cellValue).format('YYYY-MM-DD HH:mm:ss')
    // æ˜¾ç¤ºï¼š2024-01-01 10:30:00
  }
}
```

**å¸¸ç”¨æ ¼å¼åŒ–æ ¼å¼**ï¼š

- `YYYY-MM-DD HH:mm:ss` - å®Œæ•´æ—¥æœŸæ—¶é—´
- `YYYY-MM-DD` - æ—¥æœŸ
- `YYYY-MM-DD HH:mm` - æ—¥æœŸæ—¶é—´ï¼ˆä¸å«ç§’ï¼‰
- `HH:mm:ss` - æ—¶é—´
- `YYYYå¹´MMæœˆDDæ—¥` - ä¸­æ–‡æ—¥æœŸæ ¼å¼

### 3. æ·±æ‹·è´è§„èŒƒ

**è§„åˆ™**ï¼šå¯¹è±¡æˆ–æ•°ç»„çš„æ·±æ‹·è´è¯·ç”¨ `lodash-es` çš„ `cloneDeep` å®ç°ï¼

**å®ç°æ–¹å¼**ï¼š

```javascript
import { cloneDeep } from 'lodash-es'

// åœ¨éœ€è¦ä¿®æ”¹è¡Œæ•°æ®æ—¶
const handleEdit = (row) => {
  editData.value = cloneDeep(row)
  modalVisible.value = true
}
```

### 4. å­—å…¸ä½¿ç”¨è§„èŒƒ

**è§„åˆ™**ï¼š

1. âš ï¸ **ç­›é€‰æ¡ä»¶æ˜¯å­—å…¸çš„æƒ…å†µï¼Œå¿…é¡»é…åˆ `index.vue` ä½¿ç”¨ `dictStore`ã€`proxy.useDict` è·å–å¯¹åº”å­—å…¸ä½¿ç”¨ã€‚**
2. âš ï¸ **åˆ—è¡¨é¡µè¡¨æ ¼å‡¡æ˜¯æ¶‰åŠåˆ°å­—å…¸çš„ï¼Œéƒ½è¦å…ˆå‘å¼€å‘è€…è¯¢é—®å…·ä½“çš„å­—å…¸ key æˆ–æ˜¯å­—å…¸çš„æšä¸¾å€¼å†è¿›è¡Œç›¸å…³æŒ‰é’®çŠ¶æ€åˆ¤æ–­æˆ–å­—å…¸å›æ˜¾ã€‚**
3. âš ï¸ **ä¸€äº›å¸¸ç”¨çš„å­—å…¸æšä¸¾éœ€è¦æé†’å¼€å‘è€…å°†å…¶å®šä¹‰åœ¨å…¨å±€çš„è§„åˆ™æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿åç»­ AI å‚è€ƒæšä¸¾å€¼è¿›è¡Œåˆ¤æ–­ã€‚**

**å®ç°æ–¹å¼**ï¼š

```vue
<!-- index.vue -->
<script setup>
import { reactive, getCurrentInstance } from 'vue'

const { proxy } = getCurrentInstance()

// âš ï¸ å¿…é¡»ä½¿ç”¨ proxy.useDict è·å–å­—å…¸æ•°æ®
const { serviceTypeDict, statusDict } = proxy.useDict('service_type', 'service_status')

// âš ï¸ å¿…é¡»ä½¿ç”¨ dictStore ä¼ é€’ç»™ TableCommon ç»„ä»¶
const dictStore = reactive({
  service_type: serviceTypeDict,
  service_status: statusDict
})
</script>

<template>
  <TableCommon
    :list-data="listData"
    :methods="tableMethods"
    :dict-store="dictStore"
  />
</template>
```

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ **å¿…é¡»å…ˆè¯¢é—®å­—å…¸ key**ï¼šåœ¨æ¶‰åŠå­—å…¸æ—¶ï¼Œå¿…é¡»å…ˆå‘å¼€å‘è€…è¯¢é—®å…·ä½“çš„å­—å…¸ key æˆ–æšä¸¾å€¼
- âš ï¸ **ä½¿ç”¨ dictStore**ï¼šå¿…é¡»é€šè¿‡ `dictStore` å°†å­—å…¸æ•°æ®ä¼ é€’ç»™ TableCommon ç»„ä»¶
- âš ï¸ **ä½¿ç”¨ proxy.useDict**ï¼šå¿…é¡»ä½¿ç”¨ `proxy.useDict` è·å–å­—å…¸æ•°æ®ï¼Œä¸è¦å•ç‹¬å¼•å…¥ `useDict`
- âš ï¸ **å®šä¹‰å¸¸ç”¨æšä¸¾**ï¼šå¸¸ç”¨çš„å­—å…¸æšä¸¾åº”è¯¥å®šä¹‰åœ¨å…¨å±€è§„åˆ™æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿ AI å‚è€ƒ

### 5. rowKey é…ç½®è§„èŒƒ

**è§„åˆ™**ï¼š`rowKey` å¿…é¡»é…ç½®ä¸”æ˜¯å”¯ä¸€ï¼ç”¨äºæŒ‰é’®çŠ¶æ€ç¼“å­˜å’Œæ•°æ®æ“ä½œã€‚

**é…ç½®æ–¹å¼**ï¼š

```javascript
// listData.js
export const listData = {
  rowKey: 'id',  // âš ï¸ å¿…é¡»é…ç½®ä¸”æ˜¯å”¯ä¸€
  // ...
}
```

**ä½¿ç”¨åœºæ™¯**ï¼š

- æŒ‰é’®çŠ¶æ€ç¼“å­˜ï¼š`showRowBtn` ä¼šä½¿ç”¨ `row[listData.rowKey]` ä½œä¸ºç¼“å­˜é”®
- æ•°æ®æ“ä½œï¼šåˆ é™¤ã€ç¼–è¾‘ç­‰æ“ä½œéœ€è¦ä½¿ç”¨ `rowKey` ä½œä¸ºå”¯ä¸€æ ‡è¯†

### 6. çŠ¶æ€åˆ¤æ–­è§„èŒƒ

**è§„åˆ™**ï¼š

1. âš ï¸ **çŠ¶æ€åˆ¤æ–­ä¸­æšä¸¾ä»…ä¾›å‚è€ƒï¼ä»¥å®é™…å€¼ä¸ºå‡†ã€‚**
2. âš ï¸ **å¿…é¡»å…ˆå‘å¼€å‘è€…è¯¢é—®å…·ä½“çš„å­—å…¸ key æˆ–æšä¸¾å€¼ï¼Œç„¶åç›´æ¥ä½¿ç”¨å­—å…¸å€¼è¿›è¡Œåˆ¤æ–­ã€‚**

**å®ç°æ–¹å¼**ï¼š

```javascript
const showRowBtn = (btn, row) => {
  const btnStatus = {
    show: true,
    disabled: false
  }
  
  // âš ï¸ çŠ¶æ€åˆ¤æ–­ä¸­æšä¸¾ä»…ä¾›å‚è€ƒï¼ä»¥å®é™…å€¼ä¸ºå‡†
  // âš ï¸ å¿…é¡»å…ˆå‘å¼€å‘è€…è¯¢é—®å…·ä½“çš„å­—å…¸ key æˆ–æšä¸¾å€¼
  
  if (btn.id === 'module:function:edit') {
    // âš ï¸ 'NotSubmitted' å’Œ 'Overruled' æ˜¯ç¤ºä¾‹å€¼ï¼Œå®é™…å€¼ä»¥å¼€å‘è€…æä¾›ä¸ºå‡†
    if (row.status != 'NotSubmitted' && row.status != 'Overruled') {
      btnStatus.disabled = true
    }
  }
  
  return btnStatus
}
```

**å®¡æ‰¹çŠ¶æ€æšä¸¾ç¤ºä¾‹**ï¼ˆä»…ä¾›å‚è€ƒï¼Œå®é™…å€¼ä»¥å¼€å‘è€…æä¾›ä¸ºå‡†ï¼‰ï¼š

```javascript
// âš ï¸ çŠ¶æ€åˆ¤æ–­ä¸­æšä¸¾ä»…ä¾›å‚è€ƒï¼ä»¥å®é™…å€¼ä¸ºå‡†
const ApprovalStatus = {
  NotSubmitted: 'NotSubmitted',  // æœªæäº¤ï¼ˆç¤ºä¾‹ï¼‰
  UnderReview: 'UnderReview',    // å®¡æ ¸ä¸­ï¼ˆç¤ºä¾‹ï¼‰
  Audited: 'Audited',            // å·²å®¡æ ¸ï¼ˆç¤ºä¾‹ï¼‰
  Overruled: 'Overruled'         // é©³å›ï¼ˆç¤ºä¾‹ï¼‰
}
```

## é¡¹ç›®é›†æˆè§„èŒƒ

### 1. ç›®å½•ç»“æ„è§„èŒƒ

```
src/views/[æ¨¡å—å]/[åŠŸèƒ½å]/
â”œâ”€â”€ index.vue          # é¡µé¢ä¸»æ–‡ä»¶ï¼ˆå¿…é¡»ï¼‰
â”œâ”€â”€ listData.js        # åˆ—è¡¨é…ç½®æ•°æ®ï¼ˆå¿…é¡»ï¼‰
â”œâ”€â”€ components/        # é¡µé¢ä¸“ç”¨ç»„ä»¶ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ modal.vue     # CRUDæ¨¡æ€æ¡†ç»„ä»¶
â””â”€â”€ api/              # é¡µé¢ä¸“ç”¨APIï¼ˆå¯é€‰ï¼Œé€šå¸¸æ”¾åœ¨ src/api/ ç›®å½•ä¸‹ï¼‰

# å®é™…é¡¹ç›®ç¤ºä¾‹
src/views/baseInfo/settings/
â”œâ”€â”€ index.vue          # é”€å”®æœåŠ¡é…ç½®åˆ—è¡¨é¡µ
â”œâ”€â”€ listData.js        # è¡¨æ ¼é…ç½®
â””â”€â”€ components/
    â””â”€â”€ modal.vue     # æ–°å¢/ç¼–è¾‘æ¨¡æ€æ¡†

src/views/baseInfo/priceConfig/
â”œâ”€â”€ index.vue          # ä»·æ ¼é…ç½®è°ƒæ•´åˆ—è¡¨é¡µ
â”œâ”€â”€ listData.js        # è¡¨æ ¼é…ç½®
â””â”€â”€ components/
    â””â”€â”€ modal.vue     # æ–°å¢/ç¼–è¾‘æ¨¡æ€æ¡†
```

### 2. å‘½åè§„èŒƒ

- **é¡µé¢æ–‡ä»¶**: ä½¿ç”¨å°é©¼å³°å‘½åï¼ˆcamelCaseï¼‰ï¼Œå¦‚ `userList.vue`ã€`serviceConfig.vue`
- **é…ç½®æ–‡ä»¶**: ç»Ÿä¸€å‘½åä¸º `listData.js`
- **ç¼“å­˜é”®**: ä½¿ç”¨æ¨¡å—å+åŠŸèƒ½åï¼Œå¦‚ `serviceConfig`ã€`priceConfig`
- **æƒé™æ ‡è¯†**: ä½¿ç”¨ `æ¨¡å—:åŠŸèƒ½:æ“ä½œ` æ ¼å¼ï¼Œå¦‚ `baseInfo:settings:edit`ã€`system:user:delete`
- **API æ–‡ä»¶**: æŒ‰æ¨¡å—ç»„ç»‡ï¼Œå¦‚ `src/api/baseInfo/serviceConfig.js`

## é…ç½®æ–‡ä»¶è¯¦è§£ (listData.js)

### åŸºç¡€é…ç½®æ¨¡æ¿ï¼ˆå®Œæ•´æ³¨é‡Šç‰ˆï¼‰

```javascript
export const listData = {
  // ========== é¡µé¢åŸºç¡€ä¿¡æ¯ ==========
  /**
   * name: é¡µé¢æ ‡è¯†
   * @type {string}
   * @description ç”¨äºé¡µé¢æ ‡è¯†ï¼Œé€šå¸¸ä¸æ¨¡å—åå’ŒåŠŸèƒ½åç›¸å…³
   * @example 'serviceConfig'ã€'priceConfig'
   */
  name: 'æ¨¡å—åç§°',

  /**
   * title: é¡µé¢æ˜¾ç¤ºæ ‡é¢˜
   * @type {string}
   * @description é¡µé¢æ ‡é¢˜ï¼Œç”¨äºæ˜¾ç¤ºåœ¨é¡µé¢å¤´éƒ¨ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
   * @example 'é”€å”®æœåŠ¡é…ç½®'ã€'ä»·æ ¼é…ç½®è°ƒæ•´'
   */
  title: 'é¡µé¢æ ‡é¢˜',

  /**
   * cacheKey: å”¯ä¸€ç¼“å­˜é”®
   * @type {string}
   * @description ç”¨äºç¼“å­˜è¡¨æ ¼çŠ¶æ€ï¼ˆåˆ—å®½ã€æ’åºç­‰ï¼‰ï¼Œå¿…é¡»å”¯ä¸€
   * @example 'serviceConfig'ã€'priceConfig'
   * @note å»ºè®®ä½¿ç”¨æ¨¡å—å+åŠŸèƒ½åçš„ç»„åˆï¼Œç¡®ä¿å…¨å±€å”¯ä¸€
   */
  cacheKey: 'uniqueKey',

  // ========== è¡¨æ ¼åŸºç¡€é…ç½® ==========
  /**
   * hideSelection: æ˜¯å¦éšè—é€‰æ‹©åˆ—
   * @type {boolean}
   * @default false
   * @description è®¾ç½®ä¸º true æ—¶ï¼Œéšè—è¡¨æ ¼å·¦ä¾§çš„é€‰æ‹©æ¡†åˆ—ï¼ˆå¤šé€‰/å•é€‰ï¼‰
   * @example false - æ˜¾ç¤ºé€‰æ‹©åˆ—ï¼ˆé»˜è®¤ï¼‰
   * @example true - éšè—é€‰æ‹©åˆ—ï¼ˆçº¯å±•ç¤ºè¡¨æ ¼ï¼‰
   */
  hideSelection: false,

  /**
   * hasPager: æ˜¯å¦å¯ç”¨åˆ†é¡µ
   * @type {boolean}
   * @default true
   * @description è®¾ç½®ä¸º false æ—¶ï¼Œä¸æ˜¾ç¤ºåˆ†é¡µå™¨ï¼ŒåŠ è½½æ‰€æœ‰æ•°æ®
   * @example true - å¯ç”¨åˆ†é¡µï¼ˆé»˜è®¤ï¼‰
   * @example false - ä¸åˆ†é¡µï¼ŒåŠ è½½å…¨éƒ¨æ•°æ®
   */
  hasPager: true,

  /**
   * hiddenIndex: æ˜¯å¦éšè—åºå·åˆ—
   * @type {boolean}
   * @default false
   * @description è®¾ç½®ä¸º true æ—¶ï¼Œéšè—è¡¨æ ¼å·¦ä¾§çš„åºå·åˆ—
   * @example false - æ˜¾ç¤ºåºå·åˆ—ï¼ˆé»˜è®¤ï¼‰
   * @example true - éšè—åºå·åˆ—
   */
  hiddenIndex: false,

  /**
   * rowKey: ä¸»è¡¨IDå­—æ®µå
   * @type {string}
   * @default 'id'
   * @description âš ï¸ å¿…é¡»æ˜¯è¡Œå†…å”¯ä¸€æ ‡è¯†å­—æ®µï¼Œç”¨äºï¼š
   *   - è¡Œæ•°æ®å”¯ä¸€æ ‡è¯†
   *   - é€‰æ‹©æ¡†å…³è”
   *   - æŒ‰é’®çŠ¶æ€ç¼“å­˜
   *   - æ ‘å½¢ç»“æ„çš„çˆ¶å­å…³ç³»
   * @example 'id'ã€'userId'ã€'contractId'
   * @note å¦‚æœåç«¯è¿”å›çš„IDå­—æ®µä¸æ˜¯ 'id'ï¼Œå¿…é¡»æŒ‡å®šæ­£ç¡®çš„å­—æ®µå
   */
  rowKey: 'id',

  // ========== æ ‘å½¢ç»“æ„é…ç½® ==========
  /**
   * isTree: æ˜¯å¦å¯ç”¨æ ‘å½¢ç»“æ„
   * @type {boolean}
   * @default false
   * @description è®¾ç½®ä¸º true æ—¶ï¼Œè¡¨æ ¼ä»¥æ ‘å½¢ç»“æ„å±•ç¤ºæ•°æ®
   * @example false - æ™®é€šåˆ—è¡¨ï¼ˆé»˜è®¤ï¼‰
   * @example true - æ ‘å½¢ç»“æ„
   * @note å¯ç”¨æ ‘å½¢ç»“æ„æ—¶ï¼Œéœ€è¦é…åˆ parentField å’Œ childrenField ä½¿ç”¨
   */
  isTree: false,

  /**
   * isTransform: æ˜¯å¦è½¬æ¢æ ‘å½¢ç»“æ„
   * @type {boolean}
   * @default false
   * @description å½“åç«¯è¿”å›åµŒå¥—çš„æ ‘å½¢æ•°æ®æ—¶ï¼Œè®¾ç½®ä¸º true ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºæ‰å¹³ç»“æ„
   * @example false - åç«¯è¿”å›æ‰å¹³æ•°æ®ï¼ˆé»˜è®¤ï¼‰
   * @example true - åç«¯è¿”å›åµŒå¥—æ•°æ®ï¼Œéœ€è¦è½¬æ¢
   * @note ä»…åœ¨ isTree: true æ—¶æœ‰æ•ˆ
   */
  isTransform: false,

  /**
   * parentField: çˆ¶çº§å­—æ®µå
   * @type {string}
   * @default 'parentId'
   * @description æ ‘å½¢ç»“æ„ä¸­ï¼Œæ ‡è¯†çˆ¶çº§IDçš„å­—æ®µå
   * @example 'parentId'ã€'parent_id'ã€'pid'
   * @note ä»…åœ¨ isTree: true æ—¶æœ‰æ•ˆ
   */
  parentField: 'parentId',

  /**
   * childrenField: å­çº§å­—æ®µå
   * @type {string}
   * @default 'children'
   * @description æ ‘å½¢ç»“æ„ä¸­ï¼Œæ ‡è¯†å­çº§æ•°ç»„çš„å­—æ®µå
   * @example 'children'ã€'childList'ã€'subItems'
   * @note ä»…åœ¨ isTree: true ä¸” isTransform: true æ—¶æœ‰æ•ˆ
   */
  childrenField: 'children',

  // ========== APIé…ç½® ==========
  /**
   * api: APIæ¥å£é…ç½®
   * @type {Object}
   * @description è¡¨æ ¼æ•°æ®è¯·æ±‚æ¥å£é…ç½®
   */
  api: {
    /**
     * type: è¯·æ±‚ç±»å‹
     * @type {'get' | 'post'}
     * @default 'post'
     * @description HTTPè¯·æ±‚æ–¹æ³•
     * @example 'post' - POSTè¯·æ±‚ï¼ˆé¡¹ç›®æ ‡å‡†ï¼‰
     * @example 'get' - GETè¯·æ±‚ï¼ˆç‰¹æ®Šåœºæ™¯ï¼‰
     */
    type: 'post',

    /**
     * url: æ¥å£åœ°å€
     * @type {string}
     * @description å®Œæ•´çš„æ¥å£è·¯å¾„ï¼Œä¸éœ€è¦åŒ…å« baseURL
     * @example '/sale/serviceConfig/page'
     * @example '/admin/projectMasterData/list'
     */
    url: '/api/endpoint',

    /**
     * unTransByQs: æ˜¯å¦ä¸è½¬æ¢æŸ¥è¯¢å‚æ•°
     * @type {boolean}
     * @default true
     * @description POSTè¯·æ±‚æ—¶ï¼Œæ˜¯å¦å°†æŸ¥è¯¢å‚æ•°è½¬æ¢ä¸º query å¯¹è±¡
     * @example true - POSTè¯·æ±‚ï¼Œå‚æ•°åœ¨ body ä¸­ï¼ˆé¡¹ç›®æ ‡å‡†ï¼‰
     * @example false - GETè¯·æ±‚ï¼Œå‚æ•°åœ¨ URL ä¸­
     */
    unTransByQs: true,

    /**
     * disableFirst: æ˜¯å¦ç¦ç”¨é¦–æ¬¡åŠ è½½
     * @type {boolean}
     * @default false
     * @description è®¾ç½®ä¸º true æ—¶ï¼Œç»„ä»¶æŒ‚è½½æ—¶ä¸è‡ªåŠ¨åŠ è½½æ•°æ®
     * @example false - è‡ªåŠ¨åŠ è½½ï¼ˆé»˜è®¤ï¼‰
     * @example true - æ‰‹åŠ¨è°ƒç”¨ loadData() åŠ è½½
     */
    disableFirst: false
  },

  // ========== åˆ—é…ç½® ==========
  /**
   * columns: è¡¨æ ¼åˆ—é…ç½®æ•°ç»„
   * @type {Array<Object>}
   * @description å®šä¹‰è¡¨æ ¼çš„æ‰€æœ‰åˆ—ï¼ŒåŒ…æ‹¬æ•°æ®åˆ—å’Œæ“ä½œåˆ—
   * @see [åˆ—é…ç½®è¯¦è§£](#åˆ—é…ç½®è¯¦è§£-columns)
   */
  columns: [],

  // ========== é¡¶éƒ¨æŒ‰é’®é…ç½® ==========
  /**
   * commands: é¡¶éƒ¨å·¥å…·æ æŒ‰é’®é…ç½®æ•°ç»„
   * @type {Array<Object>}
   * @description å®šä¹‰è¡¨æ ¼é¡¶éƒ¨å·¥å…·æ çš„æŒ‰é’®
   * @see [é¡¶éƒ¨æŒ‰é’®é…ç½®è¯¦è§£](#é¡¶éƒ¨æŒ‰é’®é…ç½®è¯¦è§£-commands)
   */
  commands: [],

  // ========== æŸ¥è¯¢æ¡ä»¶é…ç½® ==========
  /**
   * queryCondition: æŸ¥è¯¢æ¡ä»¶é…ç½®æ•°ç»„
   * @type {Array<Object>}
   * @description å®šä¹‰è¡¨æ ¼ä¸Šæ–¹çš„æŸ¥è¯¢è¡¨å•æ¡ä»¶
   * @see [æŸ¥è¯¢æ¡ä»¶é…ç½®è¯¦è§£](#æŸ¥è¯¢æ¡ä»¶é…ç½®è¯¦è§£-querycondition)
   */
  queryCondition: [],

  // ========== å…¶ä»–é…ç½® ==========
  /**
   * hideSearch: æ˜¯å¦éšè—æœç´¢è¡¨å•
   * @type {boolean}
   * @default false
   * @description è®¾ç½®ä¸º true æ—¶ï¼Œéšè—æ•´ä¸ªæŸ¥è¯¢æ¡ä»¶è¡¨å•åŒºåŸŸ
   * @example false - æ˜¾ç¤ºæœç´¢è¡¨å•ï¼ˆé»˜è®¤ï¼‰
   * @example true - éšè—æœç´¢è¡¨å•
   */
  hideSearch: false
}
```

### API é…ç½®è§„èŒƒ

```javascript
// POST è¯·æ±‚é…ç½®ï¼ˆé¡¹ç›®æ ‡å‡†ï¼‰
api: {
  type: 'post',
  url: '/afterSales/serviceConfig/page',
  unTransByQs: true
}

// ä»·æ ¼é…ç½®APIç¤ºä¾‹
api: {
  type: 'post',
  url: '/sale/priceConfig/page',
  unTransByQs: true
}

// GET è¯·æ±‚é…ç½®ï¼ˆç‰¹æ®Šåœºæ™¯ï¼‰
api: {
  type: 'get',
  url: '/admin/projectMasterData/list',
  unTransByQs: false
}
```

### åˆ—é…ç½®è¯¦è§£ (columns)

åˆ—é…ç½®æ˜¯ `columns` æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ ä»£è¡¨è¡¨æ ¼çš„ä¸€åˆ—ã€‚åˆ—åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š**æ•°æ®åˆ—**å’Œ**æ“ä½œåˆ—**ã€‚

#### æ•°æ®åˆ—é€šç”¨å±æ€§

```javascript
columns: [
  {
    /**
     * title: åˆ—æ ‡é¢˜
     * @type {string}
     * @description è¡¨æ ¼åˆ—å¤´æ˜¾ç¤ºçš„æ–‡å­—
     * @example 'æœåŠ¡ç±»å‹'ã€'åˆ›å»ºæ—¶é—´'ã€'é‡‘é¢(å…ƒ)'
     * @note å•ä½ç»Ÿä¸€æ”¾åœ¨è¡¨å¤´ï¼Œå¦‚ï¼š'é‡‘é¢(å…ƒ)'ã€'é¢ç§¯(ã¡)'ã€'æ¯”ä¾‹(%)'
     */
    title: 'æœåŠ¡ç±»å‹',

    /**
     * dataIndex: æ•°æ®å­—æ®µå
     * @type {string}
     * @description å¯¹åº”åç«¯è¿”å›æ•°æ®ä¸­çš„å­—æ®µå
     * @example 'serviceType'ã€'createTime'ã€'amount'
     * @note å¿…é¡»ä¸æ¥å£è¿”å›çš„å­—æ®µåå®Œå…¨ä¸€è‡´
     */
    dataIndex: 'serviceType',

    /**
     * width: å›ºå®šåˆ—å®½ï¼ˆåƒç´ ï¼‰
     * @type {number}
     * @description åˆ—çš„å›ºå®šå®½åº¦ï¼Œå•ä½ï¼špx
     * @example 120ã€150ã€200
     * @note âš ï¸ width å’Œ minWidth ä¸èƒ½åŒæ—¶å­˜åœ¨ï¼Œè‡³å°‘æœ‰ä¸€åˆ—å¿…é¡»é…ç½® minWidth
     */
    width: 120,

    /**
     * minWidth: æœ€å°åˆ—å®½ï¼ˆåƒç´ ï¼‰
     * @type {number}
     * @description åˆ—çš„æœ€å°å®½åº¦ï¼Œåˆ—å®½å¯è‡ªé€‚åº”ï¼Œå•ä½ï¼špx
     * @example 100ã€150ã€180
     * @note âš ï¸ width å’Œ minWidth ä¸èƒ½åŒæ—¶å­˜åœ¨ï¼Œè‡³å°‘æœ‰ä¸€åˆ—å¿…é¡»é…ç½® minWidth
     */
    minWidth: 150,

    /**
     * resizable: æ˜¯å¦å¯è°ƒæ•´åˆ—å®½
     * @type {boolean}
     * @default true
     * @description è®¾ç½®ä¸º true æ—¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ‹–æ‹½åˆ—è¾¹ç•Œè°ƒæ•´åˆ—å®½
     * @example true - å¯è°ƒæ•´ï¼ˆé»˜è®¤ï¼‰
     * @example false - ä¸å¯è°ƒæ•´
     */
    resizable: true,

    /**
     * showOverflow: æ˜¯å¦æ˜¾ç¤ºçœç•¥å·
     * @type {boolean}
     * @default true
     * @description å½“å†…å®¹è¶…å‡ºåˆ—å®½æ—¶ï¼Œæ˜¯å¦æ˜¾ç¤ºçœç•¥å·ï¼ˆ...ï¼‰
     * @example true - æ˜¾ç¤ºçœç•¥å·ï¼ˆé»˜è®¤ï¼‰
     * @example false - ä¸æ˜¾ç¤ºçœç•¥å·ï¼Œå†…å®¹å¯èƒ½æº¢å‡º
     */
    showOverflow: true,

    /**
     * align: å¯¹é½æ–¹å¼
     * @type {'left' | 'center' | 'right'}
     * @default 'left'
     * @description åˆ—å†…å®¹çš„å¯¹é½æ–¹å¼
     * @example 'left' - å·¦å¯¹é½ï¼ˆæ–‡æœ¬å†…å®¹ï¼Œé»˜è®¤ï¼‰
     * @example 'center' - å±…ä¸­å¯¹é½ï¼ˆçŠ¶æ€ã€ç±»å‹ç­‰å›ºå®šé•¿åº¦å†…å®¹ï¼‰
     * @example 'right' - å³å¯¹é½ï¼ˆæ•°å­—ã€é‡‘é¢ç­‰æ•°å€¼å†…å®¹ï¼‰
     * @note è¡¨å¤´å’Œå•å…ƒæ ¼å¯¹é½æ–¹å¼åº”ä¿æŒä¸€è‡´
     */
    align: 'left',

    /**
     * fixed: å›ºå®šåˆ—ä½ç½®
     * @type {'left' | 'right' | false}
     * @default false
     * @description å›ºå®šåˆ—åœ¨è¡¨æ ¼çš„å·¦ä¾§æˆ–å³ä¾§ï¼Œæ¨ªå‘æ»šåŠ¨æ—¶ä¿æŒå¯è§
     * @example 'left' - å›ºå®šåœ¨å·¦ä¾§
     * @example 'right' - å›ºå®šåœ¨å³ä¾§ï¼ˆæ“ä½œåˆ—å¸¸ç”¨ï¼‰
     * @example false - ä¸å›ºå®šï¼ˆé»˜è®¤ï¼‰
     */
    fixed: false,

    /**
     * slots: è‡ªå®šä¹‰æ’æ§½é…ç½®
     * @type {Object}
     * @description ä½¿ç”¨æ’æ§½è‡ªå®šä¹‰åˆ—å†…å®¹æ¸²æŸ“
     * @example { default: 'featureColumn' } - ä½¿ç”¨ featureColumn æ’æ§½
     * @note âš ï¸ ä¼˜å…ˆä½¿ç”¨ formatterï¼Œåªæœ‰å®šåˆ¶åŒ–åŠŸèƒ½æ‰ä½¿ç”¨æ’æ§½
     * @see [formatter å’Œ slots ä½¿ç”¨è§„èŒƒ](#formatter-å’Œ-slots-ä½¿ç”¨è§„èŒƒ)
     */
    slots: { default: 'featureColumn' },

    /**
     * formatter: æ ¼å¼åŒ–å‡½æ•°
     * @type {Function}
     * @description è‡ªå®šä¹‰å•å…ƒæ ¼å†…å®¹æ ¼å¼åŒ–
     * @param {Object} params - æ ¼å¼åŒ–å‚æ•°
     * @param {any} params.cellValue - å½“å‰å•å…ƒæ ¼çš„å€¼
     * @param {Object} params.row - å½“å‰è¡Œæ•°æ®
     * @param {Object} params.column - å½“å‰åˆ—é…ç½®
     * @returns {string} æ ¼å¼åŒ–åçš„æ˜¾ç¤ºå†…å®¹
     * @example ({ cellValue }) => cellValue || '-'
     * @example ({ cellValue }) => cellValue ? 'æ˜¯' : 'å¦'
     * @note âš ï¸ ä¼˜å…ˆä½¿ç”¨ formatterï¼Œåªæœ‰å®šåˆ¶åŒ–åŠŸèƒ½æ‰ä½¿ç”¨æ’æ§½
     * @see [formatter å’Œ slots ä½¿ç”¨è§„èŒƒ](#formatter-å’Œ-slots-ä½¿ç”¨è§„èŒƒ)
     */
    formatter: ({ cellValue }) => {
      return cellValue || '-'
    },

    /**
     * children: äºŒçº§è¡¨å¤´é…ç½®
     * @type {Array<Object>}
     * @description ç”¨äºé…ç½®å¤šçº§è¡¨å¤´ï¼Œæ”¯æŒäºŒçº§è¡¨å¤´åµŒå¥—
     * @example [{ title: 'åŸºæœ¬ä¿¡æ¯', children: [{ title: 'å§“å', dataIndex: 'name' }] }]
     * @note äºŒçº§è¡¨å¤´ä¸‹çš„å­åˆ—é…ç½®ä¸æ™®é€šåˆ—é…ç½®ç›¸åŒ
     */
    children: [
      {
        title: 'å­åˆ—1',
        dataIndex: 'subField1',
        width: 120
      },
      {
        title: 'å­åˆ—2',
        dataIndex: 'subField2',
        width: 120
      }
    ]
  }
]
```

#### äºŒçº§è¡¨å¤´é…ç½®è¯¦è§£

**ä½¿ç”¨åœºæ™¯**ï¼šå½“éœ€è¦å°†å¤šä¸ªç›¸å…³åˆ—ç»„åˆåœ¨ä¸€èµ·æ˜¾ç¤ºæ—¶ï¼Œä½¿ç”¨äºŒçº§è¡¨å¤´ã€‚

**é…ç½®æ–¹å¼**ï¼š

```javascript
columns: [
  {
    title: 'åŸºæœ¬ä¿¡æ¯',  // ä¸€çº§è¡¨å¤´
    align: 'center',
    children: [  // äºŒçº§è¡¨å¤´é…ç½®
      {
        title: 'å§“å',
        dataIndex: 'name',
        width: 120,
        align: 'left'
      },
      {
        title: 'å¹´é¾„',
        dataIndex: 'age',
        width: 100,
        align: 'right'
      },
      {
        title: 'æ€§åˆ«',
        dataIndex: 'gender',
        width: 100,
        align: 'center'
      }
    ]
  },
  {
    title: 'é‡‘é¢ä¿¡æ¯',  // ä¸€çº§è¡¨å¤´
    align: 'center',
    children: [  // äºŒçº§è¡¨å¤´é…ç½®
      {
        title: 'å•ä»·(å…ƒ)',
        dataIndex: 'unitPrice',
        width: 150,
        align: 'right',
        formatter: ({ cellValue }) => {
          return formatAmount(cellValue)
        }
      },
      {
        title: 'æ€»ä»·(å…ƒ)',
        dataIndex: 'totalPrice',
        width: 150,
        align: 'right',
        formatter: ({ cellValue }) => {
          return formatAmount(cellValue)
        }
      }
    ]
  }
]
```

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ äºŒçº§è¡¨å¤´ä¸‹çš„å­åˆ—é…ç½®ä¸æ™®é€šåˆ—é…ç½®ç›¸åŒ
- âš ï¸ ä¸€çº§è¡¨å¤´å¯ä»¥è®¾ç½® `align` ç­‰å±æ€§ï¼Œä½†é€šå¸¸ä¸éœ€è¦è®¾ç½® `dataIndex`
- âš ï¸ å­åˆ—å¿…é¡»é…ç½® `dataIndex` ç”¨äºæ•°æ®ç»‘å®š
- âš ï¸ å­åˆ—çš„å®½åº¦é…ç½®ä¼šå½±å“æ•´ä¸ªä¸€çº§è¡¨å¤´çš„å®½åº¦

#### åˆ—å®½é…ç½®è§„åˆ™

âš ï¸ **é‡è¦è§„åˆ™ï¼š**

1. **width å’Œ minWidth ä¸èƒ½åŒæ—¶å­˜åœ¨**
2. **è‡³å°‘æœ‰ä¸€åˆ—å¿…é¡»é…ç½® minWidth**ï¼ˆç”¨äºè‡ªé€‚åº”å¸ƒå±€ï¼‰

```javascript
// âœ… æ­£ç¡®é…ç½®
columns: [
  {
    title: 'é¡¹ç›®åç§°',
    dataIndex: 'projectName',
    minWidth: 150,  // è‡ªé€‚åº”å®½åº¦
    resizable: true,
    showOverflow: true
  },
  {
    title: 'é‡‘é¢(å…ƒ)',
    dataIndex: 'amount',
    width: 150,     // å›ºå®šå®½åº¦
    align: 'right'
  }
]

// âŒ é”™è¯¯é…ç½® - width å’Œ minWidth åŒæ—¶å­˜åœ¨
{
  title: 'åˆ—å',
  dataIndex: 'field',
  width: 200,      // âŒ ä¸èƒ½åŒæ—¶å­˜åœ¨
  minWidth: 150    // âŒ ä¸èƒ½åŒæ—¶å­˜åœ¨
}
```

#### å¯¹é½æ–¹å¼è§„èŒƒ

æ ¹æ®å†…å®¹ç±»å‹é€‰æ‹©åˆé€‚çš„å¯¹é½æ–¹å¼ï¼š

| å†…å®¹ç±»å‹ | å¯¹é½æ–¹å¼ | è¯´æ˜ | ç¤ºä¾‹ |
|---------|---------|------|------|
| æ–‡æœ¬ï¼ˆé•¿çŸ­ä¸ä¸€ï¼‰ | `left` | ä¸­æ–‡/è‹±æ–‡æ–‡æœ¬ï¼Œé•¿åº¦ä¸å›ºå®š | å§“åã€åœ°å€ã€å¤‡æ³¨ |
| æ–‡æœ¬ï¼ˆé•¿åº¦ç›¸åŒï¼‰ | `center` | å›ºå®šé•¿åº¦çš„æ–‡æœ¬æˆ–çŠ¶æ€ | çŠ¶æ€ã€ç±»å‹ã€ç­‰çº§ |
| æ•°å­—/é‡‘é¢ | `right` | æ‰€æœ‰æ•°å€¼ç±»å‹æ•°æ® | é‡‘é¢ã€æ•°é‡ã€ç™¾åˆ†æ¯” |
| æ“ä½œåˆ— | `center` | æ“ä½œæŒ‰é’®ç»„ | ç¼–è¾‘ã€åˆ é™¤ã€æŸ¥çœ‹ |

#### åˆ—è¡¨ç»„ä»¶æ’æ§½è§„èŒƒ

**âš ï¸ é‡è¦ï¼šä½¿ç”¨ featureColumn æ’æ§½è¿›è¡Œåˆ—å†…å®¹è‡ªå®šä¹‰æ¸²æŸ“**

å½“åˆ—éœ€è¦æ˜¾ç¤ºå­—å…¸æ ‡ç­¾ã€è‡ªå®šä¹‰æ ¼å¼æˆ–å…¶ä»–å¤æ‚å†…å®¹æ—¶ï¼Œä½¿ç”¨ `featureColumn` æ’æ§½ã€‚

**é…ç½®æ–¹å¼ï¼š**

åœ¨ `listData.js` ä¸­é…ç½®éœ€è¦è‡ªå®šä¹‰æ¸²æŸ“çš„åˆ—ï¼š

```javascript
export const listData = {
  columns: [
    {
      title: 'å¤§ä¸šæ€',
      dataIndex: 'bigBusinessType',
      slots: { default: 'featureColumn' }  // ä½¿ç”¨ featureColumn æ’æ§½
    },
    {
      title: 'çŠ¶æ€',
      dataIndex: 'status',
      slots: { default: 'featureColumn' }  // ä½¿ç”¨ featureColumn æ’æ§½
    }
  ]
}
```

**åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼š**

```vue
<!-- âœ… æ­£ç¡®æ–¹å¼ - ä½¿ç”¨ featureColumn æ’æ§½ -->
<template #featureColumn="{ row, column }">
  <template v-if="column.field == 'bigBusinessType'">
    <dict-tag :options="bigBusinessTypeDict" :value="row.bigBusinessType" />
  </template>

  <template v-if="column.field == 'status'">
    <dict-tag :options="statusDict" :value="row.status" />
  </template>
</template>
```

**ä½¿ç”¨åœºæ™¯ï¼š**

- å­—å…¸å€¼æ˜¾ç¤ºï¼šä½¿ç”¨ `dict-tag` ç»„ä»¶æ˜¾ç¤ºå­—å…¸æ ‡ç­¾
- è‡ªå®šä¹‰æ ¼å¼åŒ–ï¼šå¤æ‚çš„æ•°æ®æ ¼å¼åŒ–æ˜¾ç¤º
- æ¡ä»¶æ¸²æŸ“ï¼šæ ¹æ®æ•°æ®å€¼æ˜¾ç¤ºä¸åŒçš„å†…å®¹æˆ–æ ·å¼

#### æ“ä½œåˆ—é…ç½®

æ“ä½œåˆ—æ˜¯ç‰¹æ®Šçš„åˆ—ï¼Œç”¨äºæ˜¾ç¤ºè¡Œå†…æ“ä½œæŒ‰é’®ã€‚

```javascript
{
  /**
   * title: æ“ä½œåˆ—æ ‡é¢˜
   * @type {string}
   * @default 'æ“ä½œ'
   * @description æ“ä½œåˆ—çš„æ ‡é¢˜ï¼Œé€šå¸¸å›ºå®šä¸º 'æ“ä½œ'
   */
  title: 'æ“ä½œ',

  /**
   * key: æ“ä½œåˆ—æ ‡è¯†
   * @type {string}
   * @default 'active'
   * @description æ“ä½œåˆ—çš„å”¯ä¸€æ ‡è¯†ï¼Œå¿…é¡»è®¾ç½®ä¸º 'active'
   * @note è¿™æ˜¯æ“ä½œåˆ—çš„ç‰¹æ®Šæ ‡è¯†ï¼Œä¸èƒ½ä½¿ç”¨ dataIndex
   */
  key: 'active',

  /**
   * width: æ“ä½œåˆ—å®½åº¦
   * @type {number}
   * @default 165
   * @description âš ï¸ æ“ä½œåˆ—å›ºå®šå®½åº¦å€¼ä¸º 165pxï¼Œä¸è¦éšæ„ä¿®æ”¹
   */
  width: 165,

  /**
   * fixed: å›ºå®šä½ç½®
   * @type {'right'}
   * @description æ“ä½œåˆ—é€šå¸¸å›ºå®šåœ¨å³ä¾§
   */
  fixed: 'right',

  /**
   * align: å¯¹é½æ–¹å¼
   * @type {'left'}
   * @default 'left'
   * @description æ“ä½œåˆ—å†…å®¹å·¦å¯¹é½
   */
  align: 'left',

  /**
   * slots: æ“ä½œåˆ—æ’æ§½
   * @type {Object}
   * @description æ“ä½œåˆ—å¿…é¡»ä½¿ç”¨ 'active' æ’æ§½
   */
  slots: { default: 'active' },

  /**
   * commands: æ“ä½œæŒ‰é’®é…ç½®æ•°ç»„
   * @type {Array<Object>}
   * @description å®šä¹‰è¯¥è¡Œçš„æ“ä½œæŒ‰é’®
   * @see [è¡Œå†…æŒ‰é’®é…ç½®è¯¦è§£](#è¡Œå†…æŒ‰é’®é…ç½®è¯¦è§£)
   */
  commands: [
    {
      /**
       * id: æƒé™æ ‡è¯†
       * @type {string}
       * @description æŒ‰é’®çš„æƒé™æ ‡è¯†ï¼Œæ ¼å¼ï¼š'æ¨¡å—:åŠŸèƒ½:æ“ä½œ'
       * @example 'baseInfo:settings:edit'
       * @note ç”¨äºæƒé™æ§åˆ¶ï¼Œæ— æƒé™çš„æŒ‰é’®ä¸ä¼šæ˜¾ç¤ºï¼›ä¸é…ç½®idé»˜è®¤æœ‰æƒé™
       */
      id: 'baseInfo:settings:edit',

      /**
       * btnFun: å¯¹åº” tableMethods ä¸­çš„æ–¹æ³•å
       * @type {string}
       * @description ç‚¹å‡»æŒ‰é’®æ—¶è°ƒç”¨çš„ tableMethods ä¸­çš„æ–¹æ³•å
       * @example 'edit'ã€'delete'ã€'view'
       * @note å¿…é¡»åœ¨ tableMethods ä¸­å®šä¹‰å¯¹åº”çš„æ–¹æ³•
       */
      btnFun: 'edit',

      /**
       * name: æŒ‰é’®æ˜¾ç¤ºæ–‡å­—
       * @type {string}
       * @description æŒ‰é’®ä¸Šæ˜¾ç¤ºçš„æ–‡å­—
       * @example 'ç¼–è¾‘'ã€'åˆ é™¤'ã€'æŸ¥çœ‹'
       */
      name: 'ç¼–è¾‘',

      /**
       * icon: æŒ‰é’®å›¾æ ‡
       * @type {string}
       * @default ''
       * @description âš ï¸ è¡Œå†…æŒ‰é’® icon å›ºå®šè®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²
       * @note è¡Œå†…æŒ‰é’®ä¸éœ€è¦é…ç½®å›¾æ ‡ï¼Œé¡¶éƒ¨æŒ‰é’®å¿…é¡»é…ç½®å›¾æ ‡
       */
      icon: '',

      /**
       * type: æŒ‰é’®ç±»å‹
       * @type {'primary' | 'danger'}
       * @default 'primary'
       * @description æŒ‰é’®çš„æ ·å¼ç±»å‹
       * @example 'primary' - ä¸»è¦æŒ‰é’®ï¼ˆç¼–è¾‘ã€æŸ¥çœ‹ç­‰ï¼Œé»˜è®¤ï¼‰
       * @example 'danger' - å±é™©æŒ‰é’®ï¼ˆåˆ é™¤æŒ‰é’®ï¼‰
       * @note âš ï¸ åªæœ‰åˆ é™¤æŒ‰é’®è®¾ç½®ä¸º 'danger'ï¼Œå…¶ä»–å…¨éƒ¨æ˜¯ 'primary'ï¼›é¡¶éƒ¨æŒ‰é’®ä¸­ï¼šæ–°å¢æŒ‰é’®å¿…é¡»æ˜¯'primary'ï¼Œå…¶ä½™ä¸è®¾ç½®type;è¡Œå†…æŒ‰é’®å…¨éƒ¨è®¾ç½® 'primary'ã€åˆ é™¤æŒ‰é’® 'danger'ã€‘
       */
      type: 'primary'
    },
    {
      id: 'baseInfo:settings:delete',
      btnFun: 'delete',
      name: 'åˆ é™¤',
      icon: '',
      type: 'danger'  // âš ï¸ åˆ é™¤æŒ‰é’®å¿…é¡»æ˜¯ 'danger'
    }
  ]
}
```

#### åˆ—é…ç½®å®Œæ•´ç¤ºä¾‹

```javascript
columns: [
  // åºå·åˆ—ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼Œæ— éœ€é…ç½®ï¼‰
  // é€‰æ‹©åˆ—ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼Œæ— éœ€é…ç½®ï¼Œé™¤é hideSelection: trueï¼‰

  // æ™®é€šæ•°æ®åˆ— - æ–‡æœ¬å·¦å¯¹é½
  {
    title: 'é¡¹ç›®åç§°',
    dataIndex: 'projectName',
    minWidth: 180,
    resizable: true,
    showOverflow: true,
    align: 'left'
  },

  // æ™®é€šæ•°æ®åˆ— - çŠ¶æ€å±…ä¸­å¯¹é½ï¼ˆä½¿ç”¨æ’æ§½æ˜¾ç¤ºå­—å…¸æ ‡ç­¾ï¼‰
  {
    title: 'çŠ¶æ€',
    dataIndex: 'status',
    width: 100,
    align: 'center',
    slots: { default: 'featureColumn' }
  },

  // æ™®é€šæ•°æ®åˆ— - é‡‘é¢å³å¯¹é½ï¼ˆä½¿ç”¨ formatter æ ¼å¼åŒ–ï¼‰
  // âš ï¸ é‡‘é¢æ ¼å¼åŒ–è§„èŒƒè¯·å‚è€ƒ [å¼€å‘è§„èŒƒ - é‡‘é¢æ ¼å¼åŒ–è§„èŒƒ](#1-é‡‘é¢æ ¼å¼åŒ–è§„èŒƒ)
  {
    title: 'é‡‘é¢(å…ƒ)',
    dataIndex: 'amount',
    width: 150,
    align: 'right',
    formatter: ({ cellValue }) => {
      return formatAmount(cellValue)
    }
  },

  // æ“ä½œåˆ—
  {
    title: 'æ“ä½œ',
    key: 'active',
    width: 165,
    fixed: 'right',
    align: 'left',
    slots: { default: 'active' },
    commands: [
      {
        id: 'module:function:edit',
        btnFun: 'edit',
        name: 'ç¼–è¾‘',
        icon: '',
        type: 'primary'
      },
      {
        id: 'module:function:delete',
        btnFun: 'delete',
        name: 'åˆ é™¤',
        icon: '',
        type: 'danger'
      }
    ]
  }
]
```

### æŸ¥è¯¢æ¡ä»¶é…ç½®è¯¦è§£ (queryCondition)

æŸ¥è¯¢æ¡ä»¶é…ç½®æ˜¯ `queryCondition` æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ ä»£è¡¨ä¸€ä¸ªæŸ¥è¯¢è¡¨å•æ§ä»¶ã€‚

#### é€šç”¨å±æ€§

æ¯ä¸ªæŸ¥è¯¢æ¡ä»¶é…ç½®é¡¹éƒ½åŒ…å«ä»¥ä¸‹é€šç”¨å±æ€§ï¼š

```javascript
{
  /**
   * key: æŸ¥è¯¢å‚æ•°å­—æ®µå
   * @type {string}
   * @description å¯¹åº”åç«¯æ¥å£æŸ¥è¯¢å‚æ•°çš„å­—æ®µå
   * @example 'projectName'ã€'serviceType'ã€'status'
   * @note å¿…é¡»ä¸åç«¯æ¥å£å‚æ•°åå®Œå…¨ä¸€è‡´
   */
  key: 'projectName',

  /**
   * label: æ ‡ç­¾æ–‡å­—
   * @type {string}
   * @description æŸ¥è¯¢æ¡ä»¶å‰çš„æ ‡ç­¾æ–‡å­—
   * @example 'é¡¹ç›®'ã€'æœåŠ¡ç±»å‹'ã€'çŠ¶æ€'
   */
  label: 'é¡¹ç›®',

  /**
   * controls: æ§ä»¶ç±»å‹
   * @type {string}
   * @description Element Plus ç»„ä»¶åç§°
   * @example 'ElInput' - è¾“å…¥æ¡†
   * @example 'ElSelect' - ä¸‹æ‹‰é€‰æ‹©
   * @example 'ElDatePicker' - æ—¥æœŸé€‰æ‹©å™¨
   * @example 'ElTreeSelect' - æ ‘å½¢é€‰æ‹©å™¨
   * @note å¿…é¡»æ˜¯ Element Plus ç»„ä»¶åï¼Œä¸”å·²å…¨å±€æ³¨å†Œ
   */
  controls: 'ElInput',

  /**
   * props: ç»„ä»¶å±æ€§
   * @type {Object}
   * @description ä¼ é€’ç»™ Element Plus ç»„ä»¶çš„å±æ€§
   * @example { placeholder: 'è¯·è¾“å…¥', clearable: true }
   * @note æ‰€æœ‰ Element Plus ç»„ä»¶æ”¯æŒçš„å±æ€§éƒ½å¯ä»¥åœ¨è¿™é‡Œé…ç½®
   */
  props: {
    placeholder: 'è¯·è¾“å…¥é¡¹ç›®åç§°',
    clearable: true,
    maxlength: 50
  }
}
```

#### 1. è¾“å…¥æ¡† (ElInput)

ç”¨äºæ–‡æœ¬æœç´¢ã€å…³é”®è¯æŸ¥è¯¢ç­‰åœºæ™¯ã€‚

```javascript
{
  key: 'projectName',
  label: 'é¡¹ç›®åç§°',
  controls: 'ElInput',
  props: {
    placeholder: 'è¯·è¾“å…¥é¡¹ç›®åç§°',
    clearable: true,        // âš ï¸ å¿…é¡»é…ç½® clearable
    maxlength: 50          // æœ€å¤§è¾“å…¥é•¿åº¦
  }
}
```

#### 2. å­—å…¸ä¸‹æ‹‰é€‰æ‹© (ElSelect + dictKey)

ä½¿ç”¨å­—å…¸æ•°æ®å¡«å……ä¸‹æ‹‰é€‰é¡¹ï¼Œæ”¯æŒå•é€‰å’Œå¤šé€‰ã€‚

**å•é€‰å­—å…¸ï¼š**

```javascript
{
  key: 'serviceType',
  label: 'æœåŠ¡ç±»å‹',
  controls: 'ElSelect',
  props: {
    placeholder: 'è¯·é€‰æ‹©æœåŠ¡ç±»å‹',
    clearable: true,       // âš ï¸ å¿…é¡»é…ç½® clearable
    filterable: true       // âš ï¸ å¿…é¡»é…ç½® filterableï¼ˆæ”¯æŒæœç´¢ï¼‰
  },
  /**
   * dictKey: å­—å…¸ç±»å‹æ ‡è¯†
   * @type {string}
   * @description å­—å…¸ç±»å‹æ ‡è¯†ï¼Œå¯¹åº”åç«¯å­—å…¸æ¥å£çš„å­—å…¸ç±»å‹
   * @example 'service_type'ã€'service_status'
   * @note å­—å…¸æ•°æ®ä¼šè‡ªåŠ¨ä»å­—å…¸æ¥å£è·å–å¹¶è½¬æ¢ä¸ºé€‰é¡¹æ ¼å¼
   */
  dictKey: 'service_type'
}
```

**å¤šé€‰å­—å…¸ï¼š**

```javascript
{
  key: 'status',
  label: 'çŠ¶æ€',
  controls: 'ElSelect',
  props: {
    placeholder: 'è¯·é€‰æ‹©çŠ¶æ€',
    clearable: true,       // âš ï¸ å¿…é¡»é…ç½® clearable
    filterable: true,     // âš ï¸ å¿…é¡»é…ç½® filterable
    multiple: true         // å¤šé€‰æ¨¡å¼
  },
  dictKey: 'service_status'
}
```

#### 3. è‡ªå®šä¹‰ä¸‹æ‹‰åˆ—è¡¨ (ElSelect + options)

ä¸ä½¿ç”¨å­—å…¸ï¼Œæ‰‹åŠ¨å®šä¹‰é€‰é¡¹åˆ—è¡¨ã€‚

```javascript
{
  key: 'userType',
  label: 'ç”¨æˆ·ç±»å‹',
  controls: 'ElSelect',
  props: {
    placeholder: 'è¯·é€‰æ‹©ç”¨æˆ·ç±»å‹',
    clearable: true,
    filterable: true
  },
  /**
   * options: é€‰é¡¹æ•°ç»„
   * @type {Array<{label: string, value: any}>}
   * @description æ‰‹åŠ¨å®šä¹‰çš„é€‰é¡¹åˆ—è¡¨
   * @example [{ label: 'ç®¡ç†å‘˜', value: 'admin' }, { label: 'æ™®é€šç”¨æˆ·', value: 'user' }]
   * @note ä¸èƒ½ä¸ dictKey åŒæ—¶ä½¿ç”¨
   */
  options: [
    { label: 'ç®¡ç†å‘˜', value: 'admin' },
    { label: 'æ™®é€šç”¨æˆ·', value: 'user' },
    { label: 'è®¿å®¢', value: 'guest' }
  ]
}
```

#### 4. æ—¥æœŸèŒƒå›´æŸ¥è¯¢ (ElDatePicker)

ç”¨äºæ—¥æœŸèŒƒå›´ç­›é€‰ï¼Œæ”¯æŒå•æ—¥æœŸå’Œæ—¥æœŸèŒƒå›´ã€‚

**æ—¥æœŸèŒƒå›´ï¼ˆå¸¸ç”¨ï¼‰ï¼š**

```javascript
{
  key: 'configTime',
  label: 'é…ç½®æ—¶é—´',
  controls: 'ElDatePicker',
  props: {
    type: 'daterange',              // æ—¥æœŸèŒƒå›´ç±»å‹
    placeholder: 'è¯·é€‰æ‹©æ—¶é—´èŒƒå›´',
    clearable: true,                // âš ï¸ å¿…é¡»é…ç½® clearable
    'start-placeholder': 'å¼€å§‹æ—¥æœŸ',
    'end-placeholder': 'ç»“æŸæ—¥æœŸ'
  },
  /**
   * filterStartField: å¼€å§‹æ—¶é—´å­—æ®µå
   * @type {string}
   * @description æ—¥æœŸèŒƒå›´æŸ¥è¯¢æ—¶ï¼Œå¼€å§‹æ—¶é—´å¯¹åº”çš„åç«¯å‚æ•°å­—æ®µå
   * @example 'configStartTime'ã€'startTime'ã€'beginDate'
   * @note æ—¥æœŸèŒƒå›´æŸ¥è¯¢å¿…é¡»é…ç½®æ­¤å­—æ®µ
   */
  filterStartField: 'configStartTime',

  /**
   * filterEndField: ç»“æŸæ—¶é—´å­—æ®µå
   * @type {string}
   * @description æ—¥æœŸèŒƒå›´æŸ¥è¯¢æ—¶ï¼Œç»“æŸæ—¶é—´å¯¹åº”çš„åç«¯å‚æ•°å­—æ®µå
   * @example 'configEndTime'ã€'endTime'ã€'endDate'
   * @note æ—¥æœŸèŒƒå›´æŸ¥è¯¢å¿…é¡»é…ç½®æ­¤å­—æ®µ
   */
  filterEndField: 'configEndTime'
}
```

**å•æ—¥æœŸæŸ¥è¯¢ï¼š**

```javascript
{
  key: 'createDate',
  label: 'åˆ›å»ºæ—¥æœŸ',
  controls: 'ElDatePicker',
  props: {
    type: 'date',                   // å•æ—¥æœŸç±»å‹
    placeholder: 'è¯·é€‰æ‹©æ—¥æœŸ',
    clearable: true
  }
}
```

**æ—¥æœŸæ—¶é—´èŒƒå›´ï¼š**

```javascript
{
  key: 'submitTime',
  label: 'æäº¤æ—¶é—´',
  controls: 'ElDatePicker',
  props: {
    type: 'datetimerange',          // æ—¥æœŸæ—¶é—´èŒƒå›´ç±»å‹
    placeholder: 'è¯·é€‰æ‹©æ—¶é—´èŒƒå›´',
    clearable: true,
    'start-placeholder': 'å¼€å§‹æ—¶é—´',
    'end-placeholder': 'ç»“æŸæ—¶é—´'
  },
  filterStartField: 'submitStartTime',
  filterEndField: 'submitEndTime'
}
```

#### 5. è‡ªå®šä¹‰æ’æ§½ (formSlot)

å½“éœ€è¦å¤æ‚çš„è”åŠ¨æŸ¥è¯¢æˆ–è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œä½¿ç”¨æ’æ§½ã€‚

**é…ç½®æ–¹å¼ï¼š**

```javascript
{
  key: 'projectIdList',
  label: 'é¡¹ç›®åˆ†æœŸ',
  controls: 'ElSelect',  // å ä½æ§ä»¶ï¼Œå®é™…ä½¿ç”¨æ’æ§½æ¸²æŸ“
  props: {
    placeholder: 'è¯·é€‰æ‹©é¡¹ç›®åˆ†æœŸ'
  }
  // âš ï¸ ä¸éœ€è¦é…ç½® dictKey æˆ– optionsï¼Œä½¿ç”¨æ’æ§½è‡ªå®šä¹‰æ¸²æŸ“
}
```

**æ¨¡æ¿ä¸­ä½¿ç”¨ï¼š**

```vue
<TableCommon :list-data="listData" :methods="tableMethods">
  <!-- formSlot æ’æ§½ï¼šè‡ªå®šä¹‰æŸ¥è¯¢æ¡ä»¶ -->
  <template #formSlot="{ data, field }">
    <template v-if="field === 'projectIdList'">
      <!-- ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶ï¼Œå¦‚é¡¹ç›®åˆ†æœŸé€‰æ‹©ç»„ä»¶ -->
      <ProjectInstallmentSearch
        v-model="data[field]"
        v-bind="{ field, data }"
      />
    </template>
  </template>
</TableCommon>
```

**æ’æ§½å‚æ•°è¯´æ˜ï¼š**

- `data`: å½“å‰æŸ¥è¯¢è¡¨å•çš„æ•°æ®å¯¹è±¡ï¼ˆå“åº”å¼ï¼‰
- `field`: å½“å‰å­—æ®µçš„ key å€¼

**ä½¿ç”¨åœºæ™¯ï¼š**

- âœ… é¡¹ç›®åˆ†æœŸé€‰æ‹©ï¼ˆéœ€è¦é¡¹ç›®å½±å“åˆ†æœŸçš„çº§è”å…³ç³»ï¼‰
- âœ… å¤æ‚çš„è”åŠ¨æŸ¥è¯¢
- âœ… è‡ªå®šä¹‰ç»„ä»¶ï¼ˆå¦‚æ•°å­—èŒƒå›´è¾“å…¥ç­‰ï¼‰

âš ï¸ **ä½¿ç”¨åŸåˆ™ï¼šèƒ½ä¸ä½¿ç”¨æ’æ§½å°±å°½é‡ä¸ä½¿ç”¨æ’æ§½ï¼Œé™¤éæŸäº›å®šåˆ¶åŒ–åŠŸèƒ½ï¼ˆå¦‚é¡¹ç›®åˆ†æœŸçš„ç­›é€‰æ¡ä»¶éœ€è¦è”åŠ¨çš„æƒ…å†µï¼‰æ‰ä½¿ç”¨æ’æ§½ã€‚**

#### 6. å…¶ä»–æŸ¥è¯¢æ§ä»¶

**æ ‘å½¢é€‰æ‹©å™¨ (ElTreeSelect)ï¼š**

```javascript
{
  key: 'departmentId',
  label: 'éƒ¨é—¨',
  controls: 'ElTreeSelect',
  props: {
    placeholder: 'è¯·é€‰æ‹©éƒ¨é—¨',
    clearable: true,
    filterable: true,      // âš ï¸ å¿…é¡»é…ç½® filterable
    multiple: false,       // æ˜¯å¦å¤šé€‰
    data: treeData         // æ ‘å½¢æ•°æ®
  }
}
```

**æ•°å­—è¾“å…¥æ¡† (ElInputNumber)ï¼š**

> **âš ï¸ è¯¦ç»†é…ç½®è§„èŒƒ**ï¼šel-input-number çš„å®Œæ•´ä½¿ç”¨è§„èŒƒè¯·å‚è€ƒ [vue-development-patterns.mdc](./vue-development-patterns.mdc) ä¸­çš„"el-input-number ä½¿ç”¨è§„èŒƒ"ç« èŠ‚ã€‚

```javascript
{
  key: 'minAmount',
  label: 'æœ€å°é‡‘é¢',
  controls: 'ElInputNumber',
  props: {
    placeholder: 'è¯·è¾“å…¥æœ€å°é‡‘é¢',
    clearable: true,
    min: 0,
    max: 999999999,
    precision: 2,
    step: 0.01,
    align: 'left',
    'controls-position': 'right'
  }
}
```

**é…ç½®è¯´æ˜**ï¼š
- é‡‘é¢å­—æ®µï¼š`min: 0, max: 999999999, precision: 2, step: 0.01`
- ç™¾åˆ†æ¯”å­—æ®µï¼š`min: 0, max: 100, precision: 2, step: 0.01`
- æ•´æ•°å­—æ®µï¼š`step: 1`ï¼Œæ—  precision å±æ€§
- å¿…é¡»é…ç½®ï¼š`align: 'left'`ã€`controls-position: 'right'`

#### 7. ç‰¹æ®Šé…ç½®

**æ•°ç»„å­—æ®µè½¬å­—ç¬¦ä¸²ï¼ˆisJoinï¼‰ï¼š**

å½“éœ€è¦å°†æ•°ç»„ç±»å‹çš„æŸ¥è¯¢å‚æ•°è½¬æ¢ä¸ºé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²æ—¶ï¼š

```javascript
{
  key: 'projectStages',
  label: 'é¡¹ç›®åˆ†æœŸ',
  controls: 'ElSelect',
  props: {
    placeholder: 'è¯·é€‰æ‹©é¡¹ç›®åˆ†æœŸ',
    clearable: true,
    filterable: true,
    multiple: true
  },
  /**
   * isJoin: æ˜¯å¦è½¬æ¢ä¸ºå­—ç¬¦ä¸²
   * @type {boolean}
   * @description è®¾ç½®ä¸º true æ—¶ï¼Œæ•°ç»„å€¼ä¼šè½¬æ¢ä¸ºé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²
   * @example true - ['id1', 'id2'] -> 'id1,id2'
   */
  isJoin: true,

  /**
   * joinKey: è½¬æ¢åçš„å­—æ®µå
   * @type {string}
   * @description è½¬æ¢åçš„å‚æ•°å­—æ®µå
   * @example 'projectStageIds' - åç«¯æ¥æ”¶ 'id1,id2' æ ¼å¼çš„å­—ç¬¦ä¸²
   */
  joinKey: 'projectStageIds'
}
```

#### æŸ¥è¯¢æ¡ä»¶é…ç½®å®Œæ•´ç¤ºä¾‹

```javascript
queryCondition: [
  // 1. æ–‡æœ¬è¾“å…¥æ¡†
  {
    key: 'projectName',
    label: 'é¡¹ç›®åç§°',
    controls: 'ElInput',
    props: {
      placeholder: 'è¯·è¾“å…¥é¡¹ç›®åç§°',
      clearable: true,
      maxlength: 50
    }
  },

  // 2. å­—å…¸ä¸‹æ‹‰ï¼ˆå•é€‰ï¼‰
  {
    key: 'serviceType',
    label: 'æœåŠ¡ç±»å‹',
    controls: 'ElSelect',
    props: {
      placeholder: 'è¯·é€‰æ‹©æœåŠ¡ç±»å‹',
      clearable: true,
      filterable: true
    },
    dictKey: 'service_type'
  },

  // 3. å­—å…¸ä¸‹æ‹‰ï¼ˆå¤šé€‰ï¼‰
  {
    key: 'status',
    label: 'çŠ¶æ€',
    controls: 'ElSelect',
    props: {
      placeholder: 'è¯·é€‰æ‹©çŠ¶æ€',
      clearable: true,
      filterable: true,
      multiple: true
    },
    dictKey: 'service_status'
  },

  // 4. è‡ªå®šä¹‰ä¸‹æ‹‰
  {
    key: 'userType',
    label: 'ç”¨æˆ·ç±»å‹',
    controls: 'ElSelect',
    props: {
      placeholder: 'è¯·é€‰æ‹©ç”¨æˆ·ç±»å‹',
      clearable: true,
      filterable: true
    },
    options: [
      { label: 'ç®¡ç†å‘˜', value: 'admin' },
      { label: 'æ™®é€šç”¨æˆ·', value: 'user' }
    ]
  },

  // 5. æ—¥æœŸèŒƒå›´
  {
    key: 'configTime',
    label: 'é…ç½®æ—¶é—´',
    controls: 'ElDatePicker',
    props: {
      type: 'daterange',
      placeholder: 'è¯·é€‰æ‹©æ—¶é—´èŒƒå›´',
      clearable: true,
      'start-placeholder': 'å¼€å§‹æ—¥æœŸ',
      'end-placeholder': 'ç»“æŸæ—¥æœŸ'
    },
    filterStartField: 'configStartTime',
    filterEndField: 'configEndTime'
  },

  // 6. è‡ªå®šä¹‰æ’æ§½ï¼ˆé¡¹ç›®åˆ†æœŸï¼‰
  {
    key: 'projectIdList',
    label: 'é¡¹ç›®åˆ†æœŸ',
    controls: 'ElSelect',
    props: {
      placeholder: 'è¯·é€‰æ‹©é¡¹ç›®åˆ†æœŸ'
    }
  }
]
```

### å­—å…¸é…ç½®è§„èŒƒ

âš ï¸ **é‡è¦ï¼šå­—å…¸ä½¿ç”¨è§„èŒƒè¯·å‚è€ƒ [å¼€å‘è§„èŒƒ - å­—å…¸ä½¿ç”¨è§„èŒƒ](#4-å­—å…¸ä½¿ç”¨è§„èŒƒ)ã€‚**

**åœ¨ queryCondition ä¸­ä½¿ç”¨å­—å…¸**ï¼š

```javascript
// listData.js
{
  key: 'serviceType',
  label: 'æœåŠ¡ç±»å‹',
  controls: 'ElSelect',
  props: {
    placeholder: 'è¯·é€‰æ‹©æœåŠ¡ç±»å‹',
    clearable: true,
    filterable: true
  },
  dictKey: 'service_type'  // å­—å…¸ç±»å‹æ ‡è¯†
}
```

**åœ¨ index.vue ä¸­ä½¿ç”¨å­—å…¸**ï¼ˆå‚è€ƒ [å¼€å‘è§„èŒƒ - å­—å…¸ä½¿ç”¨è§„èŒƒ](#4-å­—å…¸ä½¿ç”¨è§„èŒƒ)ï¼‰ï¼š

```vue
<template>
  <TableCommon
    :list-data="listData"
    :methods="tableMethods"
    :dict-store="dictStore"
  >
    <template #featureColumn="{ row, column }">
      <template v-if="column.field === 'status'">
        <dict-tag :options="statusDict" :value="row.status" />
      </template>
    </template>
  </TableCommon>
</template>

<script setup>
import { reactive, getCurrentInstance } from 'vue'

const { proxy } = getCurrentInstance()
const { serviceTypeDict, statusDict } = proxy.useDict('service_type', 'service_status')

const dictStore = reactive({
  service_type: serviceTypeDict,
  service_status: statusDict
})
</script>
```

## ç»„ä»¶æ’æ§½è¯¦è§£

TableCommon ç»„ä»¶æä¾›äº†å¤šä¸ªæ’æ§½ï¼Œç”¨äºè‡ªå®šä¹‰è¡¨æ ¼å’ŒæŸ¥è¯¢æ¡ä»¶çš„æ¸²æŸ“ã€‚âš ï¸ **ä½¿ç”¨åŸåˆ™ï¼šèƒ½ä¸ä½¿ç”¨æ’æ§½å°±å°½é‡ä¸ä½¿ç”¨æ’æ§½ï¼Œé™¤éæŸäº›å®šåˆ¶åŒ–åŠŸèƒ½æ‰ä½¿ç”¨æ’æ§½ã€‚**

### 1. featureColumn æ’æ§½

**ä½œç”¨**ï¼šè‡ªå®šä¹‰è¡¨æ ¼åˆ—å†…å®¹çš„æ¸²æŸ“ï¼Œä¸»è¦ç”¨äºå­—å…¸æ ‡ç­¾æ˜¾ç¤ºã€çŠ¶æ€æ˜¾ç¤ºç­‰å®šåˆ¶åŒ–åœºæ™¯ã€‚

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… å­—å…¸å€¼è½¬ä¹‰æ˜¾ç¤ºï¼ˆä½¿ç”¨ `dict-tag` ç»„ä»¶ï¼‰
- âœ… çŠ¶æ€æ ‡ç­¾æ˜¾ç¤º
- âœ… å¤æ‚çš„å•å…ƒæ ¼å†…å®¹æ¸²æŸ“
- âŒ ç®€å•çš„æ–‡æœ¬æ ¼å¼åŒ–ï¼ˆåº”ä½¿ç”¨ `formatter`ï¼‰

**é…ç½®æ–¹å¼**ï¼š

åœ¨ `listData.js` çš„ `columns` ä¸­é…ç½®ï¼š

```javascript
{
  title: 'çŠ¶æ€',
  dataIndex: 'status',
  width: 100,
  align: 'center',
  slots: { default: 'featureColumn' }  // å¯ç”¨ featureColumn æ’æ§½
}
```

**æ¨¡æ¿ä¸­ä½¿ç”¨**ï¼š

```vue
<TableCommon :list-data="listData" :methods="tableMethods">
  <!-- featureColumn æ’æ§½ï¼šè‡ªå®šä¹‰åˆ—å†…å®¹æ¸²æŸ“ -->
  <template #featureColumn="{ row, column }">
    <!-- æ ¹æ®åˆ—å­—æ®µååˆ¤æ–­ï¼Œæ¸²æŸ“ä¸åŒçš„å†…å®¹ -->
    <template v-if="column.field === 'status'">
      <dict-tag :options="statusDict" :value="row.status" />
    </template>

    <template v-if="column.field === 'serviceType'">
      <dict-tag :options="serviceTypeDict" :value="row.serviceType" />
    </template>

    <!-- è‡ªå®šä¹‰çŠ¶æ€æ ‡ç­¾ -->
    <template v-if="column.field === 'approvalStatus'">
      <el-tag
        :type="row.approvalStatus === 'Audited' ? 'success' : 'warning'"
      >
        {{ row.approvalStatus === 'Audited' ? 'å·²å®¡æ ¸' : 'å¾…å®¡æ ¸' }}
      </el-tag>
    </template>
  </template>
</TableCommon>
```

**æ’æ§½å‚æ•°è¯´æ˜**ï¼š

- `row`: å½“å‰è¡Œæ•°æ®å¯¹è±¡
- `column`: å½“å‰åˆ—é…ç½®å¯¹è±¡
  - `column.field`: åˆ—çš„å­—æ®µåï¼ˆå¯¹åº” `dataIndex`ï¼‰
  - `column.property`: åˆ—çš„å±æ€§åï¼ˆç­‰åŒäº `field`ï¼‰

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ ç©ºå€¼ä¼šè‡ªåŠ¨æ ¼å¼åŒ–ä¸º `--`ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†
- âš ï¸ ä¼˜å…ˆä½¿ç”¨ `formatter`ï¼Œåªæœ‰å®šåˆ¶åŒ–åŠŸèƒ½æ‰ä½¿ç”¨æ­¤æ’æ§½
- âš ï¸ å¿…é¡»é€šè¿‡ `column.field` æˆ– `column.property` åˆ¤æ–­å½“å‰åˆ—

### 2. formSlot æ’æ§½

**ä½œç”¨**ï¼šè‡ªå®šä¹‰æŸ¥è¯¢æ¡ä»¶è¡¨å•æ§ä»¶çš„æ¸²æŸ“ï¼Œç”¨äºå¤æ‚çš„è”åŠ¨æŸ¥è¯¢æˆ–è‡ªå®šä¹‰ç»„ä»¶ã€‚

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… é¡¹ç›®åˆ†æœŸé€‰æ‹©ï¼ˆéœ€è¦é¡¹ç›®å½±å“åˆ†æœŸçš„çº§è”å…³ç³»ï¼‰
- âœ… å¤æ‚çš„è”åŠ¨æŸ¥è¯¢
- âœ… è‡ªå®šä¹‰ç»„ä»¶ï¼ˆå¦‚æ•°å­—èŒƒå›´è¾“å…¥ç­‰ï¼‰
- âŒ ç®€å•çš„ä¸‹æ‹‰é€‰æ‹©ï¼ˆåº”ä½¿ç”¨å­—å…¸æˆ– optionsï¼‰

**é…ç½®æ–¹å¼**ï¼š

åœ¨ `listData.js` çš„ `queryCondition` ä¸­é…ç½®ï¼š

```javascript
{
  key: 'projectIdList',
  label: 'é¡¹ç›®åˆ†æœŸ',
  controls: 'ElSelect',  // å ä½æ§ä»¶ï¼Œå®é™…ä½¿ç”¨æ’æ§½æ¸²æŸ“
  props: {
    placeholder: 'è¯·é€‰æ‹©é¡¹ç›®åˆ†æœŸ'
  },
  // âš ï¸ ä¸éœ€è¦é…ç½® dictKey æˆ– optionsï¼Œä½¿ç”¨æ’æ§½è‡ªå®šä¹‰æ¸²æŸ“
  slots: { default: 'formSlot' }
}
```

**æ¨¡æ¿ä¸­ä½¿ç”¨**ï¼š

```vue
<TableCommon :list-data="listData" :methods="tableMethods">
  <!-- formSlot æ’æ§½ï¼šè‡ªå®šä¹‰æŸ¥è¯¢æ¡ä»¶ -->
  <template #formSlot="{ data, field }">
    <!-- æ ¹æ®å­—æ®µååˆ¤æ–­ï¼Œæ¸²æŸ“ä¸åŒçš„ç»„ä»¶ -->
    <template v-if="field === 'projectIdList'">
      <!-- ä½¿ç”¨é¡¹ç›®åˆ†æœŸæœç´¢ç»„ä»¶ -->
      <ProjectInstallmentSearch
        v-model="data[field]"
        v-bind="{ field, data }"
      />
    </template>

    <!-- æ•°å­—èŒƒå›´è¾“å…¥ -->
    <template v-if="field === 'amountRange'">
      <NumberRange
        v-model:start="data.amountStart"
        v-model:end="data.amountEnd"
      />
    </template>
  </template>
</TableCommon>
```

**æ’æ§½å‚æ•°è¯´æ˜**ï¼š

- `data`: å½“å‰æŸ¥è¯¢è¡¨å•çš„æ•°æ®å¯¹è±¡ï¼ˆå“åº”å¼ï¼‰ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹ `data[field]` æ¥æ›´æ–°å€¼
- `field`: å½“å‰å­—æ®µçš„ `key` å€¼

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ `data` æ˜¯å“åº”å¼å¯¹è±¡ï¼Œç›´æ¥ä¿®æ”¹ `data[field]` å³å¯æ›´æ–°è¡¨å•å€¼
- âš ï¸ èƒ½ä¸ä½¿ç”¨æ’æ§½å°±å°½é‡ä¸ä½¿ç”¨æ’æ§½ï¼Œé™¤éæŸäº›å®šåˆ¶åŒ–åŠŸèƒ½ï¼ˆå¦‚é¡¹ç›®åˆ†æœŸçš„ç­›é€‰æ¡ä»¶éœ€è¦è”åŠ¨çš„æƒ…å†µï¼‰æ‰ä½¿ç”¨æ’æ§½

### 3. custom-tabs æ’æ§½

**ä½œç”¨**ï¼šåœ¨è¡¨æ ¼é¡¶éƒ¨å·¥å…·æ å·¦ä¾§æ·»åŠ è‡ªå®šä¹‰æ ‡ç­¾é¡µï¼ˆTabsï¼‰ï¼Œç”¨äºåˆ‡æ¢ä¸åŒçš„æ•°æ®è§†å›¾ã€‚

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… å¤š Tab æ•°æ®åˆ‡æ¢ï¼ˆå¦‚ï¼šå…¨éƒ¨ã€å¾…å®¡æ ¸ã€å·²å®¡æ ¸ï¼‰
- âœ… ä¸åŒçŠ¶æ€çš„æ•°æ®å±•ç¤º
- âœ… åˆ†ç±»æ•°æ®å±•ç¤º

**æ¨¡æ¿ä¸­ä½¿ç”¨**ï¼š

```vue
<TableCommon :list-data="listData" :methods="tableMethods">
  <!-- custom-tabs æ’æ§½ï¼šè‡ªå®šä¹‰æ ‡ç­¾é¡µ -->
  <template #custom-tabs>
    <el-tabs v-model="activeTab" @tab-change="handleTabChange">
      <el-tab-pane label="å…¨éƒ¨" name="all" />
      <el-tab-pane label="å¾…å®¡æ ¸" name="pending" />
      <el-tab-pane label="å·²å®¡æ ¸" name="approved" />
    </el-tabs>
  </template>
</TableCommon>

<script setup>
import { ref } from 'vue'

const activeTab = ref('all')

const handleTabChange = (tabName) => {
  // æ ¹æ® Tab åˆ‡æ¢ï¼Œæ›´æ–°æŸ¥è¯¢æ¡ä»¶å¹¶é‡æ–°åŠ è½½æ•°æ®
  tableRef.value?.loadData({ status: tabName })
}
</script>
```

**æ³¨æ„äº‹é¡¹**ï¼š

- æ’æ§½å†…å®¹ä¼šæ˜¾ç¤ºåœ¨å·¥å…·æ å·¦ä¾§
- å½“åŒæ—¶ä½¿ç”¨ `custom-tabs` å’Œ `toolbar-other` æ—¶ï¼Œå¸ƒå±€ä¼šè‡ªåŠ¨è°ƒæ•´

### 4. toolbar-other æ’æ§½

**ä½œç”¨**ï¼šåœ¨è¡¨æ ¼é¡¶éƒ¨å·¥å…·æ ä¸­é—´åŒºåŸŸæ·»åŠ è‡ªå®šä¹‰å†…å®¹ï¼Œå¦‚ç»Ÿè®¡ä¿¡æ¯ã€ç­›é€‰æŒ‰é’®ç­‰ã€‚

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯ï¼ˆå¦‚ï¼šæ€»é‡‘é¢ã€æ€»æ•°é‡ç­‰ï¼‰
- âœ… é¢å¤–çš„ç­›é€‰æŒ‰é’®
- âœ… è‡ªå®šä¹‰å·¥å…·æ å†…å®¹

**æ¨¡æ¿ä¸­ä½¿ç”¨**ï¼š

```vue
<TableCommon :list-data="listData" :methods="tableMethods">
  <!-- toolbar-other æ’æ§½ï¼šè‡ªå®šä¹‰å·¥å…·æ å†…å®¹ -->
  <template #toolbar-other>
    <div class="toolbar-stats">
      <span>æ€»é‡‘é¢ï¼š{{ totalAmount }} å…ƒ</span>
      <span>æ€»æ•°é‡ï¼š{{ totalCount }} æ¡</span>
    </div>
  </template>
</TableCommon>
```

**æ³¨æ„äº‹é¡¹**ï¼š

- æ’æ§½å†…å®¹ä¼šæ˜¾ç¤ºåœ¨å·¥å…·æ ä¸­é—´åŒºåŸŸ
- å½“åŒæ—¶ä½¿ç”¨ `custom-tabs` å’Œ `toolbar-other` æ—¶ï¼Œ`toolbar-other` ä¼šæ’‘æ»¡å‰©ä½™ç©ºé—´

### 5. custom-table æ’æ§½

**ä½œç”¨**ï¼šå®Œå…¨è‡ªå®šä¹‰è¡¨æ ¼æ¸²æŸ“ï¼Œç”¨äºæ›¿æ¢é»˜è®¤çš„ VXE Table è¡¨æ ¼ã€‚

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… éœ€è¦å®Œå…¨è‡ªå®šä¹‰è¡¨æ ¼å¸ƒå±€
- âœ… ä½¿ç”¨å…¶ä»–è¡¨æ ¼ç»„ä»¶ï¼ˆå¦‚ Element Plus Tableï¼‰
- âœ… ç‰¹æ®Šçš„è¡¨æ ¼å±•ç¤ºéœ€æ±‚

**æ¨¡æ¿ä¸­ä½¿ç”¨**ï¼š

```vue
<TableCommon :list-data="listData" :methods="tableMethods">
  <!-- custom-table æ’æ§½ï¼šè‡ªå®šä¹‰è¡¨æ ¼ -->
  <template #custom-table="{ tableData }">
    <el-table :data="tableData" style="width: 100%">
      <el-table-column prop="name" label="å§“å" />
      <el-table-column prop="age" label="å¹´é¾„" />
    </el-table>
  </template>
</TableCommon>
```

**æ’æ§½å‚æ•°è¯´æ˜**ï¼š

- `tableData`: å½“å‰è¡¨æ ¼æ•°æ®æ•°ç»„

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ ä½¿ç”¨æ­¤æ’æ§½åï¼ŒTableCommon çš„è¡¨æ ¼åŠŸèƒ½ï¼ˆåˆ†é¡µã€é€‰æ‹©ç­‰ï¼‰éœ€è¦è‡ªè¡Œå®ç°
- âš ï¸ é™¤éç‰¹æ®Šéœ€æ±‚ï¼Œå¦åˆ™ä¸å»ºè®®ä½¿ç”¨æ­¤æ’æ§½

### 6. nameDefault æ’æ§½

**ä½œç”¨**ï¼šè‡ªå®šä¹‰æ ‘å½¢è¡¨æ ¼ä¸­åç§°åˆ—çš„æ¸²æŸ“ã€‚

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… æ ‘å½¢è¡¨æ ¼ä¸­åç§°åˆ—çš„è‡ªå®šä¹‰æ¸²æŸ“
- âœ… éœ€è¦åœ¨åç§°åˆ—æ·»åŠ å›¾æ ‡ã€æ ‡ç­¾ç­‰

**æ¨¡æ¿ä¸­ä½¿ç”¨**ï¼š

```vue
<TableCommon :list-data="listData" :methods="tableMethods">
  <!-- nameDefault æ’æ§½ï¼šè‡ªå®šä¹‰æ ‘å½¢è¡¨æ ¼åç§°åˆ— -->
  <template #nameDefault="{ row }">
    <el-icon><Folder /></el-icon>
    <span>{{ row.name }}</span>
  </template>
</TableCommon>
```

**æ’æ§½å‚æ•°è¯´æ˜**ï¼š

- `row`: å½“å‰è¡Œæ•°æ®å¯¹è±¡

**æ³¨æ„äº‹é¡¹**ï¼š

- ä»…åœ¨æ ‘å½¢è¡¨æ ¼ï¼ˆ`isTree: true`ï¼‰ä¸­ä½¿ç”¨
- ç”¨äºè‡ªå®šä¹‰åç§°åˆ—çš„æ˜¾ç¤º

### æ’æ§½ä½¿ç”¨åŸåˆ™æ€»ç»“

âš ï¸ **é‡è¦åŸåˆ™ï¼šèƒ½ä¸ä½¿ç”¨æ’æ§½å°±å°½é‡ä¸ä½¿ç”¨æ’æ§½ï¼**

| åœºæ™¯ | æ¨èæ–¹å¼ | ä¸æ¨èæ–¹å¼ |
|------|---------|-----------|
| ç®€å•çš„æ–‡æœ¬æ ¼å¼åŒ– | `formatter` | `featureColumn` æ’æ§½ |
| å­—å…¸å€¼è½¬ä¹‰ | `featureColumn` æ’æ§½ + `dict-tag` | æ‰‹åŠ¨æ ¼å¼åŒ– |
| ç®€å•çš„ä¸‹æ‹‰é€‰æ‹© | `dictKey` æˆ– `options` | `formSlot` æ’æ§½ |
| å¤æ‚çš„è”åŠ¨æŸ¥è¯¢ | `formSlot` æ’æ§½ | å¤šä¸ªç‹¬ç«‹æŸ¥è¯¢æ¡ä»¶ |
| é¡¹ç›®åˆ†æœŸé€‰æ‹© | `formSlot` æ’æ§½ + `ProjectInstallmentSearch` | æ™®é€šä¸‹æ‹‰é€‰æ‹© |

**ä½¿ç”¨ä¼˜å…ˆçº§**ï¼š

1. **ä¼˜å…ˆä½¿ç”¨é…ç½®**ï¼š`formatter`ã€`dictKey`ã€`options` ç­‰é…ç½®æ–¹å¼
2. **å®šåˆ¶åŒ–åŠŸèƒ½ä½¿ç”¨æ’æ§½**ï¼šåªæœ‰é…ç½®æ–¹å¼æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œæ‰ä½¿ç”¨æ’æ§½
3. **é¿å…è¿‡åº¦ä½¿ç”¨æ’æ§½**ï¼šæ’æ§½ä¼šå¢åŠ ä»£ç å¤æ‚åº¦ï¼Œé™ä½å¯ç»´æŠ¤æ€§

## é¡µé¢ç»„ä»¶è§„èŒƒ (index.vue)

### åŸºç¡€æ¨¡æ¿

```vue
<template>
  <div class="page-container">
    <TableCommon
      ref="tableRef"
      :list-data="listData"
      :methods="tableMethods"
      :show-row-btn="showRowBtn"
    >
      <!-- å­—å…¸åˆ—æ’æ§½ -->
      <template #featureColumn="{ row, column }">
        <template v-if="column.property == 'serviceType'">
          <dict-tag :options="serviceTypeDict" :value="row.serviceType" />
        </template>

        <template v-if="column.property == 'status'">
          <dict-tag :options="serviceStatusDict" :value="row.serviceType" />
        </template>
      </template>
    </TableCommon>

    <!-- CRUDæ¨¡æ€æ¡† -->
    <ServiceConfigModal
      v-model="modalVisible"
      :edit-data="editData"
      @success="handleModalSuccess"
    />
  </div>
</template>

<script setup>
import { ref, reactive, getCurrentInstance } from 'vue'
import { ElMessageBox } from 'element-plus'
import { listData } from './listData'
import TableCommon from '@/components/TableCommon/index.vue'
import ServiceConfigModal from './components/modal.vue'
import { useHasPermi } from '@/hooks/useHasPermi'
import { deleteServiceConfig } from '@/api/baseInfo/serviceConfig'

/**
 * batchRemoveFunc æ‰¹é‡åˆ é™¤
 *
 */
import { useTableListFunc } from '@/hooks/useTableListFunc'
const { batchRemoveFunc, removeFunc } = useTableListFunc()
const { proxy } = getCurrentInstance()

// å­—å…¸æ•°æ®
const { serviceTypeDict, serviceStatusDict } = proxy.useDict('service_type','service_status')

// è¡¨æ ¼å¼•ç”¨
const tableRef = ref(null)

// æ¨¡æ€æ¡†æ§åˆ¶
const modalVisible = ref(false)
const editData = ref(null)

const reload = () => {
  tableRef.value?.reload()
}

// è¡¨æ ¼æ“ä½œæ–¹æ³•
const tableMethods = {
  // æ–°å¢
  add: () => {
    editData.value = null
    modalVisible.value = true
  },

  // ç¼–è¾‘
  edit: (row) => {
    editData.value = { ...row }
    modalVisible.value = true
  },

  // æ‰¹é‡åˆ é™¤/æ‰¹é‡å˜æ›´çŠ¶æ€
  muldelete: async (row) => {
    batchRemoveFunc(
      batchInvalidSalePriceAdjustmentConfig,// apiæ¥å£
      reload,// tableçš„é‡ç½®æ–¹æ³•
      'ç¡®è®¤æ‰¹é‡ä½œåºŸè¿™äº›æ•°æ®å—?',// æç¤ºä¿¡æ¯
      tableRef,// è¡¨æ ¼å®ä¾‹
      'salePriceAdjustmentConfigId'// ä¼ é€’ç»™åç«¯çš„idå­—æ®µå
    )
  },
  // è¡Œå†…åˆ é™¤/å•ä¸ªå˜æ›´çŠ¶æ€
  muldelete: async (row) => {
    removeFunc(
      batchInvalidSalePriceAdjustmentConfig,// apiæ¥å£
      { id: row.id },// ä¼ å‚
      reload,// è¡¨æ ¼é‡ç½®æ–¹æ³•
      â€™ç¡®è®¤åˆ é™¤å½“å‰æ•°æ®å—â€˜
      'salePriceAdjustmentConfigId'// ä¼ é€’ç»™åç«¯çš„idå­—æ®µå
    )
  },

  // æŸ¥çœ‹è¯¦æƒ…
  view: (row) => {
    editData.value = { ...row }
    modalVisible.value = true
  }
}

// è¡ŒæŒ‰é’®æ˜¾ç¤ºæ§åˆ¶
const showRowBtn = (btn, row) => {
  const bthStatsu = {
    show: true,
    disabled: false
  }
  return bthStatsu
}

// æ¨¡æ€æ¡†æˆåŠŸå›è°ƒ
const handleModalSuccess = () => {
  tableRef.value?.reload()
}

// æœç´¢äº‹ä»¶
const handleSearch = (query) => {
  console.log('æœç´¢å‚æ•°:', query)
}

// é‡ç½®äº‹ä»¶
const handleReset = () => {
  console.log('é‡ç½®æœç´¢')
}
</script>

<style lang="scss" scoped>
.page-container {
  display: flex;
  flex: 1;
  flex-direction: column;
  height: 100%;
}
</style>
```

## æƒé™æ§åˆ¶è§„èŒƒ

### æƒé™æ ‡è¯†è§„èŒƒ

```javascript
// æƒé™æ ‡è¯†æ ¼å¼: æ¨¡å—:åŠŸèƒ½:æ“ä½œ
const permissions = {
  // ç”¨æˆ·ç®¡ç†æ¨¡å—
  'user:list:view',      // æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨
  'user:list:add',        // æ–°å¢ç”¨æˆ·
  'user:list:edit',       // ç¼–è¾‘ç”¨æˆ·
  'user:list:delete',     // åˆ é™¤ç”¨æˆ·

  // è®¢å•ç®¡ç†æ¨¡å—
  'order:list:view',      // æŸ¥çœ‹è®¢å•åˆ—è¡¨
  'order:list:export',     // å¯¼å‡ºè®¢å•
  'order:list:audit'      // å®¡æ ¸è®¢å•
}
```

### æŒ‰é’®æƒé™é…ç½®

```javascript
// é¡¶éƒ¨æŒ‰é’®æƒé™

commands: [
  {
    id: 'user:list:add', // æƒé™æ ‡è¯†
    btnFun: 'add',
    name: 'æ–°å¢ç”¨æˆ·',
    icon: 'Plus',
    type: 'primary' // **æ³¨æ„ï¼šé…ç½®é¡¹ä¸­typeçš„é…ç½®ï¼Œåªæœ‰åˆ é™¤æŒ‰é’®æ˜¯danger,åªæœ‰æ–°å¢æŒ‰é’®æ˜¯primaryï¼Œå…¶ä»–æŒ‰é’®æ˜¯ç©ºå­—ç¬¦ä¸²**
  }
]

// è¡Œæ“ä½œæŒ‰é’®æƒé™
commands: [
  {
    id: 'user:list:edit', // æƒé™æ ‡è¯†
    btnFun: 'edit',
    name: 'ç¼–è¾‘',
    icon: '',
    type: 'primary'
  },
  {
    id: 'user:list:delete', // æƒé™æ ‡è¯†
    btnFun: 'delete',
    name: 'åˆ é™¤',
    icon: '',
    type: 'danger'
  }
]
```

## æ•°æ®æ ¼å¼è§„èŒƒ

### API å“åº”æ ¼å¼

```javascript
// åˆ†é¡µæ•°æ®æ ¼å¼
{
  code: 200,
  msg: 'success',
  data: {
    total: 100,           // æ€»è®°å½•æ•°
    records: [            // æ•°æ®åˆ—è¡¨
      {
        id: 1,
        name: 'ç”¨æˆ·å',
        status: 1,
        createTime: '2023-01-01 00:00:00'
      }
    ]
  }
}

// éåˆ†é¡µæ•°æ®æ ¼å¼
{
  code: 0,
  msg: 'success',
  data: [
    {
      id: 1,
      name: 'ç”¨æˆ·å',
      status: 1
    }
  ]
}
```

### æŸ¥è¯¢å‚æ•°æ ¼å¼

```javascript
// GET è¯·æ±‚å‚æ•°
{
  page: 1,                // å½“å‰é¡µ
  limit: 20,             // æ¯é¡µæ•°é‡
  name: 'æœç´¢å…³é”®è¯',
  status: 1,
  startTime: '2023-01-01',
  endTime: '2023-12-31'
}

// POST è¯·æ±‚å‚æ•°
{
  page: 1,
  limit: 20,
  name: 'æœç´¢å…³é”®è¯',
  status: 1,
  startTime: '2023-01-01',
  endTime: '2023-12-31'
}
```

## ç»„ä»¶æš´éœ²çš„æ–¹æ³•å’Œå±æ€§

TableCommon ç»„ä»¶é€šè¿‡ `defineExpose` æš´éœ²äº†å¤šä¸ªæ–¹æ³•å’Œå±æ€§ï¼Œå¯ä»¥é€šè¿‡ `ref` å¼•ç”¨è®¿é—®ã€‚

### ä½¿ç”¨æ–¹å¼

```vue
<template>
  <TableCommon ref="tableRef" :list-data="listData" :methods="tableMethods" />
</template>

<script setup>
import { ref } from 'vue'

const tableRef = ref(null)

// è®¿é—®ç»„ä»¶æš´éœ²çš„æ–¹æ³•å’Œå±æ€§
const handleAction = () => {
  // ä½¿ç”¨ tableRef.value.xxx è®¿é—®æš´éœ²çš„æ–¹æ³•å’Œå±æ€§
  tableRef.value.reload()
}
</script>
```

### æš´éœ²çš„æ–¹æ³•å’Œå±æ€§è¯¦è§£

#### 1. gridRef

**ç±»å‹**ï¼š`Ref<ComponentPublicInstance>`

**è¯´æ˜**ï¼šVXE Table è¡¨æ ¼ç»„ä»¶çš„å®ä¾‹å¼•ç”¨ï¼Œç”¨äºç›´æ¥æ“ä½œ VXE Table çš„ APIã€‚

**ä½¿ç”¨åœºæ™¯**ï¼š
- éœ€è¦è°ƒç”¨ VXE Table çš„åŸç”Ÿæ–¹æ³•
- éœ€è¦è®¿é—® VXE Table çš„å†…éƒ¨çŠ¶æ€
- éœ€è¦æ“ä½œè¡¨æ ¼çš„é€‰ä¸­ã€ç¼–è¾‘ç­‰çŠ¶æ€

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```javascript
// è·å– VXE Table å®ä¾‹
const vxeTable = tableRef.value.gridRef

// è°ƒç”¨ VXE Table çš„æ–¹æ³•
vxeTable.setCheckboxRow([row], true)  // è®¾ç½®è¡Œé€‰ä¸­
vxeTable.clearCheckboxRow()            // æ¸…ç©ºæ‰€æœ‰é€‰ä¸­
vxeTable.setEditRow(row, true)         // è®¾ç½®è¡Œç¼–è¾‘çŠ¶æ€
vxeTable.getTableData()                // è·å–è¡¨æ ¼æ•°æ®
```

**æ³¨æ„äº‹é¡¹**ï¼š
- âš ï¸ é™¤éç‰¹æ®Šéœ€æ±‚ï¼Œå¦åˆ™ä¸å»ºè®®ç›´æ¥æ“ä½œ `gridRef`
- âš ï¸ ä¼˜å…ˆä½¿ç”¨ TableCommon æš´éœ²çš„é«˜çº§æ–¹æ³•

#### 2. selectRecords

**ç±»å‹**ï¼š`ComputedRef<Array<Object> | Object | null>`

**è¯´æ˜**ï¼šå½“å‰é€‰ä¸­çš„è¡Œæ•°æ®ï¼Œæ ¹æ® `extendParams.type` è¿”å›æ•°ç»„ï¼ˆå¤šé€‰ï¼‰æˆ–å¯¹è±¡ï¼ˆå•é€‰ï¼‰ã€‚

**ä½¿ç”¨åœºæ™¯**ï¼š
- æ‰¹é‡æ“ä½œï¼ˆåˆ é™¤ã€å¯¼å‡ºç­‰ï¼‰
- è·å–é€‰ä¸­æ•°æ®è¿›è¡Œå¤„ç†
- åˆ¤æ–­æ˜¯å¦æœ‰é€‰ä¸­æ•°æ®

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```javascript
// å¤šé€‰æ¨¡å¼ï¼ˆextendParams.type === 'checkbox'ï¼‰
const selectedRows = tableRef.value.selectRecords
// è¿”å›ï¼šArray<Object>ï¼Œå¦‚ï¼š[{ id: 1, name: 'å¼ ä¸‰' }, { id: 2, name: 'æå››' }]

// å•é€‰æ¨¡å¼ï¼ˆextendParams.type === 'radio'ï¼‰
const selectedRow = tableRef.value.selectRecords
// è¿”å›ï¼šObject | nullï¼Œå¦‚ï¼š{ id: 1, name: 'å¼ ä¸‰' } æˆ– null

// åˆ¤æ–­æ˜¯å¦æœ‰é€‰ä¸­æ•°æ®
if (tableRef.value.selectRecords?.length > 0) {
  // æœ‰é€‰ä¸­æ•°æ®
}

// è·å–é€‰ä¸­æ•°æ®çš„ ID æ•°ç»„
const selectedIds = tableRef.value.selectRecords.map(row => row.id)
```

**æ³¨æ„äº‹é¡¹**ï¼š
- âš ï¸ å¤šé€‰æ¨¡å¼è¿”å›æ•°ç»„ï¼Œå•é€‰æ¨¡å¼è¿”å›å¯¹è±¡æˆ– null
- âš ï¸ å¦‚æœ `hideSelection: true`ï¼Œåˆ™å§‹ç»ˆè¿”å›ç©ºæ•°ç»„ `[]`

#### 3. beforeSearchParams

**ç±»å‹**ï¼š`Ref<Object>`

**è¯´æ˜**ï¼šä¸Šä¸€æ¬¡æŸ¥è¯¢æ—¶çš„å®Œæ•´æŸ¥è¯¢å‚æ•°å¯¹è±¡ï¼ŒåŒ…å«åˆ†é¡µã€ç­›é€‰æ¡ä»¶ç­‰æ‰€æœ‰å‚æ•°ã€‚

**ä½¿ç”¨åœºæ™¯**ï¼š
- **æ•°æ®å¯¼å‡º**ï¼šå¯¼å‡ºå½“å‰ç­›é€‰æ¡ä»¶ä¸‹çš„æ•°æ®
- **å‚æ•°ä¼ é€’**ï¼šå°†æŸ¥è¯¢å‚æ•°ä¼ é€’ç»™å…¶ä»–é¡µé¢æˆ–ç»„ä»¶
- **å‚æ•°å›æ˜¾**ï¼šæ¢å¤ä¹‹å‰çš„æŸ¥è¯¢æ¡ä»¶

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```javascript
// å¯¼å‡ºå½“å‰ç­›é€‰çš„æ•°æ®
const handleExport = () => {
  exportExcel({
    api: exportApi,
    params: {
      ...tableRef.value.beforeSearchParams  // ä½¿ç”¨ä¸Šæ¬¡æŸ¥è¯¢çš„å‚æ•°
    },
    fileName: `æ•°æ®å¯¼å‡º_${new Date().getTime()}`,
    fileExt: 'xlsx'
  })
}

// è·å–æŸ¥è¯¢å‚æ•°
const getQueryParams = () => {
  return tableRef.value.beforeSearchParams
  // è¿”å›ï¼š{ page: 1, limit: 20, projectName: 'xxx', status: '1', ... }
}
```

**å‚æ•°ç»“æ„**ï¼š

```javascript
{
  page: 1,                    // å½“å‰é¡µç 
  limit: 20,                  // æ¯é¡µæ•°é‡
  projectName: 'xxx',         // æŸ¥è¯¢æ¡ä»¶å­—æ®µ
  status: '1',                // æŸ¥è¯¢æ¡ä»¶å­—æ®µ
  configStartTime: '2024-01-01 00:00:00',  // æ—¥æœŸèŒƒå›´å¼€å§‹æ—¶é—´
  configEndTime: '2024-12-31 23:59:59',    // æ—¥æœŸèŒƒå›´ç»“æŸæ—¶é—´
  // ... å…¶ä»–æŸ¥è¯¢æ¡ä»¶
}
```

**æ³¨æ„äº‹é¡¹**ï¼š
- âš ï¸ æ­¤å‚æ•°æ˜¯**ä¸Šä¸€æ¬¡æŸ¥è¯¢æ—¶**çš„å‚æ•°ï¼Œä¸æ˜¯å®æ—¶å‚æ•°
- âš ï¸ å¦‚æœéœ€è¦å®æ—¶æŸ¥è¯¢å‚æ•°ï¼Œä½¿ç”¨ `realtimeQueryParams`

#### 4. realtimeQueryParams

**ç±»å‹**ï¼š`ComputedRef<Object>`

**è¯´æ˜**ï¼šå®æ—¶å“åº”å¼æŸ¥è¯¢å‚æ•°å¯¹è±¡ï¼Œç›‘å¬è¡¨å•æ•°æ®ã€åˆ†é¡µå‚æ•°ç­‰å˜åŒ–ï¼Œå®æ—¶è¿”å›å®Œæ•´çš„æŸ¥è¯¢å‚æ•°ã€‚

**ä½¿ç”¨åœºæ™¯**ï¼š
- éœ€è¦å®æ—¶è·å–å½“å‰æŸ¥è¯¢å‚æ•°
- ç›‘å¬æŸ¥è¯¢å‚æ•°å˜åŒ–
- åŠ¨æ€æ„å»ºæŸ¥è¯¢å‚æ•°

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```javascript
import { watch } from 'vue'

// ç›‘å¬æŸ¥è¯¢å‚æ•°å˜åŒ–
watch(
  () => tableRef.value.realtimeQueryParams,
  (newParams) => {
    console.log('æŸ¥è¯¢å‚æ•°å˜åŒ–:', newParams)
    // æ‰§è¡Œç›¸å…³é€»è¾‘
  },
  { deep: true }
)

// è·å–å®æ—¶æŸ¥è¯¢å‚æ•°
const currentParams = tableRef.value.realtimeQueryParams
```

**ä¸ beforeSearchParams çš„åŒºåˆ«**ï¼š

| å±æ€§ | ç±»å‹ | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|------|------|------|---------|
| `beforeSearchParams` | `Ref<Object>` | ä¸Šä¸€æ¬¡æŸ¥è¯¢çš„å‚æ•°ï¼ˆé™æ€ï¼‰ | å¯¼å‡ºæ•°æ®ã€å‚æ•°ä¼ é€’ |
| `realtimeQueryParams` | `ComputedRef<Object>` | å®æ—¶æŸ¥è¯¢å‚æ•°ï¼ˆå“åº”å¼ï¼‰ | ç›‘å¬å‚æ•°å˜åŒ–ã€åŠ¨æ€æ„å»ºå‚æ•° |

**æ³¨æ„äº‹é¡¹**ï¼š
- âš ï¸ `realtimeQueryParams` æ˜¯è®¡ç®—å±æ€§ï¼Œä¼šè‡ªåŠ¨è¿½è¸ªä¾èµ–å˜åŒ–
- âš ï¸ å¯¼å‡ºæ•°æ®æ—¶å»ºè®®ä½¿ç”¨ `beforeSearchParams`ï¼ˆå·²æŸ¥è¯¢è¿‡çš„å‚æ•°ï¼‰

#### 5. reload

**ç±»å‹**ï¼š`Function`

**è¯´æ˜**ï¼šåˆ·æ–°è¡¨æ ¼æ•°æ®ï¼Œé‡æ–°åŠ è½½å½“å‰é¡µçš„æ•°æ®ã€‚

**ä½¿ç”¨åœºæ™¯**ï¼š
- æ•°æ®æ“ä½œååˆ·æ–°è¡¨æ ¼ï¼ˆæ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤åï¼‰
- æ‰‹åŠ¨åˆ·æ–°æ•°æ®
- é‡ç½®æŸ¥è¯¢æ¡ä»¶ååˆ·æ–°

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```javascript
// åˆ·æ–°è¡¨æ ¼æ•°æ®
const reload = () => {
  tableRef.value?.reload()
}

// åœ¨æ“ä½œæˆåŠŸååˆ·æ–°
const handleSave = async () => {
  await saveApi(formData)
  proxy.$modal.msgSuccess('ä¿å­˜æˆåŠŸ')
  tableRef.value?.reload()  // ä¿å­˜æˆåŠŸååˆ·æ–°è¡¨æ ¼
}

// åœ¨åˆ é™¤æˆåŠŸååˆ·æ–°
const handleDelete = async (id) => {
  await deleteApi(id)
  proxy.$modal.msgSuccess('åˆ é™¤æˆåŠŸ')
  tableRef.value?.reload()  // åˆ é™¤æˆåŠŸååˆ·æ–°è¡¨æ ¼
}
```

**æ³¨æ„äº‹é¡¹**ï¼š
- âš ï¸ `reload()` ä¼šä¿æŒå½“å‰çš„æŸ¥è¯¢æ¡ä»¶å’Œåˆ†é¡µçŠ¶æ€
- âš ï¸ å¦‚æœéœ€è¦é‡ç½®æŸ¥è¯¢æ¡ä»¶ï¼Œå…ˆè°ƒç”¨è¡¨å•é‡ç½®ï¼Œå†è°ƒç”¨ `reload()`

#### 6. loadData

**ç±»å‹**ï¼š`Function(formData?: Object)`

**è¯´æ˜**ï¼šåŠ è½½è¡¨æ ¼æ•°æ®ï¼Œå¯ä»¥ä¼ å…¥é¢å¤–çš„æŸ¥è¯¢å‚æ•°ã€‚

**å‚æ•°è¯´æ˜**ï¼š

- `formData` (å¯é€‰): é¢å¤–çš„æŸ¥è¯¢å‚æ•°å¯¹è±¡ï¼Œä¼šä¸å½“å‰æŸ¥è¯¢æ¡ä»¶åˆå¹¶

**ä½¿ç”¨åœºæ™¯**ï¼š
- åŠ¨æ€æ›´æ–°æŸ¥è¯¢æ¡ä»¶å¹¶åŠ è½½æ•°æ®
- Tab åˆ‡æ¢æ—¶åŠ è½½ä¸åŒæ•°æ®
- å¤–éƒ¨è§¦å‘æ•°æ®åŠ è½½

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```javascript
// åŠ è½½æ•°æ®ï¼ˆä½¿ç”¨å½“å‰æŸ¥è¯¢æ¡ä»¶ï¼‰
tableRef.value?.loadData()

// åŠ è½½æ•°æ®ï¼ˆä¼ å…¥é¢å¤–å‚æ•°ï¼‰
tableRef.value?.loadData({
  status: 'pending',      // é¢å¤–çš„æŸ¥è¯¢æ¡ä»¶
  projectId: '123'
})

// Tab åˆ‡æ¢æ—¶åŠ è½½æ•°æ®
const handleTabChange = (tabName) => {
  tableRef.value?.loadData({ status: tabName })
}

// å¤–éƒ¨è§¦å‘åŠ è½½
const refreshWithParams = (params) => {
  tableRef.value?.loadData(params)
}
```

**æ³¨æ„äº‹é¡¹**ï¼š
- âš ï¸ `loadData()` ä¼šåˆå¹¶ä¼ å…¥çš„å‚æ•°å’Œå½“å‰æŸ¥è¯¢æ¡ä»¶
- âš ï¸ ä¼ å…¥çš„å‚æ•°ä¼˜å…ˆçº§é«˜äºå½“å‰æŸ¥è¯¢æ¡ä»¶
- âš ï¸ å¦‚æœ `api.disableFirst: true`ï¼Œé¦–æ¬¡éœ€è¦æ‰‹åŠ¨è°ƒç”¨ `loadData()`

#### 7. changeEditable

**ç±»å‹**ï¼š`Function(isEditable: boolean, row: Object)`

**è¯´æ˜**ï¼šåˆ‡æ¢è¡¨æ ¼è¡Œçš„ç¼–è¾‘çŠ¶æ€ï¼Œç”¨äºè¡Œå†…ç¼–è¾‘åŠŸèƒ½ã€‚

**å‚æ•°è¯´æ˜**ï¼š

- `isEditable`: æ˜¯å¦å¯ç¼–è¾‘ï¼Œ`true` ä¸ºç¼–è¾‘çŠ¶æ€ï¼Œ`false` ä¸ºå–æ¶ˆç¼–è¾‘
- `row`: è¦åˆ‡æ¢ç¼–è¾‘çŠ¶æ€çš„è¡Œæ•°æ®å¯¹è±¡

**ä½¿ç”¨åœºæ™¯**ï¼š
- è¡Œå†…ç¼–è¾‘åŠŸèƒ½
- åˆ‡æ¢è¡Œçš„ç¼–è¾‘/æŸ¥çœ‹æ¨¡å¼

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```javascript
// å¼€å¯è¡Œç¼–è¾‘
const startEdit = (row) => {
  tableRef.value?.changeEditable(true, row)
}

// å–æ¶ˆè¡Œç¼–è¾‘
const cancelEdit = (row) => {
  tableRef.value?.changeEditable(false, row)
}

// åœ¨æŒ‰é’®ç‚¹å‡»æ—¶åˆ‡æ¢ç¼–è¾‘çŠ¶æ€
const handleEditClick = (row) => {
  if (row._originalData?.isEditing) {
    // å½“å‰æ˜¯ç¼–è¾‘çŠ¶æ€ï¼Œå–æ¶ˆç¼–è¾‘
    tableRef.value?.changeEditable(false, row)
  } else {
    // å½“å‰ä¸æ˜¯ç¼–è¾‘çŠ¶æ€ï¼Œå¼€å¯ç¼–è¾‘
    tableRef.value?.changeEditable(true, row)
  }
}
```

**æ³¨æ„äº‹é¡¹**ï¼š
- âš ï¸ è¡Œå†…ç¼–è¾‘åŠŸèƒ½éœ€è¦é…åˆ VXE Table çš„ç¼–è¾‘é…ç½®ä½¿ç”¨
- âš ï¸ ç¼–è¾‘çŠ¶æ€ä¼šä¿å­˜åœ¨ `row._originalData` ä¸­
    params: {
      ...tableRef.value.beforeSearchParams  // ä½¿ç”¨ä¸Šæ¬¡æŸ¥è¯¢çš„å‚æ•°
    },
    fileName: `æ•°æ®å¯¼å‡º_${new Date().getTime()}`,
    fileExt: 'xlsx'
  })
}

// æ‰¹é‡æ“ä½œ
const handleBatchAction = () => {
  const selectedRows = tableRef.value.selectRecords
  if (!selectedRows || selectedRows.length === 0) {
    proxy.$modal.msgError('è¯·é€‰æ‹©è¦æ“ä½œçš„æ•°æ®')
    return
  }
  
  const ids = selectedRows.map(row => row.id)
  // æ‰§è¡Œæ‰¹é‡æ“ä½œ
  console.log('é€‰ä¸­çš„ID:', ids)
}

// è¡¨æ ¼æ“ä½œæ–¹æ³•
const tableMethods = {
  // æ–°å¢
  add: () => {
    // æ–°å¢é€»è¾‘
  },
  
  // ç¼–è¾‘
  edit: (row) => {
    // ç¼–è¾‘é€»è¾‘
  },
  
  // å¯¼å‡º
  export: handleExport
}
</script>
```

### æ–¹æ³•è°ƒç”¨æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æç¤º**ï¼š

1. **ä½¿ç”¨å¯é€‰é“¾æ“ä½œç¬¦**ï¼š`tableRef.value?.reload()` é¿å…ç»„ä»¶æœªæŒ‚è½½æ—¶æŠ¥é”™
2. **å¼‚æ­¥æ“ä½œååˆ·æ–°**ï¼šæ•°æ®æ“ä½œï¼ˆæ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤ï¼‰æˆåŠŸåï¼Œè®°å¾—è°ƒç”¨ `reload()` åˆ·æ–°è¡¨æ ¼
3. **å¯¼å‡ºä½¿ç”¨ beforeSearchParams**ï¼šå¯¼å‡ºæ•°æ®æ—¶ä½¿ç”¨ `beforeSearchParams`ï¼Œè€Œä¸æ˜¯ `realtimeQueryParams`
4. **é€‰ä¸­æ•°æ®åˆ¤ç©º**ï¼šä½¿ç”¨ `selectRecords` æ—¶ï¼Œæ³¨æ„åˆ¤æ–­æ˜¯å¦ä¸ºç©º

## å•é€‰å¤šé€‰é…ç½®

TableCommon ç»„ä»¶æ”¯æŒå•é€‰æ¡†å’Œå¤šé€‰æ¡†ä¸¤ç§é€‰æ‹©æ¨¡å¼ï¼Œé€šè¿‡ `extendParams` å±æ€§é…ç½®ã€‚

### extendParams å±æ€§è¯´æ˜

`extendParams` æ˜¯ä¼ é€’ç»™ TableCommon ç»„ä»¶çš„ propsï¼Œç”¨äºé…ç½®æ‰©å±•å‚æ•°ã€‚

```vue
<template>
  <TableCommon
    ref="tableRef"
    :list-data="listData"
    :methods="tableMethods"
    :extend-params="extendParams"
  />
</template>

<script setup>
import { reactive } from 'vue'

// extendParams é…ç½®
const extendParams = reactive({
  /**
   * type: é€‰æ‹©æ¨¡å¼
   * @type {'checkbox' | 'radio'}
   * @default 'checkbox'
   * @description è¡¨æ ¼é€‰æ‹©æ¡†çš„ç±»å‹
   * @example 'checkbox' - å¤šé€‰æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
   * @example 'radio' - å•é€‰æ¨¡å¼
   */
  type: 'checkbox',

  /**
   * query: ä¸å¯é‡ç½®çš„æŸ¥è¯¢æ¡ä»¶
   * @type {Object}
   * @default {}
   * @description é¢å¤–çš„æŸ¥è¯¢æ¡ä»¶ï¼Œè¿™äº›æ¡ä»¶ä¸ä¼šè¢«é‡ç½®æŒ‰é’®æ¸…é™¤
   * @example { projectId: '123', status: 'active' }
   * @note ä¼˜å…ˆçº§é«˜äºè¡¨å•æŸ¥è¯¢æ¡ä»¶
   */
  query: {}
})
</script>
```

### 1. å¤šé€‰æ¨¡å¼ (checkbox)

**é…ç½®æ–¹å¼**ï¼š

```vue
<template>
  <TableCommon
    ref="tableRef"
    :list-data="listData"
    :methods="tableMethods"
    :extend-params="{ type: 'checkbox' }"
  />
</template>
```

**ç‰¹ç‚¹**ï¼š
- âœ… æ”¯æŒåŒæ—¶é€‰æ‹©å¤šè¡Œæ•°æ®
- âœ… æ˜¾ç¤ºå¤é€‰æ¡†ï¼ˆcheckboxï¼‰
- âœ… å¯ä»¥å…¨é€‰/å–æ¶ˆå…¨é€‰
- âœ… `selectRecords` è¿”å›æ•°ç»„æ ¼å¼

**è·å–é€‰ä¸­æ•°æ®**ï¼š

```javascript
// å¤šé€‰æ¨¡å¼ï¼šselectRecords è¿”å›æ•°ç»„
const selectedRows = tableRef.value.selectRecords
// è¿”å›ï¼šArray<Object>
// ç¤ºä¾‹ï¼š[{ id: 1, name: 'å¼ ä¸‰' }, { id: 2, name: 'æå››' }]

// åˆ¤æ–­æ˜¯å¦æœ‰é€‰ä¸­æ•°æ®
if (selectedRows && selectedRows.length > 0) {
  console.log('å·²é€‰æ‹©', selectedRows.length, 'æ¡æ•°æ®')
  
  // è·å–é€‰ä¸­æ•°æ®çš„ ID æ•°ç»„
  const selectedIds = selectedRows.map(row => row.id)
  // ç¤ºä¾‹ï¼š[1, 2, 3]
}

// æ‰¹é‡æ“ä½œç¤ºä¾‹
const handleBatchDelete = () => {
  const selectedRows = tableRef.value.selectRecords
  if (!selectedRows || selectedRows.length === 0) {
    proxy.$modal.msgError('è¯·é€‰æ‹©è¦åˆ é™¤çš„æ•°æ®')
    return
  }
  
  const ids = selectedRows.map(row => row.id)
  batchDeleteApi(ids).then(() => {
    proxy.$modal.msgSuccess('åˆ é™¤æˆåŠŸ')
    tableRef.value?.reload()
  })
}
```

**ç‚¹å‡»è¡Œé€‰ä¸­**ï¼š

åœ¨å¤šé€‰æ¨¡å¼ä¸‹ï¼Œç‚¹å‡»è¡¨æ ¼è¡Œä¼šè‡ªåŠ¨åˆ‡æ¢è¯¥è¡Œçš„é€‰ä¸­çŠ¶æ€ï¼š
- å¦‚æœè¡Œå·²é€‰ä¸­ï¼Œç‚¹å‡»åå–æ¶ˆé€‰ä¸­
- å¦‚æœè¡Œæœªé€‰ä¸­ï¼Œç‚¹å‡»åé€‰ä¸­

### 2. å•é€‰æ¨¡å¼ (radio)

**é…ç½®æ–¹å¼**ï¼š

```vue
<template>
  <TableCommon
    ref="tableRef"
    :list-data="listData"
    :methods="tableMethods"
    :extend-params="{ type: 'radio' }"
  />
</template>
```

**ç‰¹ç‚¹**ï¼š
- âœ… åªèƒ½é€‰æ‹©ä¸€è¡Œæ•°æ®
- âœ… æ˜¾ç¤ºå•é€‰æ¡†ï¼ˆradioï¼‰
- âœ… é€‰æ‹©æ–°è¡Œæ—¶ï¼Œè‡ªåŠ¨å–æ¶ˆä¹‹å‰é€‰ä¸­çš„è¡Œ
- âœ… `selectRecords` è¿”å›å¯¹è±¡æˆ– null

**è·å–é€‰ä¸­æ•°æ®**ï¼š

```javascript
// å•é€‰æ¨¡å¼ï¼šselectRecords è¿”å›å¯¹è±¡æˆ– null
const selectedRow = tableRef.value.selectRecords
// è¿”å›ï¼šObject | null
// ç¤ºä¾‹ï¼š{ id: 1, name: 'å¼ ä¸‰' } æˆ– null

// åˆ¤æ–­æ˜¯å¦æœ‰é€‰ä¸­æ•°æ®
if (selectedRow) {
  console.log('å·²é€‰æ‹©:', selectedRow.name)
  
  // è·å–é€‰ä¸­æ•°æ®çš„ ID
  const selectedId = selectedRow.id
  // ç¤ºä¾‹ï¼š1
}

// å•æ¡æ“ä½œç¤ºä¾‹
const handleView = () => {
  const selectedRow = tableRef.value.selectRecords
  if (!selectedRow) {
    proxy.$modal.msgError('è¯·é€‰æ‹©è¦æŸ¥çœ‹çš„æ•°æ®')
    return
  }
  
  viewDetail(selectedRow.id)
}
```

**ç‚¹å‡»è¡Œé€‰ä¸­**ï¼š

åœ¨å•é€‰æ¨¡å¼ä¸‹ï¼Œç‚¹å‡»è¡¨æ ¼è¡Œä¼šé€‰ä¸­è¯¥è¡Œï¼Œå¹¶è‡ªåŠ¨å–æ¶ˆä¹‹å‰é€‰ä¸­çš„è¡Œã€‚

### 3. éšè—é€‰æ‹©åˆ—

å¦‚æœä¸éœ€è¦é€‰æ‹©åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡ `listData.hideSelection` éšè—é€‰æ‹©åˆ—ï¼š

```javascript
// listData.js
export const listData = {
  hideSelection: true,  // éšè—é€‰æ‹©åˆ—
  // ... å…¶ä»–é…ç½®
}
```

**æ•ˆæœ**ï¼š
- ä¸æ˜¾ç¤ºé€‰æ‹©æ¡†åˆ—
- `selectRecords` å§‹ç»ˆè¿”å›ç©ºæ•°ç»„ `[]`
- æ— æ³•é€šè¿‡ç‚¹å‡»è¡Œé€‰ä¸­æ•°æ®

### 4. ä¸å¯é‡ç½®çš„æŸ¥è¯¢æ¡ä»¶

é€šè¿‡ `extendParams.query` é…ç½®ä¸å¯é‡ç½®çš„æŸ¥è¯¢æ¡ä»¶ï¼Œè¿™äº›æ¡ä»¶ä¸ä¼šè¢«é‡ç½®æŒ‰é’®æ¸…é™¤ã€‚

**ä½¿ç”¨åœºæ™¯**ï¼š
- ä»å…¶ä»–é¡µé¢è·³è½¬è¿‡æ¥ï¼Œéœ€è¦ä¿æŒæŸäº›æŸ¥è¯¢æ¡ä»¶
- æ ¹æ®ç”¨æˆ·æƒé™åŠ¨æ€æ·»åŠ æŸ¥è¯¢æ¡ä»¶
- éœ€è¦æ°¸ä¹…ä¿ç•™çš„æŸ¥è¯¢æ¡ä»¶

**é…ç½®æ–¹å¼**ï¼š

```vue
<template>
  <TableCommon
    ref="tableRef"
    :list-data="listData"
    :methods="tableMethods"
    :extend-params="{
      type: 'checkbox',
      query: {
        projectId: route.query.projectId,  // ä»è·¯ç”±å‚æ•°è·å–
        status: 'active'                    // å›ºå®šæ¡ä»¶
      }
    }"
  />
</template>

<script setup>
import { useRoute } from 'vue-router'

const route = useRoute()

// æˆ–è€…ä½¿ç”¨å“åº”å¼å¯¹è±¡
const extendParams = reactive({
  type: 'checkbox',
  query: {
    projectId: computed(() => route.query.projectId),
    status: 'active'
  }
})
</script>
```

**æ³¨æ„äº‹é¡¹**ï¼š
- âš ï¸ `extendParams.query` ä¸­çš„æ¡ä»¶ä¼˜å…ˆçº§é«˜äºè¡¨å•æŸ¥è¯¢æ¡ä»¶
- âš ï¸ é‡ç½®æŒ‰é’®ä¸ä¼šæ¸…é™¤ `extendParams.query` ä¸­çš„æ¡ä»¶
- âš ï¸ è¿™äº›æ¡ä»¶ä¼šå§‹ç»ˆåŒ…å«åœ¨æŸ¥è¯¢å‚æ•°ä¸­

### 5. å®Œæ•´é…ç½®ç¤ºä¾‹

**å¤šé€‰æ¨¡å¼ + ä¸å¯é‡ç½®æŸ¥è¯¢æ¡ä»¶**ï¼š

```vue
<template>
  <TableCommon
    ref="tableRef"
    :list-data="listData"
    :methods="tableMethods"
    :extend-params="extendParams"
  />
</template>

<script setup>
import { reactive, computed } from 'vue'
import { useRoute } from 'vue-router'

const route = useRoute()

// å¤šé€‰æ¨¡å¼é…ç½®
const extendParams = reactive({
  type: 'checkbox',  // å¤šé€‰æ¨¡å¼
  query: {
    // ä»è·¯ç”±å‚æ•°è·å–é¡¹ç›®IDï¼Œä½œä¸ºä¸å¯é‡ç½®çš„æŸ¥è¯¢æ¡ä»¶
    projectId: computed(() => route.query.projectId),
    // å›ºå®šæŸ¥è¯¢æ¡ä»¶
    status: 'active'
  }
})

// æ‰¹é‡æ“ä½œ
const handleBatchAction = () => {
  const selectedRows = tableRef.value.selectRecords
  if (!selectedRows || selectedRows.length === 0) {
    proxy.$modal.msgError('è¯·é€‰æ‹©è¦æ“ä½œçš„æ•°æ®')
    return
  }
  
  const ids = selectedRows.map(row => row.id)
  // æ‰§è¡Œæ‰¹é‡æ“ä½œ
  console.log('é€‰ä¸­çš„ID:', ids)
}
</script>
```

**å•é€‰æ¨¡å¼**ï¼š

```vue
<template>
  <TableCommon
    ref="tableRef"
    :list-data="listData"
    :methods="tableMethods"
    :extend-params="{ type: 'radio' }"
  />
</template>

<script setup>
// å•æ¡æ“ä½œ
const handleSingleAction = () => {
  const selectedRow = tableRef.value.selectRecords
  if (!selectedRow) {
    proxy.$modal.msgError('è¯·é€‰æ‹©ä¸€æ¡æ•°æ®')
    return
  }
  
  // æ‰§è¡Œå•æ¡æ“ä½œ
  console.log('é€‰ä¸­çš„æ•°æ®:', selectedRow)
}
</script>
```

### é€‰æ‹©æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§ | å¤šé€‰æ¨¡å¼ (checkbox) | å•é€‰æ¨¡å¼ (radio) |
|------|-------------------|-----------------|
| **é…ç½®** | `type: 'checkbox'` | `type: 'radio'` |
| **é»˜è®¤å€¼** | âœ… æ˜¯ï¼ˆé»˜è®¤ï¼‰ | âŒ å¦ |
| **é€‰æ‹©æ•°é‡** | å¤šè¡Œ | å•è¡Œ |
| **é€‰æ‹©æ¡†ç±»å‹** | å¤é€‰æ¡† | å•é€‰æ¡† |
| **selectRecords è¿”å›** | `Array<Object>` | `Object \| null` |
| **å…¨é€‰åŠŸèƒ½** | âœ… æ”¯æŒ | âŒ ä¸æ”¯æŒ |
| **ä½¿ç”¨åœºæ™¯** | æ‰¹é‡æ“ä½œï¼ˆåˆ é™¤ã€å¯¼å‡ºç­‰ï¼‰ | å•æ¡æ“ä½œï¼ˆæŸ¥çœ‹ã€ç¼–è¾‘ç­‰ï¼‰ |

### æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æç¤º**ï¼š

1. **é»˜è®¤å¤šé€‰æ¨¡å¼**ï¼šå¦‚æœä¸é…ç½® `extendParams.type`ï¼Œé»˜è®¤ä½¿ç”¨å¤šé€‰æ¨¡å¼ï¼ˆcheckboxï¼‰
2. **é€‰ä¸­æ•°æ®åˆ¤ç©º**ï¼šä½¿ç”¨ `selectRecords` æ—¶ï¼Œæ³¨æ„åˆ¤æ–­æ˜¯å¦ä¸ºç©º
3. **å¤šé€‰è¿”å›æ•°ç»„**ï¼šå¤šé€‰æ¨¡å¼ä¸‹ï¼Œ`selectRecords` è¿”å›æ•°ç»„ï¼Œéœ€è¦åˆ¤æ–­ `length > 0`
4. **å•é€‰è¿”å›å¯¹è±¡**ï¼šå•é€‰æ¨¡å¼ä¸‹ï¼Œ`selectRecords` è¿”å›å¯¹è±¡æˆ– nullï¼Œéœ€è¦åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨
5. **éšè—é€‰æ‹©åˆ—**ï¼šå¦‚æœ `hideSelection: true`ï¼Œ`selectRecords` å§‹ç»ˆè¿”å›ç©ºæ•°ç»„ `[]`

## tableMethods ä¸æŒ‰é’®äº‹ä»¶å…³è”

TableCommon ç»„ä»¶é€šè¿‡ `tableMethods` å¯¹è±¡å°†æŒ‰é’®é…ç½®ä¸äº‹ä»¶å¤„ç†å‡½æ•°å…³è”èµ·æ¥ã€‚æŒ‰é’®é…ç½®ä¸­çš„ `btnFun` å­—æ®µå¯¹åº” `tableMethods` ä¸­çš„æ–¹æ³•åã€‚

### å…³è”æœºåˆ¶

**å·¥ä½œåŸç†**ï¼š

1. **é…ç½®é˜¶æ®µ**ï¼šåœ¨ `listData.js` ä¸­é…ç½®æŒ‰é’®çš„ `btnFun` å­—æ®µ
2. **ç»‘å®šé˜¶æ®µ**ï¼šç»„ä»¶å†…éƒ¨é€šè¿‡ `methods[btn.btnFun]` è®¿é—®å¯¹åº”æ–¹æ³•
3. **è§¦å‘é˜¶æ®µ**ï¼šç‚¹å‡»æŒ‰é’®æ—¶ï¼Œè°ƒç”¨ `tableMethods` ä¸­å¯¹åº”çš„æ–¹æ³•

### 1. é¡¶éƒ¨æŒ‰é’®ï¼ˆcommandsï¼‰å…³è”

**é…ç½®ä½ç½®**ï¼š`listData.js` ä¸­çš„ `commands` æ•°ç»„

**é…ç½®æ–¹å¼**ï¼š

```javascript
// listData.js
export const listData = {
  commands: [
    {
      id: 'module:function:add',      // æƒé™æ ‡è¯†
      btnFun: 'add',                  // âš ï¸ å¯¹åº” tableMethods ä¸­çš„æ–¹æ³•å
      name: 'æ–°å¢',
      icon: 'Plus',
      type: 'primary'                 // âš ï¸ åªæœ‰æ–°å¢æŒ‰é’®æ˜¯ primaryï¼Œå…¶ä»–æ˜¯ç©ºå­—ç¬¦ä¸²
    },
    {
      id: 'module:function:export',
      btnFun: 'export',               // âš ï¸ å¯¹åº” tableMethods ä¸­çš„æ–¹æ³•å
      name: 'å¯¼å‡º',
      icon: 'Download',
      type: ''                        // âš ï¸ éæ–°å¢æŒ‰é’® type ä¸ºç©ºå­—ç¬¦ä¸²
    }
  ]
}
```

**äº‹ä»¶è§¦å‘æ–¹å¼**ï¼š

é¡¶éƒ¨æŒ‰é’®ç‚¹å‡»æ—¶ï¼Œç»„ä»¶å†…éƒ¨æ‰§è¡Œï¼š

```javascript
// ç»„ä»¶å†…éƒ¨é€»è¾‘ï¼ˆRightToolBar.vueï¼‰
@click="methods[btn.btnFun]()"  // ç›´æ¥è°ƒç”¨ï¼Œæ— å‚æ•°
```

**tableMethods å®šä¹‰**ï¼š

```javascript
// index.vue
const tableMethods = {
  /**
   * add: æ–°å¢æ–¹æ³•
   * @description é¡¶éƒ¨æ–°å¢æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨
   * @note æ— å‚æ•°ï¼Œç›´æ¥è°ƒç”¨
   */
  add: () => {
    editData.value = null
    modalVisible.value = true
  },

  /**
   * export: å¯¼å‡ºæ–¹æ³•
   * @description é¡¶éƒ¨å¯¼å‡ºæŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨
   * @note æ— å‚æ•°ï¼Œé€šè¿‡ tableRef.value.selectRecords è·å–é€‰ä¸­æ•°æ®
   */
  export: () => {
    exportExcel({
      api: exportApi,
      params: {
        ...tableRef.value?.beforeSearchParams  // è·å–æŸ¥è¯¢å‚æ•°
      },
      fileName: `æ•°æ®å¯¼å‡º_${new Date().getTime()}`,
      fileExt: 'xlsx'
    })
  },

  /**
   * batchDelete: æ‰¹é‡åˆ é™¤æ–¹æ³•
   * @description é¡¶éƒ¨æ‰¹é‡åˆ é™¤æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨
   * @note æ— å‚æ•°ï¼Œé€šè¿‡ tableRef.value.selectRecords è·å–é€‰ä¸­æ•°æ®
   */
  batchDelete: () => {
    const records = tableRef.value?.selectRecords  // âš ï¸ é€šè¿‡è¡¨æ ¼å®ä¾‹è·å–é€‰ä¸­æ•°æ®
    if (!records || records.length === 0) {
      proxy.$modal.msgError('è¯·é€‰æ‹©è¦åˆ é™¤çš„æ•°æ®')
      return
    }
    
    batchRemoveFunc(
      batchDeleteApi,
      reload,
      'ç¡®è®¤åˆ é™¤è¿™äº›æ•°æ®å—?',
      tableRef,
      'id'
    )
  }
}
```

**å‚æ•°è·å–æ–¹å¼**ï¼š

é¡¶éƒ¨æŒ‰é’®çš„æ–¹æ³•**æ— å‚æ•°**ï¼Œéœ€è¦é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–æ•°æ®ï¼š

1. **è·å–é€‰ä¸­æ•°æ®**ï¼š`tableRef.value.selectRecords`
2. **è·å–æŸ¥è¯¢å‚æ•°**ï¼š`tableRef.value.beforeSearchParams`
3. **è·å–å®æ—¶æŸ¥è¯¢å‚æ•°**ï¼š`tableRef.value.realtimeQueryParams`

**å®Œæ•´ç¤ºä¾‹**ï¼š

```javascript
const tableMethods = {
  // æ–°å¢ - æ— å‚æ•°
  add: () => {
    editData.value = null
    modalVisible.value = true
  },

  // å¯¼å‡º - æ— å‚æ•°ï¼Œé€šè¿‡è¡¨æ ¼å®ä¾‹è·å–æŸ¥è¯¢å‚æ•°
  export: () => {
    exportExcel({
      api: exportApi,
      params: {
        ...tableRef.value?.beforeSearchParams
      },
      fileName: `æ•°æ®å¯¼å‡º_${new Date().getTime()}`,
      fileExt: 'xlsx'
    })
  },

  // æ‰¹é‡åˆ é™¤ - æ— å‚æ•°ï¼Œé€šè¿‡è¡¨æ ¼å®ä¾‹è·å–é€‰ä¸­æ•°æ®
  batchDelete: () => {
    const records = tableRef.value?.selectRecords
    if (!records || records.length === 0) {
      proxy.$modal.msgError('è¯·é€‰æ‹©è¦åˆ é™¤çš„æ•°æ®')
      return
    }
    
    batchRemoveFunc(
      batchDeleteApi,
      reload,
      'ç¡®è®¤åˆ é™¤è¿™äº›æ•°æ®å—?',
      tableRef,
      'id'
    )
  }
}
```

### 2. è¡Œå†…æŒ‰é’®ï¼ˆcolumns.commandsï¼‰å…³è”

**é…ç½®ä½ç½®**ï¼š`listData.js` ä¸­æ“ä½œåˆ—çš„ `commands` æ•°ç»„

**é…ç½®æ–¹å¼**ï¼š

```javascript
// listData.js
export const listData = {
  columns: [
    {
      title: 'æ“ä½œ',
      key: 'active',
      width: 165,
      fixed: 'right',
      slots: { default: 'active' },
      commands: [
        {
          id: 'module:function:edit',
          btnFun: 'edit',              // âš ï¸ å¯¹åº” tableMethods ä¸­çš„æ–¹æ³•å
          name: 'ç¼–è¾‘',
          icon: '',
          type: 'primary'              // âš ï¸ è¡Œå†…æŒ‰é’® type æ˜¯ primaryï¼Œåˆ é™¤æ˜¯ danger
        },
        {
          id: 'module:function:delete',
          btnFun: 'delete',            // âš ï¸ å¯¹åº” tableMethods ä¸­çš„æ–¹æ³•å
          name: 'åˆ é™¤',
          icon: '',
          type: 'danger'               // âš ï¸ åˆ é™¤æŒ‰é’®æ˜¯ danger
        }
      ]
    }
  ]
}
```

**äº‹ä»¶è§¦å‘æ–¹å¼**ï¼š

è¡Œå†…æŒ‰é’®ç‚¹å‡»æ—¶ï¼Œç»„ä»¶å†…éƒ¨æ‰§è¡Œï¼š

```javascript
// ç»„ä»¶å†…éƒ¨é€»è¾‘ï¼ˆTableRowActions.vue -> TableCommon/index.vueï¼‰
const handleButtonClick = (btn, row) => {
  if (props.methods[btn.btnFun]) {
    props.methods[btn.btnFun](row)  // âš ï¸ ä¼ é€’ row å‚æ•°
  }
}
```

**tableMethods å®šä¹‰**ï¼š

```javascript
// index.vue
const tableMethods = {
  /**
   * edit: ç¼–è¾‘æ–¹æ³•
   * @param {Object} row - å½“å‰è¡Œæ•°æ®å¯¹è±¡
   * @description è¡Œå†…ç¼–è¾‘æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨ï¼Œè‡ªåŠ¨ä¼ é€’å½“å‰è¡Œæ•°æ®
   */
  edit: (row) => {
    editData.value = { ...row }      // âš ï¸ æ¥æ”¶ row å‚æ•°
    modalVisible.value = true
  },

  /**
   * delete: åˆ é™¤æ–¹æ³•
   * @param {Object} row - å½“å‰è¡Œæ•°æ®å¯¹è±¡
   * @description è¡Œå†…åˆ é™¤æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨ï¼Œè‡ªåŠ¨ä¼ é€’å½“å‰è¡Œæ•°æ®
   */
  delete: (row) => {
    removeFunc(
      deleteApi,
      row,                            // âš ï¸ ç›´æ¥ä¼ é€’ row å¯¹è±¡
      reload,
      'ç¡®è®¤åˆ é™¤å½“å‰æ•°æ®å—',
      'id'
    )
  },

  /**
   * view: æŸ¥çœ‹æ–¹æ³•
   * @param {Object} row - å½“å‰è¡Œæ•°æ®å¯¹è±¡
   * @description è¡Œå†…æŸ¥çœ‹æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨ï¼Œè‡ªåŠ¨ä¼ é€’å½“å‰è¡Œæ•°æ®
   */
  view: (row) => {
    editData.value = { ...row }
    modalVisible.value = true
    viewMode.value = true
  }
}
```

**å‚æ•°è¯´æ˜**ï¼š

è¡Œå†…æŒ‰é’®çš„æ–¹æ³•**è‡ªåŠ¨æ¥æ”¶ `row` å‚æ•°**ï¼Œ`row` æ˜¯å½“å‰è¡Œçš„å®Œæ•´æ•°æ®å¯¹è±¡ã€‚

**å®Œæ•´ç¤ºä¾‹**ï¼š

```javascript
const tableMethods = {
  // ç¼–è¾‘ - æ¥æ”¶ row å‚æ•°
  edit: (row) => {
    editData.value = { ...row }
    modalVisible.value = true
  },

  // åˆ é™¤ - æ¥æ”¶ row å‚æ•°
  delete: (row) => {
    removeFunc(
      deleteApi,
      row,              // âš ï¸ ç›´æ¥ä¼ é€’ row å¯¹è±¡
      reload,
      'ç¡®è®¤åˆ é™¤å½“å‰æ•°æ®å—',
      'id'
    )
  },

  // æŸ¥çœ‹ - æ¥æ”¶ row å‚æ•°
  view: (row) => {
    editData.value = { ...row }
    modalVisible.value = true
    viewMode.value = true
  },

  // å®¡æ ¸ - æ¥æ”¶ row å‚æ•°
  approve: (row) => {
    if (row.status != 'UnderReview' && row.status != 'Overruled') {
      return proxy.$modal.msgError('å½“å‰çŠ¶æ€ç¦æ­¢å®¡æ‰¹')
    }
    queryParams.value.id = row.id    // âš ï¸ ä» row ä¸­è·å–æ•°æ®
    approvalVisible.value = true
  }
}
```

### 3. æŒ‰é’®äº‹ä»¶å…³è”æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æŒ‰é’®é…ç½® (listData.js)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é¡¶éƒ¨æŒ‰é’®: commands[].btnFun = 'add'                     â”‚
â”‚ è¡Œå†…æŒ‰é’®: columns[].commands[].btnFun = 'edit'          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç»„ä»¶å†…éƒ¨äº‹ä»¶å¤„ç† (TableCommon)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é¡¶éƒ¨æŒ‰é’®: methods[btn.btnFun]()          // æ— å‚æ•°      â”‚
â”‚ è¡Œå†…æŒ‰é’®: methods[btn.btnFun](row)       // ä¼ é€’ row    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              tableMethods æ–¹æ³•å®šä¹‰ (index.vue)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ add: () => { ... }                    // æ— å‚æ•°         â”‚
â”‚ edit: (row) => { ... }                // æ¥æ”¶ row       â”‚
â”‚ delete: (row) => { ... }              // æ¥æ”¶ row       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. å‚æ•°å–å€¼æ–¹å¼æ€»ç»“

#### é¡¶éƒ¨æŒ‰é’®å‚æ•°å–å€¼

| éœ€è¦çš„æ•°æ® | è·å–æ–¹å¼ | ç¤ºä¾‹ |
|-----------|---------|------|
| é€‰ä¸­æ•°æ® | `tableRef.value.selectRecords` | `const records = tableRef.value.selectRecords` |
| æŸ¥è¯¢å‚æ•° | `tableRef.value.beforeSearchParams` | `const params = tableRef.value.beforeSearchParams` |
| å®æ—¶æŸ¥è¯¢å‚æ•° | `tableRef.value.realtimeQueryParams` | `const params = tableRef.value.realtimeQueryParams` |

#### è¡Œå†…æŒ‰é’®å‚æ•°å–å€¼

| éœ€è¦çš„æ•°æ® | è·å–æ–¹å¼ | ç¤ºä¾‹ |
|-----------|---------|------|
| å½“å‰è¡Œæ•°æ® | æ–¹æ³•å‚æ•° `row` | `edit: (row) => { const id = row.id }` |
| è¡Œæ•°æ®å­—æ®µ | `row.fieldName` | `const status = row.status` |
| è¡Œæ•°æ®ID | `row[listData.rowKey]` | `const id = row[listData.rowKey]` |

### 5. æŒ‰é’®é…ç½®ä¸ tableMethods å¯¹åº”å…³ç³»

**é…ç½®ç¤ºä¾‹**ï¼š

```javascript
// listData.js - æŒ‰é’®é…ç½®
export const listData = {
  // é¡¶éƒ¨æŒ‰é’®
  commands: [
    { id: 'module:function:add', btnFun: 'add', name: 'æ–°å¢', icon: 'Plus', type: 'primary' },
    { id: 'module:function:export', btnFun: 'export', name: 'å¯¼å‡º', icon: 'Download', type: '' },
    { id: 'module:function:batchDelete', btnFun: 'batchDelete', name: 'æ‰¹é‡åˆ é™¤', icon: 'Delete', type: '' }
  ],
  
  // è¡Œå†…æŒ‰é’®
  columns: [
    {
      title: 'æ“ä½œ',
      key: 'active',
      width: 165,
      slots: { default: 'active' },
      commands: [
        { id: 'module:function:edit', btnFun: 'edit', name: 'ç¼–è¾‘', icon: '', type: 'primary' },
        { id: 'module:function:delete', btnFun: 'delete', name: 'åˆ é™¤', icon: '', type: 'danger' },
        { id: 'module:function:view', btnFun: 'view', name: 'æŸ¥çœ‹', icon: '', type: 'primary' }
      ]
    }
  ]
}
```

**tableMethods å¯¹åº”æ–¹æ³•**ï¼š

```javascript
// index.vue - tableMethods å®šä¹‰
const tableMethods = {
  // é¡¶éƒ¨æŒ‰é’®æ–¹æ³•ï¼ˆæ— å‚æ•°ï¼‰
  add: () => { /* ... */ },
  export: () => { /* ... */ },
  batchDelete: () => { /* ... */ },
  
  // è¡Œå†…æŒ‰é’®æ–¹æ³•ï¼ˆæ¥æ”¶ row å‚æ•°ï¼‰
  edit: (row) => { /* ... */ },
  delete: (row) => { /* ... */ },
  view: (row) => { /* ... */ }
}
```

### 6. å¸¸è§é”™è¯¯å’Œæ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æç¤º**ï¼š

1. **æ–¹æ³•åå¿…é¡»åŒ¹é…**ï¼š`btnFun` çš„å€¼å¿…é¡»ä¸ `tableMethods` ä¸­çš„æ–¹æ³•åå®Œå…¨ä¸€è‡´
2. **é¡¶éƒ¨æŒ‰é’®æ— å‚æ•°**ï¼šé¡¶éƒ¨æŒ‰é’®çš„æ–¹æ³•ä¸æ¥å—å‚æ•°ï¼Œéœ€è¦é€šè¿‡è¡¨æ ¼å®ä¾‹è·å–æ•°æ®
3. **è¡Œå†…æŒ‰é’®æœ‰å‚æ•°**ï¼šè¡Œå†…æŒ‰é’®çš„æ–¹æ³•è‡ªåŠ¨æ¥æ”¶ `row` å‚æ•°ï¼Œæ— éœ€æ‰‹åŠ¨ä¼ é€’
4. **æ–¹æ³•å¿…é¡»å®šä¹‰**ï¼šå¦‚æœé…ç½®äº† `btnFun`ï¼Œå¿…é¡»åœ¨ `tableMethods` ä¸­å®šä¹‰å¯¹åº”æ–¹æ³•
5. **å‚æ•°ç±»å‹æ­£ç¡®**ï¼šè¡Œå†…æŒ‰é’®çš„ `row` å‚æ•°æ˜¯å¯¹è±¡ï¼ŒåŒ…å«å½“å‰è¡Œçš„æ‰€æœ‰å­—æ®µ

**é”™è¯¯ç¤ºä¾‹**ï¼š

```javascript
// âŒ é”™è¯¯ï¼šé¡¶éƒ¨æŒ‰é’®æ–¹æ³•æ¥æ”¶å‚æ•°
const tableMethods = {
  add: (row) => {  // âŒ é¡¶éƒ¨æŒ‰é’®ä¸ä¼šä¼ é€’å‚æ•°
    // ...
  }
}

// âŒ é”™è¯¯ï¼šè¡Œå†…æŒ‰é’®æ–¹æ³•ä¸æ¥æ”¶å‚æ•°
const tableMethods = {
  edit: () => {  // âŒ è¡Œå†…æŒ‰é’®ä¼šè‡ªåŠ¨ä¼ é€’ row å‚æ•°
    // ...
  }
}

// âŒ é”™è¯¯ï¼šæ–¹æ³•åä¸åŒ¹é…
// listData.js: btnFun: 'edit'
// tableMethods: editRow: (row) => { ... }  // âŒ æ–¹æ³•åä¸åŒ¹é…
```

**æ­£ç¡®ç¤ºä¾‹**ï¼š

```javascript
// âœ… æ­£ç¡®ï¼šé¡¶éƒ¨æŒ‰é’®æ— å‚æ•°
const tableMethods = {
  add: () => {
    editData.value = null
    modalVisible.value = true
  }
}

// âœ… æ­£ç¡®ï¼šè¡Œå†…æŒ‰é’®æ¥æ”¶ row å‚æ•°
const tableMethods = {
  edit: (row) => {
    editData.value = { ...row }
    modalVisible.value = true
  }
}
```

## å¸¸ç”¨åŠŸèƒ½ç»„åˆä½¿ç”¨

TableCommon ç»„ä»¶æä¾›äº†å¤šç§å¸¸ç”¨åŠŸèƒ½çš„å®ç°æ–¹å¼ï¼Œç»Ÿä¸€ä½¿ç”¨é¡¹ç›®æä¾›çš„ Hooks å’Œç»„ä»¶ã€‚

> **âš ï¸ æ¶ˆæ¯æç¤ºè§„èŒƒ**ï¼šå…³äº `proxy.$modal` çš„ä½¿ç”¨è§„èŒƒå’Œç¦æ­¢ä½¿ç”¨ `ElMessage`ã€`ElNotification` çš„è¯¦ç»†è¯´æ˜ï¼Œè¯·å‚è€ƒ [vue-development-patterns.mdc](./vue-development-patterns.mdc) ä¸­çš„"æ¶ˆæ¯æç¤ºè§„èŒƒ"ç« èŠ‚ã€‚

### åŠŸèƒ½å®ç°åŸåˆ™

âš ï¸ **é‡è¦åŸåˆ™**ï¼š

1. **ç»Ÿä¸€ä½¿ç”¨ Hooks**ï¼šæ‰€æœ‰å¸¸ç”¨æ–¹æ³•éƒ½ä½¿ç”¨é¡¹ç›®æä¾›çš„ Hooksï¼Œä¸è¦è‡ªå·±å®ç°
2. **ä½¿ç”¨å…¬å¸ç»„ä»¶**ï¼šå®¡æ‰¹ã€æµç¨‹è·Ÿè¸ªç­‰åŠŸèƒ½ä½¿ç”¨å…¬å¸æä¾›çš„ç»„ä»¶
3. **ç¦æ­¢ä½¿ç”¨ ElMessage.confirm**ï¼šä¸å¾—å•ç‹¬ä½¿ç”¨ `ElMessage.confirm` å®ç°ç¡®è®¤å¯¹è¯æ¡†ï¼Œç»Ÿä¸€ä½¿ç”¨ `proxy.$modal.confirm`
4. **å‚æ•°é¡ºåº**ï¼šä¸¥æ ¼æŒ‰ç…§ Hook çš„å‚æ•°é¡ºåºä¼ é€’
5. **é”™è¯¯å¤„ç†**ï¼šHooks å†…éƒ¨å·²å¤„ç†é”™è¯¯ï¼Œæ— éœ€é¢å¤– try-catch

### 1. æ•°æ®å¯¼å‡º

**ä½¿ç”¨åœºæ™¯**ï¼šå¯¼å‡ºå½“å‰ç­›é€‰æ¡ä»¶ä¸‹çš„æ•°æ®ä¸º Excel æ–‡ä»¶

**å®ç°æ–¹å¼**ï¼šä½¿ç”¨ `exportExcel` Hook

**API æ¥å£å°è£…**ï¼š

```javascript
// api/module/function.js
import request from '@/utils/request'

/**
 * å¯¼å‡ºæ•°æ®
 * @param {Object} params - æŸ¥è¯¢å‚æ•°
 * @returns {Promise} è¿”å›æ–‡ä»¶æµ
 */
export function exportApi(params) {
  return request({
    url: '/module/function/export',
    method: 'post',
    data: params,
    responseType: 'blob'  // âš ï¸ å¿…é¡»è®¾ç½® responseType: 'blob'
  })
}
```

**tableMethods å®ç°**ï¼š

```javascript
import { exportExcel } from '@/hooks/useExport.js'
import { exportApi } from '@/api/module/function'

const tableMethods = {
  /**
   * export: å¯¼å‡ºæ•°æ®
   * @description é¡¶éƒ¨å¯¼å‡ºæŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨
   * @note æ— å‚æ•°ï¼Œé€šè¿‡è¡¨æ ¼å®ä¾‹è·å–æŸ¥è¯¢å‚æ•°
   */
  export: () => {
    exportExcel({
      api: exportApi,  // å¯¼å‡º API å‡½æ•°
      params: {
        ...tableRef.value?.beforeSearchParams  // âš ï¸ ä½¿ç”¨ beforeSearchParams è·å–æŸ¥è¯¢å‚æ•°
      },
      fileName: `æ•°æ®å¯¼å‡º_${new Date().getTime()}`,  // æ–‡ä»¶åï¼ˆä¸å«æ‰©å±•åï¼‰
      fileExt: 'xlsx'  // æ–‡ä»¶æ‰©å±•å
    })
  }
}
```

**listData.js é…ç½®**ï¼š

```javascript
export const listData = {
  commands: [
    {
      id: 'module:function:export',
      btnFun: 'export',
      name: 'å¯¼å‡º',
      icon: 'Download',
      type: ''  // âš ï¸ éæ–°å¢æŒ‰é’® type ä¸ºç©ºå­—ç¬¦ä¸²
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ å¿…é¡»ä¼ é€’ `api` å‚æ•°ï¼ˆå¯¼å‡º API å‡½æ•°ï¼‰
- âš ï¸ ä½¿ç”¨ `tableRef.value?.beforeSearchParams` è·å–å½“å‰æŸ¥è¯¢æ¡ä»¶
- âš ï¸ æ–‡ä»¶åå»ºè®®åŒ…å«æ—¶é—´æˆ³ï¼Œé¿å…é‡å¤
- âš ï¸ API æ¥å£å¿…é¡»è®¾ç½® `responseType: 'blob'`

### 2. æ•°æ®å¯¼å…¥

**ä½¿ç”¨åœºæ™¯**ï¼šä» Excel æ–‡ä»¶å¯¼å…¥æ•°æ®

**å®ç°æ–¹å¼**ï¼šä½¿ç”¨ `importExcel` Hook

**API æ¥å£å°è£…**ï¼š

```javascript
// api/module/function.js
import request from '@/utils/request'

/**
 * å¯¼å…¥æ•°æ®
 * @param {FormData} formData - æ–‡ä»¶è¡¨å•æ•°æ®
 * @returns {Promise} è¿”å›å¯¼å…¥ç»“æœ
 */
export function importApi(formData) {
  return request({
    url: '/module/function/import',
    method: 'post',
    data: formData,
    headers: {
      'Content-Type': 'multipart/form-data'  // âš ï¸ å¿…é¡»è®¾ç½® Content-Type
    }
  })
}

/**
 * ä¸‹è½½å¯¼å…¥æ¨¡æ¿
 * @returns {Promise} è¿”å›æ–‡ä»¶æµ
 */
export function downloadTemplateApi() {
  return request({
    url: '/module/function/downloadTemplate',
    method: 'get',
    responseType: 'blob'  // âš ï¸ å¿…é¡»è®¾ç½® responseType: 'blob'
  })
}
```

**tableMethods å®ç°**ï¼š

```javascript
import { importExcel } from '@/hooks/userImport.js'
import { exportExcel } from '@/hooks/useExport.js'
import { importApi, downloadTemplateApi } from '@/api/module/function'

const tableMethods = {
  /**
   * import: å¯¼å…¥æ•°æ®
   * @description é¡¶éƒ¨å¯¼å…¥æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨
   * @note æ— å‚æ•°ï¼ŒHook å†…éƒ¨å¤„ç†æ–‡ä»¶é€‰æ‹©
   */
  import: async () => {
    await importExcel({
      api: importApi,  // å¯¼å…¥ API å‡½æ•°
      successMsg: 'å¯¼å…¥æˆåŠŸ',  // æˆåŠŸæç¤º
      errorMsg: 'å¯¼å…¥å¤±è´¥',  // å¤±è´¥æç¤º
      onSuccess: result => {
        // æˆåŠŸå›è°ƒ
        if (result.code === 0) {
          reload()  // åˆ·æ–°è¡¨æ ¼
        }
      }
    })
  },

  /**
   * downloadTemplate: ä¸‹è½½æ¨¡æ¿
   * @description é¡¶éƒ¨ä¸‹è½½æ¨¡æ¿æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨
   * @note æ— å‚æ•°ï¼Œç›´æ¥ä¸‹è½½æ¨¡æ¿æ–‡ä»¶
   */
  downloadTemplate: () => {
    exportExcel({
      api: downloadTemplateApi,
      fileName: `å¯¼å…¥æ¨¡æ¿_${new Date().getTime()}`,
      fileExt: 'xlsx',
      successMsg: 'ä¸‹è½½æˆåŠŸ',
      errorMsg: 'ä¸‹è½½å¤±è´¥'
    })
  }
}
```

**listData.js é…ç½®**ï¼š

```javascript
export const listData = {
  commands: [
    {
      id: 'module:function:import',
      btnFun: 'import',
      name: 'å¯¼å…¥',
      icon: 'Upload',
      type: ''
    },
    {
      id: 'module:function:downloadTemplate',
      btnFun: 'downloadTemplate',
      name: 'ä¸‹è½½æ¨¡æ¿',
      icon: 'Download',
      type: ''
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ ä½¿ç”¨ `importExcel` Hook å®ç°å¯¼å…¥
- âš ï¸ ä½¿ç”¨ `exportExcel` Hook å®ç°æ¨¡æ¿ä¸‹è½½
- âš ï¸ å¯¼å…¥æˆåŠŸåé€šå¸¸éœ€è¦åˆ·æ–°è¡¨æ ¼
- âš ï¸ å¯¼å…¥ API æ¥å£å¿…é¡»è®¾ç½® `Content-Type: 'multipart/form-data'`

### 3. è¡Œå†…åˆ é™¤

**ä½¿ç”¨åœºæ™¯**ï¼šåˆ é™¤å•è¡Œæ•°æ®

**å®ç°æ–¹å¼**ï¼šä½¿ç”¨ `removeFunc` Hook

**API æ¥å£å°è£…**ï¼š

```javascript
// api/module/function.js
import request from '@/utils/request'

/**
 * åˆ é™¤æ•°æ®
 * @param {string} id - æ•°æ®ID
 * @returns {Promise} è¿”å›åˆ é™¤ç»“æœ
 */
export function deleteApi(id) {
  return request({
    url: `/module/function/${id}`,
    method: 'delete'
  })
}
```

**tableMethods å®ç°**ï¼š

```javascript
import { useTableListFunc } from '@/hooks/useTableListFunc'
import { deleteApi } from '@/api/module/function'

const { removeFunc } = useTableListFunc()

const tableMethods = {
  /**
   * delete: åˆ é™¤å•è¡Œæ•°æ®
   * @param {Object} row - å½“å‰è¡Œæ•°æ®å¯¹è±¡
   * @description è¡Œå†…åˆ é™¤æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨ï¼Œè‡ªåŠ¨ä¼ é€’å½“å‰è¡Œæ•°æ®
   */
  delete: row => {
    removeFunc(
      deleteApi,  // åˆ é™¤ API å‡½æ•°
      row,  // è¡Œæ•°æ®å¯¹è±¡
      reload,  // æˆåŠŸå›è°ƒï¼ˆåˆ·æ–°è¡¨æ ¼ï¼‰
      'ç¡®è®¤åˆ é™¤å½“å‰æ•°æ®å—',  // ç¡®è®¤æç¤ºæ–‡æ¡ˆ
      'id'  // ID å­—æ®µåï¼ˆé»˜è®¤ä¸º 'id'ï¼‰
    )
  }
}
```

**listData.js é…ç½®**ï¼š

```javascript
export const listData = {
  columns: [
    {
      title: 'æ“ä½œ',
      key: 'active',
      width: 165,
      fixed: 'right',
      slots: { default: 'active' },
      commands: [
        {
          id: 'module:function:delete',
          btnFun: 'delete',
          name: 'åˆ é™¤',
          icon: '',
          type: 'danger'  // âš ï¸ åˆ é™¤æŒ‰é’®å¿…é¡»æ˜¯ 'danger'
        }
      ]
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åˆ é™¤ API å‡½æ•°
- âš ï¸ ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¡Œæ•°æ®å¯¹è±¡
- âš ï¸ ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æˆåŠŸå›è°ƒå‡½æ•°ï¼ˆé€šå¸¸æ˜¯ `reload`ï¼‰
- âš ï¸ ç¬¬å››ä¸ªå‚æ•°æ˜¯ç¡®è®¤æç¤ºæ–‡æ¡ˆ
- âš ï¸ ç¬¬äº”ä¸ªå‚æ•°æ˜¯ ID å­—æ®µåï¼ˆå¦‚æœ ID å­—æ®µä¸æ˜¯ `id`ï¼Œéœ€è¦æŒ‡å®šï¼‰

### 4. æ‰¹é‡åˆ é™¤

**ä½¿ç”¨åœºæ™¯**ï¼šæ‰¹é‡åˆ é™¤é€‰ä¸­çš„å¤šè¡Œæ•°æ®

**å®ç°æ–¹å¼**ï¼šä½¿ç”¨ `batchRemoveFunc` Hook

**API æ¥å£å°è£…**ï¼š

```javascript
// api/module/function.js
import request from '@/utils/request'

/**
 * æ‰¹é‡åˆ é™¤æ•°æ®
 * @param {Array<string>} ids - æ•°æ®IDæ•°ç»„
 * @returns {Promise} è¿”å›åˆ é™¤ç»“æœ
 */
export function batchDeleteApi(ids) {
  return request({
    url: '/module/function/batchDelete',
    method: 'post',
    data: { ids }  // æˆ– data: idsï¼Œæ ¹æ®åç«¯æ¥å£è¦æ±‚
  })
}
```

**tableMethods å®ç°**ï¼š

```javascript
import { useTableListFunc } from '@/hooks/useTableListFunc'
import { batchDeleteApi } from '@/api/module/function'

const { batchRemoveFunc } = useTableListFunc()

const tableMethods = {
  /**
   * batchDelete: æ‰¹é‡åˆ é™¤æ•°æ®
   * @description é¡¶éƒ¨æ‰¹é‡åˆ é™¤æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨
   * @note æ— å‚æ•°ï¼Œé€šè¿‡è¡¨æ ¼å®ä¾‹è·å–é€‰ä¸­æ•°æ®
   */
  batchDelete: () => {
    batchRemoveFunc(
      batchDeleteApi,  // æ‰¹é‡åˆ é™¤ API å‡½æ•°ï¼ˆæ¥æ”¶ ID æ•°ç»„ï¼‰
      reload,  // æˆåŠŸå›è°ƒï¼ˆåˆ·æ–°è¡¨æ ¼ï¼‰
      'ç¡®è®¤åˆ é™¤è¿™äº›æ•°æ®å—?',  // ç¡®è®¤æç¤ºæ–‡æ¡ˆ
      tableRef,  // è¡¨æ ¼å®ä¾‹å¼•ç”¨ï¼ˆç”¨äºè·å–é€‰ä¸­çš„æ•°æ®ï¼‰
      'id'  // ID å­—æ®µåï¼ˆé»˜è®¤ä¸º 'id'ï¼‰
    )
  }
}
```

**listData.js é…ç½®**ï¼š

```javascript
export const listData = {
  commands: [
    {
      id: 'module:function:batchDelete',
      btnFun: 'batchDelete',
      name: 'æ‰¹é‡åˆ é™¤',
      icon: 'Delete',
      type: ''
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰¹é‡åˆ é™¤ API å‡½æ•°ï¼ˆæ¥æ”¶ ID æ•°ç»„ï¼‰
- âš ï¸ ç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆåŠŸå›è°ƒå‡½æ•°
- âš ï¸ ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç¡®è®¤æç¤ºæ–‡æ¡ˆ
- âš ï¸ ç¬¬å››ä¸ªå‚æ•°æ˜¯è¡¨æ ¼å®ä¾‹å¼•ç”¨ï¼ˆç”¨äºè·å–é€‰ä¸­çš„æ•°æ®ï¼‰
- âš ï¸ ç¬¬äº”ä¸ªå‚æ•°æ˜¯ ID å­—æ®µå
- âš ï¸ Hook å†…éƒ¨ä¼šè‡ªåŠ¨è·å–é€‰ä¸­æ•°æ®å¹¶æå– ID æ•°ç»„

### 5. å‘èµ·å®¡æ‰¹

**ä½¿ç”¨åœºæ™¯**ï¼šå•æ¡æˆ–æ‰¹é‡å‘èµ·å®¡æ‰¹æµç¨‹

**å®ç°æ–¹å¼**ï¼šä½¿ç”¨ `isConfirmSubmitFunc` Hook

**API æ¥å£å°è£…**ï¼š

```javascript
// api/module/function.js
import request from '@/utils/request'

/**
 * å‘èµ·å®¡æ‰¹ï¼ˆå•æ¡ï¼‰
 * @param {string} id - æ•°æ®ID
 * @returns {Promise} è¿”å›å‘èµ·ç»“æœ
 */
export function startApproveApi(id) {
  return request({
    url: `/module/function/startApprove/${id}`,
    method: 'post'
  })
}

/**
 * æ‰¹é‡å‘èµ·å®¡æ‰¹
 * @param {Array<string>} ids - æ•°æ®IDæ•°ç»„
 * @returns {Promise} è¿”å›å‘èµ·ç»“æœ
 */
export function batchStartApproveApi(ids) {
  return request({
    url: '/module/function/batchStartApprove',
    method: 'post',
    data: { ids }
  })
}
```

**tableMethods å®ç°**ï¼š

```javascript
import { useTableListFunc } from '@/hooks/useTableListFunc'
import { startApproveApi, batchStartApproveApi } from '@/api/module/function'

const { isConfirmSubmitFunc } = useTableListFunc()

const tableMethods = {
  /**
   * start: å‘èµ·å®¡æ‰¹ï¼ˆå•æ¡ï¼‰
   * @param {Object} row - å½“å‰è¡Œæ•°æ®å¯¹è±¡
   * @description è¡Œå†…å‘èµ·å®¡æ‰¹æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨
   */
  start: row => {
    isConfirmSubmitFunc(
      startApproveApi,  // å‘èµ·å®¡æ‰¹ API å‡½æ•°
      row.id,  // æ•°æ®IDï¼ˆå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ•°ç»„ï¼‰
      reload,  // æˆåŠŸå›è°ƒ
      null,  // å–æ¶ˆå›è°ƒï¼ˆå¯é€‰ï¼‰
      'ç¡®è®¤å‘èµ·å®¡æ ¸å—ï¼Ÿ'  // ç¡®è®¤æç¤ºæ–‡æ¡ˆ
    )
  },

  /**
   * batchStart: æ‰¹é‡å‘èµ·å®¡æ‰¹
   * @description é¡¶éƒ¨æ‰¹é‡å‘èµ·å®¡æ‰¹æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨
   * @note æ— å‚æ•°ï¼Œé€šè¿‡è¡¨æ ¼å®ä¾‹è·å–é€‰ä¸­æ•°æ®
   */
  batchStart: () => {
    const records = tableRef.value?.selectRecords
    if (!records || records.length === 0) {
      proxy.$modal.msgError('è¯·é€‰æ‹©è¦å‘èµ·å®¡æ‰¹çš„æ•°æ®')
      return
    }
    const ids = records.map(row => row.id)
    isConfirmSubmitFunc(
      batchStartApproveApi,
      ids,  // ID æ•°ç»„
      reload,
      null,
      'ç¡®è®¤å‘èµ·å®¡æ ¸å—ï¼Ÿ'
    )
  }
}
```

**listData.js é…ç½®**ï¼š

```javascript
export const listData = {
  commands: [
    {
      id: 'module:function:batchStart',
      btnFun: 'batchStart',
      name: 'æ‰¹é‡å‘èµ·å®¡æ‰¹',
      icon: '',
      type: ''
    }
  ],
  columns: [
    {
      title: 'æ“ä½œ',
      key: 'active',
      width: 165,
      slots: { default: 'active' },
      commands: [
        {
          id: 'module:function:start',
          btnFun: 'start',
          name: 'å‘èµ·å®¡æ‰¹',
          icon: '',
          type: 'primary'
        }
      ]
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‘èµ·å®¡æ‰¹ API å‡½æ•°
- âš ï¸ ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ˜¯å•ä¸ª IDï¼ˆå­—ç¬¦ä¸²ï¼‰æˆ– ID æ•°ç»„
- âš ï¸ æ‰¹é‡æ“ä½œæ—¶éœ€è¦å…ˆè·å–é€‰ä¸­çš„æ•°æ®å¹¶æ ¡éªŒ
- âš ï¸ é€šå¸¸éœ€è¦æ ¡éªŒæ•°æ®çŠ¶æ€ï¼ˆåªæœ‰æœªæäº¤æˆ–é©³å›çŠ¶æ€æ‰èƒ½å‘èµ·å®¡æ‰¹ï¼‰

### 6. å®¡æ‰¹

**ä½¿ç”¨åœºæ™¯**ï¼šå®¡æ ¸é€šè¿‡æˆ–é©³å›æ•°æ®

**å®ç°æ–¹å¼**ï¼šä½¿ç”¨ `ApprovalModel` ç»„ä»¶

**API æ¥å£å°è£…**ï¼š

```javascript
// api/module/function.js
import request from '@/utils/request'

/**
 * è·å–é©³å›èŠ‚ç‚¹åˆ—è¡¨
 * @param {string} id - æ•°æ®ID
 * @returns {Promise} è¿”å›é©³å›èŠ‚ç‚¹åˆ—è¡¨
 */
export function getOverruledNode(id) {
  return request({
    url: `/module/function/getOverruledNode/${id}`,
    method: 'get'
  })
}

/**
 * åŒæ„å®¡æ‰¹
 * @param {Object} params - å®¡æ‰¹å‚æ•°
 * @returns {Promise} è¿”å›å®¡æ‰¹ç»“æœ
 */
export function agreeApprove(params) {
  return request({
    url: '/module/function/agreeApprove',
    method: 'post',
    data: params
  })
}

/**
 * é©³å›å®¡æ‰¹
 * @param {Object} params - å®¡æ‰¹å‚æ•°
 * @returns {Promise} è¿”å›å®¡æ‰¹ç»“æœ
 */
export function rejectApprove(params) {
  return request({
    url: '/module/function/rejectApprove',
    method: 'post',
    data: params
  })
}
```

**tableMethods å®ç°**ï¼š

```javascript
import ApprovalModel from '@/components/ApprovalModel/index.vue'
import { getOverruledNode, agreeApprove, rejectApprove } from '@/api/module/function'

// å®¡æ ¸ç›¸å…³çŠ¶æ€
const approvalVisible = ref(false)
const queryParams = ref({
  id: '',  // æ•°æ®ID
  key: 'id'  // ID å­—æ®µå
})

const tableMethods = {
  /**
   * approve: å®¡æ ¸æ•°æ®
   * @param {Object} row - å½“å‰è¡Œæ•°æ®å¯¹è±¡
   * @description è¡Œå†…å®¡æ ¸æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨
   */
  approve: row => {
    // çŠ¶æ€æ ¡éªŒï¼šåªæœ‰å®¡æ ¸ä¸­æˆ–é©³å›çŠ¶æ€æ‰èƒ½å®¡æ ¸
    if (row.status != 'UnderReview' && row.status != 'Overruled') {
      return proxy.$modal.msgError('å½“å‰çŠ¶æ€ç¦æ­¢å®¡æ‰¹')
    }

    queryParams.value.id = row.id
    approvalVisible.value = true
  }
}

const handleModalSuccess = () => {
  reload()
}
```

**æ¨¡æ¿ä¸­ä½¿ç”¨**ï¼š

```vue
<template>
  <TableCommon :list-data="listData" :methods="tableMethods" />

  <!-- å®¡æ ¸å¼¹çª— -->
  <ApprovalModel
    v-model="approvalVisible"
    :get-overruled-node="getOverruledNode"
    :agree-approve="agreeApprove"
    :reject-approve="rejectApprove"
    :query-params="queryParams"
    @success="handleModalSuccess"
  />
</template>
```

**listData.js é…ç½®**ï¼š

```javascript
export const listData = {
  columns: [
    {
      title: 'æ“ä½œ',
      key: 'active',
      width: 165,
      slots: { default: 'active' },
      commands: [
        {
          id: 'module:function:approve',
          btnFun: 'approve',
          name: 'å®¡æ ¸',
          icon: '',
          type: 'primary'
        }
      ]
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ éœ€è¦å¯¼å…¥ `ApprovalModel` ç»„ä»¶
- âš ï¸ éœ€è¦å®šä¹‰ `approvalVisible` å’Œ `queryParams` çŠ¶æ€
- âš ï¸ éœ€è¦å®ç° `getOverruledNode`ã€`agreeApprove`ã€`rejectApprove` ä¸‰ä¸ª API å‡½æ•°
- âš ï¸ é€šå¸¸éœ€è¦æ ¡éªŒæ•°æ®çŠ¶æ€ï¼ˆåªæœ‰å®¡æ ¸ä¸­æˆ–é©³å›çŠ¶æ€æ‰èƒ½å®¡æ ¸ï¼‰
- âš ï¸ å®¡æ‰¹çŠ¶æ€åˆ¤æ–­ï¼šç›´æ¥ä½¿ç”¨å­—å…¸å€¼ `'UnderReview'`ã€`'Overruled'` è¿›è¡Œåˆ¤æ–­

### 7. æµç¨‹è·Ÿè¸ª

**ä½¿ç”¨åœºæ™¯**ï¼šæŸ¥çœ‹å®¡æ‰¹æµç¨‹è®°å½•

**å®ç°æ–¹å¼**ï¼šä½¿ç”¨ `ApprovalRecord` ç»„ä»¶

**tableMethods å®ç°**ï¼š

```javascript
import ApprovalRecord from '@/components/ApprovalRecord/index.vue'
import { useStyleConfig } from '@/hooks/useStyleConfig'

const { MODAL_CONFIG } = useStyleConfig()

// æµç¨‹è·Ÿè¸ªç›¸å…³çŠ¶æ€
const approvalRecordVisible = ref(false)
const procId = ref('')  // å®¡æ‰¹æµç¨‹ID

const tableMethods = {
  /**
   * flowTracking: æµç¨‹è·Ÿè¸ª
   * @param {Object} row - å½“å‰è¡Œæ•°æ®å¯¹è±¡
   * @description è¡Œå†…æµç¨‹è·Ÿè¸ªæŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨
   */
  flowTracking: row => {
    procId.value = row.procId  // ä»è¡Œæ•°æ®ä¸­è·å–æµç¨‹ID
    approvalRecordVisible.value = true
  }
}
```

**æ¨¡æ¿ä¸­ä½¿ç”¨**ï¼š

```vue
<template>
  <TableCommon :list-data="listData" :methods="tableMethods" />

  <!-- æµç¨‹è·Ÿè¸ªå¼¹çª— -->
  <el-dialog
    v-model="approvalRecordVisible"
    title="å®¡æ‰¹è®°å½•"
    :width="MODAL_CONFIG['large']"
    destroy-on-close
    append-to-body
  >
    <ApprovalRecord :proc-id="procId" />
  </el-dialog>
</template>
```

**listData.js é…ç½®**ï¼š

```javascript
export const listData = {
  columns: [
    {
      title: 'æ“ä½œ',
      key: 'active',
      width: 165,
      slots: { default: 'active' },
      commands: [
        {
          id: 'module:function:flowTracking',
          btnFun: 'flowTracking',
          name: 'æµç¨‹è·Ÿè¸ª',
          icon: '',
          type: 'primary'
        }
      ]
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ éœ€è¦å¯¼å…¥ `ApprovalRecord` ç»„ä»¶
- âš ï¸ éœ€è¦ä»è¡Œæ•°æ®ä¸­è·å– `procId`ï¼ˆå®¡æ‰¹æµç¨‹ IDï¼‰
- âš ï¸ é€šå¸¸æ”¾åœ¨å¼¹çª—ä¸­å±•ç¤º
- âš ï¸ å¼¹çª—å®½åº¦ä½¿ç”¨ `MODAL_CONFIG['large']`

### 8. å®Œæ•´åŠŸèƒ½ç»„åˆç¤ºä¾‹

**å®Œæ•´çš„é¡µé¢å®ç°**ï¼š

```vue
<template>
  <div class="page-container">
    <TableCommon
      ref="tableRef"
      :list-data="listData"
      :methods="tableMethods"
      :show-row-btn="showRowBtn"
    >
      <!-- è¡Œå†…å¯ç”¨çŠ¶æ€ -->
      <template #featureColumn="{ row, column }">
        <template v-if="column.field == 'enabledStatus'">
          <SwitchStatus
            v-model="row[column.field]"
            :row="row"
            :active-value="'1'"
            :inactive-value="'0'"
            :instance="proxy"
            :api="updateEnabledStatus"
            :status-field="'enabledStatus'"
            permission="module:function:edit"
            @success="reload"
          />
        </template>
      </template>
    </TableCommon>

    <!-- å®¡æ ¸å¼¹çª— -->
    <ApprovalModel
      v-model="approvalVisible"
      :get-overruled-node="getOverruledNode"
      :agree-approve="agreeApprove"
      :reject-approve="rejectApprove"
      :query-params="queryParams"
      @success="handleModalSuccess"
    />

    <!-- æµç¨‹è·Ÿè¸ªå¼¹çª— -->
    <el-dialog
      v-model="approvalRecordVisible"
      title="å®¡æ‰¹è®°å½•"
      :width="MODAL_CONFIG['large']"
      destroy-on-close
      append-to-body
    >
      <ApprovalRecord :proc-id="procId" />
    </el-dialog>
  </div>
</template>

<script setup>
import { ref, getCurrentInstance } from 'vue'
import { useTableListFunc } from '@/hooks/useTableListFunc'
import { exportExcel } from '@/hooks/useExport.js'
import { importExcel } from '@/hooks/userImport.js'
import { useStyleConfig } from '@/hooks/useStyleConfig'
import ApprovalModel from '@/components/ApprovalModel/index.vue'
import ApprovalRecord from '@/components/ApprovalRecord/index.vue'
import SwitchStatus from '@/components/SwitchStatus/index.vue'
import {
  deleteApi,
  batchDeleteApi,
  exportApi,
  importApi,
  downloadTemplateApi,
  startApproveApi,
  batchStartApproveApi,
  getOverruledNode,
  agreeApprove,
  rejectApprove,
  updateEnabledStatus
} from '@/api/module/function'
import { listData } from './listData'
import TableCommon from '@/components/TableCommon/index.vue'

const { proxy } = getCurrentInstance()
const { removeFunc, batchRemoveFunc, isConfirmSubmitFunc } = useTableListFunc()
const { MODAL_CONFIG } = useStyleConfig()

const tableRef = ref(null)
const approvalVisible = ref(false)
const approvalRecordVisible = ref(false)
const queryParams = ref({ id: '', key: 'id' })
const procId = ref('')

const reload = () => {
  tableRef.value?.reload()
}

const tableMethods = {
  // å¯¼å‡º
  export: () => {
    exportExcel({
      api: exportApi,
      params: {
        ...tableRef.value?.beforeSearchParams
      },
      fileName: `æ•°æ®å¯¼å‡º_${new Date().getTime()}`,
      fileExt: 'xlsx'
    })
  },

  // å¯¼å…¥
  import: async () => {
    await importExcel({
      api: importApi,
      successMsg: 'å¯¼å…¥æˆåŠŸ',
      errorMsg: 'å¯¼å…¥å¤±è´¥',
      onSuccess: result => {
        if (result.code === 0) {
          reload()
        }
      }
    })
  },

  // ä¸‹è½½æ¨¡æ¿
  downloadTemplate: () => {
    exportExcel({
      api: downloadTemplateApi,
      fileName: `å¯¼å…¥æ¨¡æ¿_${new Date().getTime()}`,
      fileExt: 'xlsx',
      successMsg: 'ä¸‹è½½æˆåŠŸ',
      errorMsg: 'ä¸‹è½½å¤±è´¥'
    })
  },

  // è¡Œå†…åˆ é™¤
  delete: row => {
    removeFunc(deleteApi, row, reload, 'ç¡®è®¤åˆ é™¤å½“å‰æ•°æ®å—', 'id')
  },

  // æ‰¹é‡åˆ é™¤
  batchDelete: () => {
    batchRemoveFunc(
      batchDeleteApi,
      reload,
      'ç¡®è®¤åˆ é™¤è¿™äº›æ•°æ®å—?',
      tableRef,
      'id'
    )
  },

  // å®¡æ ¸
  approve: row => {
    if (row.status != 'UnderReview' && row.status != 'Overruled') {
      return proxy.$modal.msgError('å½“å‰çŠ¶æ€ç¦æ­¢å®¡æ‰¹')
    }
    queryParams.value.id = row.id
    approvalVisible.value = true
  },

  // å‘èµ·å®¡æ‰¹ï¼ˆå•æ¡ï¼‰
  start: row => {
    isConfirmSubmitFunc(
      startApproveApi,
      row.id,
      reload,
      null,
      'ç¡®è®¤å‘èµ·å®¡æ ¸å—ï¼Ÿ'
    )
  },

  // æ‰¹é‡å‘èµ·å®¡æ‰¹
  batchStart: () => {
    const records = tableRef.value?.selectRecords
    if (!records || records.length === 0) {
      proxy.$modal.msgError('è¯·é€‰æ‹©è¦å‘èµ·å®¡æ‰¹çš„æ•°æ®')
      return
    }
    const ids = records.map(row => row.id)
    isConfirmSubmitFunc(
      batchStartApproveApi,
      ids,
      reload,
      null,
      'ç¡®è®¤å‘èµ·å®¡æ ¸å—ï¼Ÿ'
    )
  },

  // æµç¨‹è·Ÿè¸ª
  flowTracking: row => {
    procId.value = row.procId
    approvalRecordVisible.value = true
  }
}

const handleModalSuccess = () => {
  reload()
}
</script>
```

### 9. æ³¨æ„äº‹é¡¹æ€»ç»“

âš ï¸ **é‡è¦æç¤º**ï¼š

1. **ç»Ÿä¸€ä½¿ç”¨ Hooks**ï¼šæ‰€æœ‰å¸¸ç”¨æ–¹æ³•éƒ½ä½¿ç”¨é¡¹ç›®æä¾›çš„ Hooksï¼Œä¸è¦è‡ªå·±å®ç°
2. **å‚æ•°é¡ºåº**ï¼šä¸¥æ ¼æŒ‰ç…§ Hook çš„å‚æ•°é¡ºåºä¼ é€’
3. **é”™è¯¯å¤„ç†**ï¼šHooks å†…éƒ¨å·²å¤„ç†é”™è¯¯ï¼Œæ— éœ€é¢å¤– try-catch
4. **æˆåŠŸå›è°ƒ**ï¼šç»Ÿä¸€ä½¿ç”¨ `reload` å‡½æ•°åˆ·æ–°è¡¨æ ¼
5. **çŠ¶æ€æ ¡éªŒ**ï¼šå®¡æ ¸ã€å‘èµ·å®¡æ‰¹ç­‰æ–¹æ³•éœ€è¦æ ¡éªŒæ•°æ®çŠ¶æ€
6. **ç»„ä»¶å¯¼å…¥**ï¼šå®¡æ ¸å’Œæµç¨‹è·Ÿè¸ªéœ€è¦å¯¼å…¥å¯¹åº”ç»„ä»¶
7. **ID å­—æ®µå**ï¼šå¦‚æœ ID å­—æ®µä¸æ˜¯ `id`ï¼Œéœ€è¦åœ¨æ–¹æ³•ä¸­æŒ‡å®šå­—æ®µå
8. **ç¦æ­¢ä½¿ç”¨ ElMessage.confirm**ï¼šä¸å¾—å•ç‹¬ä½¿ç”¨ `ElMessage.confirm` å®ç°ç¡®è®¤å¯¹è¯æ¡†ï¼Œç»Ÿä¸€ä½¿ç”¨ `proxy.$modal.confirm`ï¼ˆè¯¦ç»†è§„èŒƒè¯·å‚è€ƒ [vue-development-patterns.mdc](./vue-development-patterns.mdc) ä¸­çš„"æ¶ˆæ¯æç¤ºè§„èŒƒ"ç« èŠ‚ï¼‰
9. **å®¡æ‰¹çŠ¶æ€åˆ¤æ–­**ï¼šç›´æ¥ä½¿ç”¨å­—å…¸å€¼è¿›è¡Œåˆ¤æ–­ï¼ˆ`'UnderReview'`ã€`'Overruled'` ç­‰ï¼‰

## æŒ‰é’®çŠ¶æ€æ§åˆ¶ (showRowBtn)

`showRowBtn` å‡½æ•°ç”¨äºç»Ÿä¸€æ§åˆ¶è¡¨æ ¼è¡Œå†…æŒ‰é’®çš„æ˜¾ç¤ºå’Œç¦ç”¨çŠ¶æ€ï¼Œæ ¹æ®è¡Œæ•°æ®çš„çŠ¶æ€åŠ¨æ€è®¾ç½®æŒ‰é’®çš„å¯ç”¨æ€§ã€‚

### å‡½æ•°ç­¾å

```javascript
/**
 * showRowBtn: æŒ‰é’®çŠ¶æ€æ§åˆ¶å‡½æ•°
 * @param {Object} btn - æŒ‰é’®é…ç½®å¯¹è±¡
 * @param {string} btn.id - æŒ‰é’®æƒé™æ ‡è¯†ï¼ˆæ ¼å¼ï¼š'æ¨¡å—:åŠŸèƒ½:æ“ä½œ'ï¼‰
 * @param {string} btn.btnFun - æŒ‰é’®å¯¹åº”çš„æ–¹æ³•å
 * @param {Object} row - å½“å‰è¡Œæ•°æ®å¯¹è±¡
 * @returns {Object} æŒ‰é’®çŠ¶æ€å¯¹è±¡
 * @returns {boolean} show - æ˜¯å¦æ˜¾ç¤ºæŒ‰é’®ï¼ˆé»˜è®¤ trueï¼‰
 * @returns {boolean} disabled - æ˜¯å¦ç¦ç”¨æŒ‰é’®ï¼ˆé»˜è®¤ falseï¼‰
 * @note âš ï¸ rowKey å¿…é¡»é…ç½®ä¸”æ˜¯å”¯ä¸€ï¼Œç”¨äºæŒ‰é’®çŠ¶æ€ç¼“å­˜ï¼ˆå‚è€ƒ [å¼€å‘è§„èŒƒ - rowKey é…ç½®è§„èŒƒ](#5-rowkey-é…ç½®è§„èŒƒ)ï¼‰
 * @note âš ï¸ çŠ¶æ€åˆ¤æ–­ä¸­æšä¸¾ä»…ä¾›å‚è€ƒï¼ä»¥å®é™…å€¼ä¸ºå‡†ï¼ˆå‚è€ƒ [å¼€å‘è§„èŒƒ - çŠ¶æ€åˆ¤æ–­è§„èŒƒ](#6-çŠ¶æ€åˆ¤æ–­è§„èŒƒ)ï¼‰
 */
const showRowBtn = (btn, row) => {
  const btnStatus = {
    show: true,      // æ˜¯å¦æ˜¾ç¤ºæŒ‰é’®
    disabled: false // æ˜¯å¦ç¦ç”¨æŒ‰é’®
  }
  
  // æ ¹æ®æŒ‰é’® id å’Œè¡Œæ•°æ®çŠ¶æ€è®¾ç½® disabled
  // ...
  
  return btnStatus
}
```

### ä½¿ç”¨æ–¹å¼

**æ¨¡æ¿ä¸­ä¼ é€’**ï¼š

```vue
<template>
  <TableCommon
    ref="tableRef"
    :list-data="listData"
    :methods="tableMethods"
    :show-row-btn="showRowBtn"
  />
</template>

<script setup>
// å®šä¹‰ showRowBtn å‡½æ•°
const showRowBtn = (btn, row) => {
  const btnStatus = {
    show: true,
    disabled: false
  }
  
  // æ ¹æ®æŒ‰é’® id åˆ¤æ–­æŒ‰é’®ç±»å‹ï¼Œç„¶åæ ¹æ®è¡Œæ•°æ®çŠ¶æ€è®¾ç½® disabled
  // ...
  
  return btnStatus
}
</script>
```

### æŒ‰é’®ç±»å‹åˆ¤æ–­

**é€šè¿‡æŒ‰é’® id åˆ¤æ–­æŒ‰é’®ç±»å‹**ï¼š

```javascript
const showRowBtn = (btn, row) => {
  const btnStatus = {
    show: true,
    disabled: false
  }
  
  // âš ï¸ å…ˆé€šè¿‡æŒ‰é’® id åˆ¤æ–­æ˜¯ä»€ä¹ˆæŒ‰é’®
  if (btn.id === 'module:function:edit') {
    // ç¼–è¾‘æŒ‰é’®çš„é€»è¾‘
  } 
  if (btn.id === 'module:function:delete') {
    // åˆ é™¤æŒ‰é’®çš„é€»è¾‘
  } 
  if (btn.id === 'module:function:approve') {
    // å®¡æ ¸æŒ‰é’®çš„é€»è¾‘
  }
  
  return btnStatus
}
```

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ **å¿…é¡»å…ˆé€šè¿‡æŒ‰é’® id åˆ¤æ–­æŒ‰é’®ç±»å‹**ï¼Œç„¶åå†åˆ¤æ–­çŠ¶æ€
- âš ï¸ ä½¿ç”¨ `===` ä¸¥æ ¼ç›¸ç­‰åˆ¤æ–­ï¼Œç¡®ä¿ç±»å‹å’Œå€¼éƒ½åŒ¹é…
- âš ï¸ æŒ‰é’® id æ ¼å¼ï¼š`'æ¨¡å—:åŠŸèƒ½:æ“ä½œ'`ï¼Œå¿…é¡»ä¸ `listData.js` ä¸­é…ç½®çš„ `id` å®Œå…¨ä¸€è‡´

### å®¡æ‰¹çŠ¶æ€åˆ¤æ–­è§„èŒƒ

âš ï¸ **é‡è¦ï¼šçŠ¶æ€åˆ¤æ–­è§„èŒƒè¯·å‚è€ƒ [å¼€å‘è§„èŒƒ - çŠ¶æ€åˆ¤æ–­è§„èŒƒ](#6-çŠ¶æ€åˆ¤æ–­è§„èŒƒ) å’Œ [å¼€å‘è§„èŒƒ - rowKey é…ç½®è§„èŒƒ](#5-rowkey-é…ç½®è§„èŒƒ)ã€‚**

**å®¡æ‰¹çŠ¶æ€å­—å…¸æšä¸¾å€¼ç¤ºä¾‹**ï¼ˆä»…ä¾›å‚è€ƒï¼Œå®é™…å€¼ä»¥å¼€å‘è€…æä¾›ä¸ºå‡†ï¼‰ï¼š

```javascript
// âš ï¸ çŠ¶æ€åˆ¤æ–­ä¸­æšä¸¾ä»…ä¾›å‚è€ƒï¼ä»¥å®é™…å€¼ä¸ºå‡†
const ApprovalStatus = {
  NotSubmitted: 'NotSubmitted',  // æœªæäº¤ï¼ˆç¤ºä¾‹ï¼‰
  UnderReview: 'UnderReview',    // å®¡æ ¸ä¸­ï¼ˆç¤ºä¾‹ï¼‰
  Audited: 'Audited',            // å·²å®¡æ ¸ï¼ˆç¤ºä¾‹ï¼‰
  Overruled: 'Overruled'         // é©³å›ï¼ˆç¤ºä¾‹ï¼‰
}
```

**çŠ¶æ€åˆ¤æ–­ç¤ºä¾‹**ï¼š

```javascript
// âš ï¸ çŠ¶æ€åˆ¤æ–­ä¸­æšä¸¾ä»…ä¾›å‚è€ƒï¼ä»¥å®é™…å€¼ä¸ºå‡†
// âš ï¸ å¿…é¡»å…ˆå‘å¼€å‘è€…è¯¢é—®å…·ä½“çš„å­—å…¸ key æˆ–æšä¸¾å€¼
const showRowBtn = (btn, row) => {
  const btnStatus = {
    show: true,
    disabled: false
  }
  
  // âš ï¸ rowKey å¿…é¡»é…ç½®ä¸”æ˜¯å”¯ä¸€ï¼Œç”¨äºæŒ‰é’®çŠ¶æ€ç¼“å­˜
  // æŒ‰é’®çŠ¶æ€åˆ¤æ–­ä¼šä½¿ç”¨ row[listData.rowKey] ä½œä¸ºç¼“å­˜é”®
  
  // âœ… æ­£ç¡®æ–¹å¼ - ç›´æ¥ä½¿ç”¨å­—å…¸å€¼åˆ¤æ–­ï¼ˆæšä¸¾å€¼ä»¥å®é™…å€¼ä¸ºå‡†ï¼‰
  if (btn.id === 'module:function:edit') {
    // âš ï¸ 'NotSubmitted' å’Œ 'Overruled' æ˜¯ç¤ºä¾‹å€¼ï¼Œå®é™…å€¼ä»¥å¼€å‘è€…æä¾›ä¸ºå‡†
    if (row.status != 'NotSubmitted' && row.status != 'Overruled') {
      btnStatus.disabled = true
    }
  }
  
  if (btn.id === 'module:function:approve') {
    // âš ï¸ 'UnderReview' å’Œ 'Overruled' æ˜¯ç¤ºä¾‹å€¼ï¼Œå®é™…å€¼ä»¥å¼€å‘è€…æä¾›ä¸ºå‡†
    if (row.status != 'UnderReview' && row.status != 'Overruled') {
      btnStatus.disabled = true
    }
  }
  
  return btnStatus
}
```

**ç¦æ­¢ä½¿ç”¨æ•°å­—æˆ–å…¶ä»–ç¼–ç å€¼è¿›è¡Œåˆ¤æ–­**ï¼š

```javascript
// âŒ é”™è¯¯æ–¹å¼ - ä½¿ç”¨æ•°å­—åˆ¤æ–­
if (row.status != 0) {
  btnStatus.disabled = true
}

// âŒ é”™è¯¯æ–¹å¼ - ä½¿ç”¨å…¶ä»–ç¼–ç å€¼
if (row.status != 'pending') {
  btnStatus.disabled = true
}

// âœ… æ­£ç¡®æ–¹å¼ - ç›´æ¥ä½¿ç”¨å­—å…¸å€¼åˆ¤æ–­ï¼ˆæšä¸¾å€¼ä»¥å®é™…å€¼ä¸ºå‡†ï¼‰
// âš ï¸ 'NotSubmitted' æ˜¯ç¤ºä¾‹å€¼ï¼Œå®é™…å€¼ä»¥å¼€å‘è€…æä¾›ä¸ºå‡†
if (row.status != 'NotSubmitted') {
  btnStatus.disabled = true
}
```

### æŒ‰é’®çŠ¶æ€æ§åˆ¶ç¤ºä¾‹

âš ï¸ **æ³¨æ„ï¼šçŠ¶æ€åˆ¤æ–­è§„èŒƒè¯·å‚è€ƒ [å¼€å‘è§„èŒƒ - çŠ¶æ€åˆ¤æ–­è§„èŒƒ](#6-çŠ¶æ€åˆ¤æ–­è§„èŒƒ)ã€‚**

**ç»¼åˆç¤ºä¾‹**ï¼ˆåŒ…å«å¸¸è§åœºæ™¯ï¼‰ï¼š

```javascript
// listData.js: rowKey: 'id'  // âš ï¸ å¿…é¡»é…ç½®ä¸”æ˜¯å”¯ä¸€

const showRowBtn = (btn, row) => {
  const btnStatus = {
    show: true,
    disabled: false
  }
  
  // âš ï¸ å…ˆé€šè¿‡æŒ‰é’® id åˆ¤æ–­æ˜¯ä»€ä¹ˆæŒ‰é’®
  // âš ï¸ çŠ¶æ€åˆ¤æ–­ä¸­æšä¸¾ä»…ä¾›å‚è€ƒï¼ä»¥å®é™…å€¼ä¸ºå‡†
  
  // ç¼–è¾‘æŒ‰é’®ï¼šåªæœ‰æœªæäº¤æˆ–é©³å›çŠ¶æ€æ‰èƒ½ç¼–è¾‘
  if (btn.id === 'module:function:edit') {
    // âš ï¸ 'NotSubmitted' å’Œ 'Overruled' æ˜¯ç¤ºä¾‹å€¼ï¼Œå®é™…å€¼ä»¥å¼€å‘è€…æä¾›ä¸ºå‡†
    if (row.status != 'NotSubmitted' && row.status != 'Overruled') {
      btnStatus.disabled = true
    }
    // å¯æ·»åŠ å…¶ä»–æ¡ä»¶ï¼šä¸šåŠ¡çŠ¶æ€ã€ç”¨å°çŠ¶æ€ç­‰
    // if (row.businessStatus !== 'BUSINESS_NORMAL') {
    //   btnStatus.disabled = true
    // }
  }
  
  // åˆ é™¤æŒ‰é’®ï¼šåªæœ‰æœªæäº¤æˆ–é©³å›çŠ¶æ€æ‰èƒ½åˆ é™¤
  if (btn.id === 'module:function:delete') {
    if (row.status != 'NotSubmitted' && row.status != 'Overruled') {
      btnStatus.disabled = true
    }
    // å¯æ·»åŠ å…¶ä»–æ¡ä»¶ï¼šå·²æ”¶æ¬¾é‡‘é¢å¿…é¡»ä¸º0ç­‰
    // if (Number(row.receivedAmount) !== 0) {
    //   btnStatus.disabled = true
    // }
  }
  
  // å®¡æ ¸æŒ‰é’®ï¼šåªæœ‰å®¡æ ¸ä¸­æˆ–é©³å›çŠ¶æ€æ‰èƒ½å®¡æ ¸
  if (btn.id === 'module:function:approve') {
    // âš ï¸ 'UnderReview' å’Œ 'Overruled' æ˜¯ç¤ºä¾‹å€¼ï¼Œå®é™…å€¼ä»¥å¼€å‘è€…æä¾›ä¸ºå‡†
    if (row.status != 'UnderReview' && row.status != 'Overruled') {
      btnStatus.disabled = true
    }
  }
  
  // å‘èµ·å®¡æ‰¹æŒ‰é’®ï¼šåªæœ‰æœªæäº¤æˆ–é©³å›çŠ¶æ€æ‰èƒ½å‘èµ·å®¡æ‰¹
  if (btn.id === 'module:function:start') {
    if (row.status != 'NotSubmitted' && row.status != 'Overruled') {
      btnStatus.disabled = true
    }
  }
  
  // æµç¨‹è·Ÿè¸ªæŒ‰é’®ï¼šåªæœ‰å·²å®¡æ ¸æˆ–å®¡æ ¸ä¸­çŠ¶æ€æ‰èƒ½æŸ¥çœ‹
  if (btn.id === 'module:function:flowTracking') {
    // âš ï¸ 'Audited' å’Œ 'UnderReview' æ˜¯ç¤ºä¾‹å€¼ï¼Œå®é™…å€¼ä»¥å¼€å‘è€…æä¾›ä¸ºå‡†
    if (row.status != 'Audited' && row.status != 'UnderReview') {
      btnStatus.disabled = true
    }
  }
  
  // å‘å¸ƒ/ä¸‹æ¶æŒ‰é’®ç¤ºä¾‹
  // if (btn.id === 'module:function:publish') {
  //   if (row.publishStatus == '1') {
  //     btnStatus.disabled = true
  //   }
  // }
  
  return btnStatus
}
```

### æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æç¤º**ï¼š

1. **å…ˆåˆ¤æ–­æŒ‰é’®ç±»å‹**ï¼šå¿…é¡»å…ˆé€šè¿‡ `btn.id` åˆ¤æ–­æ˜¯ä»€ä¹ˆæŒ‰é’®ï¼Œç„¶åå†åˆ¤æ–­çŠ¶æ€
2. **ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰**ï¼šä½¿ç”¨ `===` æˆ– `!=` è¿›è¡Œåˆ¤æ–­ï¼Œç¡®ä¿ç±»å‹å’Œå€¼éƒ½åŒ¹é…
3. **å®¡æ‰¹çŠ¶æ€åˆ¤æ–­**ï¼šå‚è€ƒ [å¼€å‘è§„èŒƒ - çŠ¶æ€åˆ¤æ–­è§„èŒƒ](#6-çŠ¶æ€åˆ¤æ–­è§„èŒƒ)
4. **rowKey é…ç½®**ï¼šå‚è€ƒ [å¼€å‘è§„èŒƒ - rowKey é…ç½®è§„èŒƒ](#5-rowkey-é…ç½®è§„èŒƒ)
5. **ç¦æ­¢ä½¿ç”¨æ•°å­—**ï¼šä¸å¾—ä½¿ç”¨æ•°å­—æˆ–å…¶ä»–ç¼–ç å€¼è¿›è¡Œåˆ¤æ–­
6. **ç»Ÿä¸€æ§åˆ¶**ï¼šæ‰€æœ‰æŒ‰é’®çš„ç¦ç”¨æ“ä½œéƒ½åœ¨ `showRowBtn` ä¸­ç»Ÿä¸€æ§åˆ¶
7. **è¿”å›å¯¹è±¡**ï¼šå¿…é¡»è¿”å›åŒ…å« `show` å’Œ `disabled` å±æ€§çš„å¯¹è±¡
8. **é»˜è®¤å€¼**ï¼šé»˜è®¤ `show: true`ã€`disabled: false`ï¼Œéœ€è¦ç¦ç”¨æ—¶è®¾ç½® `disabled: true`

### å¸¸è§é”™è¯¯

**é”™è¯¯ç¤ºä¾‹**ï¼š

```javascript
// âŒ é”™è¯¯ï¼šä½¿ç”¨æ•°å­—åˆ¤æ–­å®¡æ‰¹çŠ¶æ€
if (row.status != 0) {
  btnStatus.disabled = true
}

// âŒ é”™è¯¯ï¼šä½¿ç”¨ btnFun åˆ¤æ–­æŒ‰é’®ç±»å‹ï¼ˆåº”è¯¥ä½¿ç”¨ btn.idï¼‰
if (btn.btnFun === 'edit') {
  // ...
}

// âŒ é”™è¯¯ï¼šæ²¡æœ‰å…ˆåˆ¤æ–­æŒ‰é’®ç±»å‹
if (row.status != 'NotSubmitted') {
  btnStatus.disabled = true  // æ‰€æœ‰æŒ‰é’®éƒ½ä¼šè¢«ç¦ç”¨
}

// âŒ é”™è¯¯ï¼šè¿”å›æ ¼å¼ä¸æ­£ç¡®
return { disabled: true }  // ç¼ºå°‘ show å±æ€§
```

**æ­£ç¡®ç¤ºä¾‹**ï¼š

```javascript
// âœ… æ­£ç¡®ï¼šå…ˆåˆ¤æ–­æŒ‰é’®ç±»å‹ï¼Œå†åˆ¤æ–­çŠ¶æ€
if (btn.id === 'module:function:edit') {
  if (row.status != 'NotSubmitted' && row.status != 'Overruled') {
    btnStatus.disabled = true
  }
}

// âœ… æ­£ç¡®ï¼šä½¿ç”¨å­—å…¸å€¼åˆ¤æ–­
if (row.status != 'UnderReview') {
  btnStatus.disabled = true
}

// âœ… æ­£ç¡®ï¼šè¿”å›å®Œæ•´å¯¹è±¡
return {
  show: true,
  disabled: false
}
```

## formatter å’Œ slots ä½¿ç”¨è§„èŒƒ

TableCommon ç»„ä»¶æä¾›äº†ä¸¤ç§æ–¹å¼æ¥è‡ªå®šä¹‰è¡¨æ ¼åˆ—å†…å®¹çš„æ¸²æŸ“ï¼š`formatter` å‡½æ•°å’Œ `slots` æ’æ§½ã€‚âš ï¸ **ä½¿ç”¨åŸåˆ™ï¼šä¼˜å…ˆä½¿ç”¨ formatterï¼Œåªæœ‰å®šåˆ¶åŒ–åŠŸèƒ½æ‰ä½¿ç”¨æ’æ§½ã€‚**

### ä½¿ç”¨åŸåˆ™

**ä¼˜å…ˆçº§é¡ºåº**ï¼š

1. **ä¼˜å…ˆä½¿ç”¨ formatter**ï¼šç®€å•çš„æ–‡æœ¬æ ¼å¼åŒ–ã€æ•°å€¼æ ¼å¼åŒ–ç­‰
2. **å®šåˆ¶åŒ–åŠŸèƒ½ä½¿ç”¨æ’æ§½**ï¼šå­—å…¸æ ‡ç­¾æ˜¾ç¤ºã€çŠ¶æ€æ ‡ç­¾ã€å¤æ‚äº¤äº’ç­‰

**é€‰æ‹©æŒ‡å—**ï¼š

| åœºæ™¯ | æ¨èæ–¹å¼ | ä¸æ¨èæ–¹å¼ |
|------|---------|-----------|
| ç®€å•çš„æ–‡æœ¬æ ¼å¼åŒ– | `formatter` | `slots` æ’æ§½ |
| æ•°å€¼æ ¼å¼åŒ–ï¼ˆé‡‘é¢ã€ç™¾åˆ†æ¯”ç­‰ï¼‰ | `formatter` | `slots` æ’æ§½ |
| ç©ºå€¼å¤„ç†ï¼ˆæ˜¾ç¤º `-`ï¼‰ | `formatter` | `slots` æ’æ§½ |
| å­—å…¸å€¼è½¬ä¹‰æ˜¾ç¤º | `slots` æ’æ§½ + `dict-tag` | `formatter` |
| çŠ¶æ€æ ‡ç­¾æ˜¾ç¤º | `slots` æ’æ§½ + `el-tag` | `formatter` |
| å¤æ‚çš„å•å…ƒæ ¼å†…å®¹æ¸²æŸ“ | `slots` æ’æ§½ | `formatter` |

### 1. formatter å‡½æ•°ä½¿ç”¨

**ä½œç”¨**ï¼šè‡ªå®šä¹‰å•å…ƒæ ¼å†…å®¹çš„æ ¼å¼åŒ–æ˜¾ç¤ºï¼Œé€‚ç”¨äºç®€å•çš„æ–‡æœ¬è½¬æ¢ã€æ•°å€¼æ ¼å¼åŒ–ç­‰åœºæ™¯ã€‚

**é…ç½®æ–¹å¼**ï¼š

åœ¨ `listData.js` çš„ `columns` ä¸­é…ç½®ï¼š

```javascript
{
  title: 'é‡‘é¢(å…ƒ)',
  dataIndex: 'amount',
  width: 150,
  align: 'right',
  formatter: ({ cellValue }) => {
    // æ ¼å¼åŒ–é€»è¾‘
    return cellValue ? cellValue.toLocaleString('zh-CN', {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    }) : '-'
  }
}
```

**å‡½æ•°ç­¾å**ï¼š

```javascript
/**
 * formatter: æ ¼å¼åŒ–å‡½æ•°
 * @param {Object} params - æ ¼å¼åŒ–å‚æ•°
 * @param {any} params.cellValue - å½“å‰å•å…ƒæ ¼çš„å€¼
 * @param {Object} params.row - å½“å‰è¡Œæ•°æ®å¯¹è±¡
 * @param {Object} params.column - å½“å‰åˆ—é…ç½®å¯¹è±¡
 * @returns {string} æ ¼å¼åŒ–åçš„æ˜¾ç¤ºå†…å®¹
 */
formatter: ({ cellValue, row, column }) => {
  // æ ¼å¼åŒ–é€»è¾‘
  return formattedValue
}
```

**å‚æ•°è¯´æ˜**ï¼š

- `cellValue`: å½“å‰å•å…ƒæ ¼çš„å€¼ï¼ˆå¯¹åº” `dataIndex` å­—æ®µçš„å€¼ï¼‰
- `row`: å½“å‰è¡Œæ•°æ®å¯¹è±¡ï¼ˆåŒ…å«è¯¥è¡Œçš„æ‰€æœ‰å­—æ®µï¼‰
- `column`: å½“å‰åˆ—é…ç½®å¯¹è±¡ï¼ˆåŒ…å« `title`ã€`dataIndex` ç­‰é…ç½®ï¼‰

**ä½¿ç”¨åœºæ™¯**ï¼š

#### 1.1 å¸¸ç”¨æ ¼å¼åŒ–ç¤ºä¾‹

```javascript
import { formatAmount } from '@/utils'
import dayjs from 'dayjs'

// ç©ºå€¼å¤„ç†
{
  title: 'å¤‡æ³¨',
  dataIndex: 'remark',
  minWidth: 200,
  formatter: ({ cellValue }) => {
    return cellValue || '-'
  }
}

// é‡‘é¢æ ¼å¼åŒ–ï¼ˆâš ï¸ å‚è€ƒ [å¼€å‘è§„èŒƒ - é‡‘é¢æ ¼å¼åŒ–è§„èŒƒ](#1-é‡‘é¢æ ¼å¼åŒ–è§„èŒƒ)ï¼‰
{
  title: 'é‡‘é¢(å…ƒ)',
  dataIndex: 'amount',
  width: 150,
  align: 'right',
  formatter: ({ cellValue }) => {
    return formatAmount(cellValue)
  }
}

// æ—¶é—´æ ¼å¼åŒ–ï¼ˆâš ï¸ å‚è€ƒ [å¼€å‘è§„èŒƒ - æ—¶é—´æ ¼å¼åŒ–è§„èŒƒ](#2-æ—¶é—´æ ¼å¼åŒ–è§„èŒƒ)ï¼‰
{
  title: 'åˆ›å»ºæ—¶é—´',
  dataIndex: 'createTime',
  width: 180,
  formatter: ({ cellValue }) => {
    if (!cellValue) return '-'
    return dayjs(cellValue).format('YYYY-MM-DD HH:mm:ss')
  }
}

// å¸ƒå°”å€¼è½¬æ¢
{
  title: 'æ˜¯å¦å¯ç”¨',
  dataIndex: 'enabled',
  width: 100,
  align: 'center',
  formatter: ({ cellValue }) => {
    return cellValue ? 'æ˜¯' : 'å¦'
  }
}

// ä½¿ç”¨è¡Œæ•°æ®è®¡ç®—
{
  title: 'æ€»é‡‘é¢',
  dataIndex: 'totalAmount',
  width: 150,
  align: 'right',
  formatter: ({ cellValue, row }) => {
    const total = (row.amount || 0) * (row.quantity || 0)
    return formatAmount(total)
  }
}
```

### 2. slots æ’æ§½ä½¿ç”¨

**ä½œç”¨**ï¼šè‡ªå®šä¹‰è¡¨æ ¼åˆ—å†…å®¹çš„æ¸²æŸ“ï¼Œç”¨äºå­—å…¸æ ‡ç­¾æ˜¾ç¤ºã€çŠ¶æ€æ ‡ç­¾ã€å¤æ‚äº¤äº’ç­‰å®šåˆ¶åŒ–åœºæ™¯ã€‚

**é…ç½®æ–¹å¼**ï¼š

```javascript
// listData.js
{
  title: 'çŠ¶æ€',
  dataIndex: 'status',
  width: 100,
  align: 'center',
  slots: { default: 'featureColumn' }
}
```

**æ¨¡æ¿ä¸­ä½¿ç”¨**ï¼š

```vue
<template>
  <TableCommon :list-data="listData" :methods="tableMethods">
    <template #featureColumn="{ row, column }">
      <!-- å­—å…¸å€¼è½¬ä¹‰ -->
      <template v-if="column.field === 'status'">
        <dict-tag :options="statusDict" :value="row.status" />
      </template>

      <template v-if="column.field === 'serviceType'">
        <dict-tag :options="serviceTypeDict" :value="row.serviceType" />
      </template>
    </template>
  </TableCommon>
</template>
```

**æ’æ§½å‚æ•°è¯´æ˜**ï¼š

- `row`: å½“å‰è¡Œæ•°æ®å¯¹è±¡
- `column`: å½“å‰åˆ—é…ç½®å¯¹è±¡
  - `column.field`: åˆ—çš„å­—æ®µåï¼ˆå¯¹åº” `dataIndex`ï¼‰
  - `column.property`: åˆ—çš„å±æ€§åï¼ˆç­‰åŒäº `field`ï¼‰

**ä½¿ç”¨åœºæ™¯ç¤ºä¾‹**ï¼ˆç»¼åˆç¤ºä¾‹ï¼‰ï¼š

```vue
<template>
  <TableCommon :list-data="listData" :methods="tableMethods" :dict-store="dictStore">
    <template #featureColumn="{ row, column }">
      <!-- å­—å…¸å€¼è½¬ä¹‰ -->
      <template v-if="column.field === 'status'">
        <dict-tag :options="statusDict" :value="row.status" />
      </template>
      
      <!-- çŠ¶æ€æ ‡ç­¾ -->
      <template v-if="column.field === 'approvalStatus'">
        <el-tag :type="row.approvalStatus === 'Audited' ? 'success' : 'warning'">
          {{ row.approvalStatus === 'Audited' ? 'å·²å®¡æ ¸' : 'å¾…å®¡æ ¸' }}
        </el-tag>
      </template>
      
      <!-- è¡Œå†…å¼€å…³ -->
      <template v-if="column.field === 'enabledStatus'">
        <SwitchStatus
          v-model="row[column.field]"
          :row="row"
          :active-value="'1'"
          :inactive-value="'0'"
          :instance="proxy"
          :api="updateEnabledStatus"
          :status-field="'enabledStatus'"
          permission="module:function:edit"
          @success="reload"
        />
      </template>
    </template>
  </TableCommon>
</template>

<script setup>
import { reactive, getCurrentInstance } from 'vue'
import SwitchStatus from '@/components/SwitchStatus/index.vue'
import { updateEnabledStatus } from '@/api/module/function'

const { proxy } = getCurrentInstance()
const { statusDict } = proxy.useDict('service_status')

const dictStore = reactive({
  service_status: statusDict
})
</script>
```

**listData.js é…ç½®**ï¼š

```javascript
{
  title: 'çŠ¶æ€',
  dataIndex: 'status',
  width: 100,
  align: 'center',
  slots: { default: 'featureColumn' }
}
```

### 3. formatter vs slots å¯¹æ¯”

**formatter é€‚ç”¨åœºæ™¯**ï¼š

- âœ… ç®€å•çš„æ–‡æœ¬æ ¼å¼åŒ–
- âœ… æ•°å€¼æ ¼å¼åŒ–ï¼ˆé‡‘é¢ã€ç™¾åˆ†æ¯”ç­‰ï¼‰
- âœ… ç©ºå€¼å¤„ç†
- âœ… å¸ƒå°”å€¼è½¬æ¢
- âœ… æ—¥æœŸæ ¼å¼åŒ–
- âœ… ç®€å•çš„æ¡ä»¶åˆ¤æ–­

**slots é€‚ç”¨åœºæ™¯**ï¼š

- âœ… å­—å…¸å€¼è½¬ä¹‰æ˜¾ç¤ºï¼ˆä½¿ç”¨ `dict-tag`ï¼‰
- âœ… çŠ¶æ€æ ‡ç­¾æ˜¾ç¤ºï¼ˆä½¿ç”¨ `el-tag`ï¼‰
- âœ… è¡Œå†…å¼€å…³çŠ¶æ€ï¼ˆä½¿ç”¨ `SwitchStatus`ï¼‰
- âœ… å¤æ‚çš„å•å…ƒæ ¼å†…å®¹æ¸²æŸ“
- âœ… éœ€è¦äº¤äº’çš„å•å…ƒæ ¼å†…å®¹

### 4. æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æç¤º**ï¼š

1. **ä¼˜å…ˆä½¿ç”¨ formatter**ï¼šç®€å•çš„æ ¼å¼åŒ–éœ€æ±‚ä¼˜å…ˆä½¿ç”¨ `formatter`ï¼Œä»£ç æ›´ç®€æ´
2. **å®šåˆ¶åŒ–åŠŸèƒ½ä½¿ç”¨æ’æ§½**ï¼šåªæœ‰ `formatter` æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œæ‰ä½¿ç”¨ `slots` æ’æ§½
3. **ç©ºå€¼å¤„ç†**ï¼š`formatter` ä¸­éœ€è¦å¤„ç†ç©ºå€¼ï¼Œè¿”å› `'-'` æˆ–å…¶ä»–é»˜è®¤å€¼
4. **å­—å…¸å€¼è½¬ä¹‰**ï¼šå­—å…¸å€¼è½¬ä¹‰å¿…é¡»ä½¿ç”¨ `slots` æ’æ§½ + `dict-tag` ç»„ä»¶
5. **çŠ¶æ€æ ‡ç­¾**ï¼šçŠ¶æ€æ ‡ç­¾æ˜¾ç¤ºä½¿ç”¨ `slots` æ’æ§½ + `el-tag` ç»„ä»¶
6. **æ€§èƒ½è€ƒè™‘**ï¼š`formatter` æ€§èƒ½æ›´å¥½ï¼Œ`slots` æ’æ§½éœ€è¦é¢å¤–çš„æ¨¡æ¿æ¸²æŸ“
7. **ä»£ç ç»´æŠ¤**ï¼š`formatter` é…ç½®åœ¨ `listData.js` ä¸­ï¼Œæ›´æ˜“ç»´æŠ¤

### 6. å¸¸è§é”™è¯¯

**é”™è¯¯ç¤ºä¾‹**ï¼š

```javascript
// âŒ é”™è¯¯ï¼šå­—å…¸å€¼è½¬ä¹‰ä½¿ç”¨ formatter
{
  title: 'çŠ¶æ€',
  dataIndex: 'status',
  formatter: ({ cellValue }) => {
    // ä¸åº”è¯¥åœ¨ formatter ä¸­æ‰‹åŠ¨å¤„ç†å­—å…¸å€¼
    const statusMap = { '1': 'å¯ç”¨', '0': 'ç¦ç”¨' }
    return statusMap[cellValue]
  }
}

// âŒ é”™è¯¯ï¼šç®€å•æ ¼å¼åŒ–ä½¿ç”¨æ’æ§½
{
  title: 'é‡‘é¢(å…ƒ)',
  dataIndex: 'amount',
  slots: { default: 'featureColumn' }  // åº”è¯¥ä½¿ç”¨ formatter
}
```

**æ­£ç¡®ç¤ºä¾‹**ï¼š

```javascript
// âœ… æ­£ç¡®ï¼šå­—å…¸å€¼è½¬ä¹‰ä½¿ç”¨æ’æ§½
{
  title: 'çŠ¶æ€',
  dataIndex: 'status',
  slots: { default: 'featureColumn' }
}

// âœ… æ­£ç¡®ï¼šç®€å•æ ¼å¼åŒ–ä½¿ç”¨ formatter
{
  title: 'é‡‘é¢(å…ƒ)',
  dataIndex: 'amount',
  formatter: ({ cellValue }) => {
    return cellValue ? cellValue.toLocaleString('zh-CN', {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    }) : '-'
  }
}
```

## ç¦æ­¢è¡Œä¸ºè§„èŒƒ

âš ï¸ **é‡è¦ï¼šä»¥ä¸‹è¡Œä¸ºåœ¨ TableCommon ç»„ä»¶ä½¿ç”¨ä¸­ä¸¥æ ¼ç¦æ­¢ï¼**

### 1. æ“ä½œåˆ—é…ç½®ç¦æ­¢é¡¹

#### 1.1 ç¦æ­¢æ‰‹åŠ¨å®šä¹‰æ“ä½œåˆ—æ’æ§½

**âŒ é”™è¯¯æ–¹å¼**ï¼š

```vue
<!-- âŒ ç¦æ­¢ï¼šä¸è¦é¢å¤–å®šä¹‰æ“ä½œåˆ—æ’æ§½ -->
<template>
  <TableCommon :list-data="listData" :methods="tableMethods">
    <template #active="{ row }">
      <el-button @click="edit(row)">ç¼–è¾‘</el-button>
      <el-button @click="delete(row)">åˆ é™¤</el-button>
    </template>
  </TableCommon>
</template>
```

**âœ… æ­£ç¡®æ–¹å¼**ï¼š

```javascript
// âœ… æ­£ç¡®ï¼šåœ¨ listData.js ä¸­é…ç½®æ“ä½œåˆ—
export const listData = {
  columns: [
    {
      title: 'æ“ä½œ',
      key: 'active',
      width: 165,  // âš ï¸ æ“ä½œåˆ—å›ºå®šå®½åº¦å€¼ä¸º 165px
      fixed: 'right',
      align: 'left',
      slots: { default: 'active' },
      commands: [
        {
          id: 'module:function:edit',
          btnFun: 'edit',
          name: 'ç¼–è¾‘',
          icon: '',
          type: 'primary'
        },
        {
          id: 'module:function:delete',
          btnFun: 'delete',
          name: 'åˆ é™¤',
          icon: '',
          type: 'danger'
        }
      ]
    }
  ]
}
```

**ç¦æ­¢åŸå› **ï¼š

- æ“ä½œåˆ—å¿…é¡»é€šè¿‡ `listData.js` ä¸­çš„ `commands` é…ç½®
- ç»„ä»¶å†…éƒ¨ä¼šè‡ªåŠ¨å¤„ç†æ“ä½œåˆ—çš„æ¸²æŸ“
- æ‰‹åŠ¨å®šä¹‰æ’æ§½ä¼šç ´åç»„ä»¶çš„ç»Ÿä¸€ç®¡ç†

#### 1.2 ç¦æ­¢ä¿®æ”¹æ“ä½œåˆ—å®½åº¦

**âŒ é”™è¯¯æ–¹å¼**ï¼š

```javascript
{
  title: 'æ“ä½œ',
  key: 'active',
  width: 200,  // âŒ ç¦æ­¢ï¼šæ“ä½œåˆ—å®½åº¦å¿…é¡»æ˜¯ 165px
  fixed: 'right',
  slots: { default: 'active' }
}
```

**âœ… æ­£ç¡®æ–¹å¼**ï¼š

```javascript
{
  title: 'æ“ä½œ',
  key: 'active',
  width: 165,  // âœ… æ­£ç¡®ï¼šæ“ä½œåˆ—å›ºå®šå®½åº¦å€¼ä¸º 165px
  fixed: 'right',
  align: 'left',
  slots: { default: 'active' }
}
```

**ç¦æ­¢åŸå› **ï¼š

- æ“ä½œåˆ—å®½åº¦ç»Ÿä¸€ä¸º 165pxï¼Œä¿æŒè§†è§‰ä¸€è‡´æ€§
- éšæ„ä¿®æ”¹ä¼šå¯¼è‡´ä¸åŒé¡µé¢æ“ä½œåˆ—å®½åº¦ä¸ç»Ÿä¸€

#### 1.3 ç¦æ­¢æ‰‹åŠ¨å®šä¹‰åºå·åˆ—

**âŒ é”™è¯¯æ–¹å¼**ï¼š

```javascript
export const listData = {
  columns: [
    {
      title: 'åºå·',
      dataIndex: 'index',
      width: 80,
      align: 'center'
    },
    // ... å…¶ä»–åˆ—
  ]
}
```

**âœ… æ­£ç¡®æ–¹å¼**ï¼š

```javascript
export const listData = {
  columns: [
    // åºå·åˆ—ç”±ç»„ä»¶è‡ªåŠ¨ç”Ÿæˆï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®
    // ... å…¶ä»–åˆ—
  ]
}
```

**ç¦æ­¢åŸå› **ï¼š

- åºå·åˆ—ç”±ç»„ä»¶å†…éƒ¨è‡ªåŠ¨ç”Ÿæˆå’Œç®¡ç†
- æ‰‹åŠ¨å®šä¹‰ä¼šå¯¼è‡´åºå·æ˜¾ç¤ºå¼‚å¸¸

### 2. è¡¨æ ¼é…ç½®ç¦æ­¢é¡¹

#### 2.1 ç¦æ­¢ width å’Œ minWidth åŒæ—¶å­˜åœ¨

**âŒ é”™è¯¯æ–¹å¼**ï¼š

```javascript
{
  title: 'åˆ—å',
  dataIndex: 'field',
  width: 200,      // âŒ ä¸èƒ½åŒæ—¶å­˜åœ¨
  minWidth: 150    // âŒ ä¸èƒ½åŒæ—¶å­˜åœ¨
}
```

**âœ… æ­£ç¡®æ–¹å¼**ï¼š

```javascript
// æ–¹å¼1ï¼šä½¿ç”¨å›ºå®šå®½åº¦
{
  title: 'åˆ—å1',
  dataIndex: 'field1',
  width: 200,      // å›ºå®šå®½åº¦
  resizable: true,
  showOverflow: true
}

// æ–¹å¼2ï¼šä½¿ç”¨æœ€å°å®½åº¦ï¼ˆè‡³å°‘æœ‰ä¸€åˆ—å¿…é¡»é…ç½® minWidthï¼‰
{
  title: 'åˆ—å2',
  dataIndex: 'field2',
  minWidth: 150,   // æœ€å°å®½åº¦ï¼Œè‡ªé€‚åº”
  resizable: true,
  showOverflow: true
}
```

**ç¦æ­¢åŸå› **ï¼š

- `width` å’Œ `minWidth` æ˜¯äº’æ–¥çš„é…ç½®é¡¹
- åŒæ—¶é…ç½®ä¼šå¯¼è‡´åˆ—å®½è®¡ç®—é”™è¯¯
- è‡³å°‘æœ‰ä¸€åˆ—å¿…é¡»é…ç½® `minWidth` ç”¨äºè‡ªé€‚åº”å¸ƒå±€

#### 2.2 ç¦æ­¢æ‰€æœ‰åˆ—éƒ½ä½¿ç”¨å›ºå®šå®½åº¦

**âŒ é”™è¯¯æ–¹å¼**ï¼š

```javascript
export const listData = {
  columns: [
    { title: 'åˆ—1', dataIndex: 'field1', width: 200 },
    { title: 'åˆ—2', dataIndex: 'field2', width: 150 },
    { title: 'åˆ—3', dataIndex: 'field3', width: 180 }
    // âŒ æ‰€æœ‰åˆ—éƒ½æ˜¯å›ºå®šå®½åº¦ï¼Œæ²¡æœ‰ minWidth
  ]
}
```

**âœ… æ­£ç¡®æ–¹å¼**ï¼š

```javascript
export const listData = {
  columns: [
    { title: 'åˆ—1', dataIndex: 'field1', width: 200 },
    { title: 'åˆ—2', dataIndex: 'field2', minWidth: 150 },  // âœ… è‡³å°‘æœ‰ä¸€åˆ—ä½¿ç”¨ minWidth
    { title: 'åˆ—3', dataIndex: 'field3', width: 180 }
  ]
}
```

**ç¦æ­¢åŸå› **ï¼š

- è‡³å°‘æœ‰ä¸€åˆ—å¿…é¡»é…ç½® `minWidth` ç”¨äºè‡ªé€‚åº”å¸ƒå±€
- æ‰€æœ‰åˆ—éƒ½ä½¿ç”¨å›ºå®šå®½åº¦ä¼šå¯¼è‡´è¡¨æ ¼æ— æ³•è‡ªé€‚åº”å®¹å™¨å®½åº¦

### 3. æŒ‰é’®é…ç½®ç¦æ­¢é¡¹

#### 3.1 ç¦æ­¢åœ¨ views ç›®å½•ä¸‹è®¾ç½®æŒ‰é’® size å±æ€§

**âŒ é”™è¯¯æ–¹å¼**ï¼š

```vue
<!-- âŒ ç¦æ­¢ï¼šåœ¨ views ç›®å½•ä¸‹è®¾ç½®æŒ‰é’® size -->
<el-button type="primary" size="default">æ–°å¢</el-button>
<el-button type="danger" size="small">åˆ é™¤</el-button>
```

**âœ… æ­£ç¡®æ–¹å¼**ï¼š

```vue
<!-- âœ… æ­£ç¡®ï¼šä¸è®¾ç½® sizeï¼Œä½¿ç”¨å…¨å±€é»˜è®¤å°ºå¯¸ -->
<el-button type="primary">æ–°å¢</el-button>
<el-button type="danger">åˆ é™¤</el-button>
```

**ç¦æ­¢åŸå› **ï¼š

- å…¨å±€å·²ç»Ÿä¸€é…ç½®æŒ‰é’®å°ºå¯¸
- ä¿æŒæ•´ä¸ªç³»ç»Ÿçš„è§†è§‰ä¸€è‡´æ€§
- é¿å…ä¸åŒé¡µé¢å°ºå¯¸ä¸ç»Ÿä¸€

#### 3.2 ç¦æ­¢è¡¨æ ¼å†…æŒ‰é’®ä¸è®¾ç½® link å±æ€§

**âŒ é”™è¯¯æ–¹å¼**ï¼š

```vue
<!-- âŒ ç¦æ­¢ï¼šè¡¨æ ¼å†…æŒ‰é’®æ²¡æœ‰ link å±æ€§ -->
<el-table-column label="æ“ä½œ">
  <template #default="{ row }">
    <el-button type="info" @click="handleEdit(row)">ç¼–è¾‘</el-button>
  </template>
</el-table-column>
```

**âœ… æ­£ç¡®æ–¹å¼**ï¼š

```vue
<!-- âœ… æ­£ç¡®ï¼šè¡¨æ ¼å†…æŒ‰é’®å¿…é¡»è®¾ç½® link å±æ€§ -->
<el-table-column label="æ“ä½œ">
  <template #default="{ row }">
    <el-button type="primary" link @click="handleEdit(row)">ç¼–è¾‘</el-button>
  </template>
</el-table-column>
```

**ç¦æ­¢åŸå› **ï¼š

- è¡¨æ ¼å†…æŒ‰é’®å¿…é¡»è®¾ç½® `link` å±æ€§ï¼Œå‘ˆç°ä¸ºæ–‡æœ¬é“¾æ¥æ ·å¼
- èŠ‚çœè¡¨æ ¼ç©ºé—´ï¼Œæå‡è§†è§‰å±‚æ¬¡æ„Ÿ

#### 3.3 ç¦æ­¢æ‰‹åŠ¨è®¾ç½®æŒ‰é’®é—´è·

**âŒ é”™è¯¯æ–¹å¼**ï¼š

```vue
<!-- âŒ ç¦æ­¢ï¼šæ‰‹åŠ¨è®¾ç½®æŒ‰é’®é—´è· -->
<div class="button-group">
  <el-button type="primary" style="margin-right: 10px">æ–°å¢</el-button>
  <el-button type="danger" style="margin-right: 10px">åˆ é™¤</el-button>
  <el-button>å¯¼å‡º</el-button>
</div>
```

**âœ… æ­£ç¡®æ–¹å¼**ï¼š

```vue
<!-- âœ… æ­£ç¡®ï¼šä¸è®¾ç½®é—´è·ï¼Œä½¿ç”¨å…¨å±€æ ·å¼ -->
<div class="button-group">
  <el-button type="primary">æ–°å¢</el-button>
  <el-button type="danger">åˆ é™¤</el-button>
  <el-button>å¯¼å‡º</el-button>
</div>
```

**ç¦æ­¢åŸå› **ï¼š

- å…¨å±€ CSS å·²ç»Ÿä¸€é…ç½®æŒ‰é’®é—´è·
- æ‰‹åŠ¨è®¾ç½®ä¼šç ´åå…¨å±€ä¸€è‡´æ€§

### 4. å­—æ®µç»‘å®šç¦æ­¢é¡¹

#### 4.1 ç¦æ­¢åœ¨å•å…ƒæ ¼ä¸­æ‹¼æ¥å•ä½

**âŒ é”™è¯¯æ–¹å¼**ï¼š

```javascript
// âŒ ç¦æ­¢ï¼šåœ¨å•å…ƒæ ¼ä¸­æ‹¼æ¥å•ä½
formatter: ({ cellValue }) => {
  return cellValue ? `${cellValue}å…ƒ` : '-'  // âŒ ç¦æ­¢æ‹¼æ¥å•ä½
}
```

**âœ… æ­£ç¡®æ–¹å¼**ï¼š

```javascript
// âœ… æ­£ç¡®ï¼šå•ä½ç»Ÿä¸€æ”¾åœ¨è¡¨å¤´
{
  title: 'é‡‘é¢(å…ƒ)',  // âœ… å•ä½åœ¨è¡¨å¤´
  dataIndex: 'amount',
  formatter: ({ cellValue }) => {
    return cellValue ? cellValue.toLocaleString('zh-CN', {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    }) : '-'
    // æ˜¾ç¤ºï¼š100,000.00ï¼ˆä¸åŒ…å«å•ä½ï¼‰
  }
}
```

**ç¦æ­¢åŸå› **ï¼š

- å•ä½ç»Ÿä¸€æ”¾åœ¨è¡¨å¤´ï¼Œä¿æŒè¡¨æ ¼æ•´æ´
- å•å…ƒæ ¼ä¸­æ‹¼æ¥å•ä½ä¼šå¯¼è‡´æ•°æ®æ ¼å¼ä¸ç»Ÿä¸€

#### 4.2 ç¦æ­¢éšæ„æ·»åŠ æˆ–åˆ é™¤å­—æ®µ

**âŒ é”™è¯¯æ–¹å¼**ï¼š

```javascript
// âŒ ç¦æ­¢ï¼šæŒ‰ç…§æ¥å£è¿”å›çš„å­—æ®µå¯¹é¡µé¢è¿›è¡Œè¡¥å……æ·»åŠ åˆ é™¤å­—æ®µ
export const listData = {
  columns: [
    { title: 'å­—æ®µ1', dataIndex: 'field1' },
    { title: 'æ–°å¢å­—æ®µ', dataIndex: 'newField' },  // âŒ ç¦æ­¢æ·»åŠ æ–°å­—æ®µ
    // åˆ é™¤äº†åŸæœ‰çš„å­—æ®µ2  // âŒ ç¦æ­¢åˆ é™¤ç°æœ‰å­—æ®µ
  ]
}
```

**âœ… æ­£ç¡®æ–¹å¼**ï¼š

```javascript
// âœ… æ­£ç¡®ï¼šä¸¥æ ¼æŒ‰ç…§ç°æœ‰æ–‡ä»¶å®šä¹‰è¿›è¡Œä¿®æ”¹
export const listData = {
  columns: [
    { title: 'å­—æ®µ1', dataIndex: 'field1' },  // åªä¿®æ”¹ dataIndexï¼Œä¸æ·»åŠ åˆ é™¤
    { title: 'å­—æ®µ2', dataIndex: 'field2' }
  ]
}
```

**ç¦æ­¢åŸå› **ï¼š

- å¿…é¡»ä¸¥æ ¼æŒ‰ç…§æ–‡ä»¶ä¸­å·²å®šä¹‰çš„å­—æ®µè¿›è¡Œä¿®æ”¹
- ä¸å¾—æŒ‰ç…§æ¥å£è¿”å›çš„å­—æ®µå¯¹é¡µé¢è¿›è¡Œè¡¥å……æ·»åŠ åˆ é™¤å­—æ®µ
- ä¿æŒç°æœ‰è¡¨å•ç»“æ„å’Œå­—æ®µå¸ƒå±€ä¸å˜

### 5. æŸ¥è¯¢æ¡ä»¶ç¦æ­¢é¡¹

#### 5.1 Element Plus ç»„ä»¶é…ç½®è§„èŒƒï¼ˆæŸ¥è¯¢æ¡ä»¶ä¸“ç”¨ï¼‰

> **âš ï¸ è¯¦ç»†è§„èŒƒ**ï¼šElement Plus ç»„ä»¶çš„å®Œæ•´é…ç½®è§„èŒƒï¼ˆclearableã€filterable ç­‰ï¼‰è¯·å‚è€ƒ [vue-development-patterns.mdc](./vue-development-patterns.mdc) ä¸­çš„"Element Plus ç»„ä»¶é…ç½®è§„èŒƒ"ç« èŠ‚ã€‚

**æŸ¥è¯¢æ¡ä»¶ä¸­çš„é…ç½®è¦æ±‚**ï¼š

1. **æ‰€æœ‰æ”¯æŒ clearable çš„ç»„ä»¶å¿…é¡»é…ç½®**ï¼š
   ```javascript
   {
     key: 'projectName',
     label: 'é¡¹ç›®åç§°',
     controls: 'ElInput',
     props: {
       placeholder: 'è¯·è¾“å…¥é¡¹ç›®åç§°',
       clearable: true  // âœ… å¿…é¡»é…ç½®
     }
   }
   ```

2. **el-select ç»„ä»¶å¿…é¡»é…ç½® filterable**ï¼š
   ```javascript
   {
     key: 'serviceType',
     label: 'æœåŠ¡ç±»å‹',
     controls: 'ElSelect',
     props: {
       placeholder: 'è¯·é€‰æ‹©æœåŠ¡ç±»å‹',
       clearable: true,
       filterable: true  // âœ… å¿…é¡»é…ç½®
     }
   }
   ```

**ç¦æ­¢è¡Œä¸º**ï¼š
- âŒ ç¦æ­¢æŸ¥è¯¢æ¡ä»¶ä¸ä½¿ç”¨ clearableï¼šæ‰€æœ‰æ”¯æŒ `clearable` çš„ç»„ä»¶å¿…é¡»é…ç½®
- âŒ ç¦æ­¢ el-select ä¸é…ç½® filterableï¼š`el-select` å¿…é¡»é…ç½® `filterable`

### 6. ç¦æ­¢è¡Œä¸ºæ€»ç»“

âš ï¸ **æ‰€æœ‰ç¦æ­¢é¡¹æ±‡æ€»**ï¼š

1. âŒ **ç¦æ­¢æ‰‹åŠ¨å®šä¹‰æ“ä½œåˆ—æ’æ§½**ï¼šæ“ä½œåˆ—å¿…é¡»é€šè¿‡ `listData.js` ä¸­çš„ `commands` é…ç½®
2. âŒ **ç¦æ­¢ä¿®æ”¹æ“ä½œåˆ—å®½åº¦**ï¼šæ“ä½œåˆ—å®½åº¦å›ºå®šä¸º 165px
3. âŒ **ç¦æ­¢æ‰‹åŠ¨å®šä¹‰åºå·åˆ—**ï¼šåºå·åˆ—ç”±ç»„ä»¶è‡ªåŠ¨ç”Ÿæˆ
4. âŒ **ç¦æ­¢ width å’Œ minWidth åŒæ—¶å­˜åœ¨**ï¼šä¸¤è€…æ˜¯äº’æ–¥çš„é…ç½®é¡¹
5. âŒ **ç¦æ­¢æ‰€æœ‰åˆ—éƒ½ä½¿ç”¨å›ºå®šå®½åº¦**ï¼šè‡³å°‘æœ‰ä¸€åˆ—å¿…é¡»é…ç½® `minWidth`
6. âŒ **ç¦æ­¢åœ¨ views ç›®å½•ä¸‹è®¾ç½®æŒ‰é’® size å±æ€§**ï¼šä½¿ç”¨å…¨å±€é»˜è®¤å°ºå¯¸
7. âŒ **ç¦æ­¢è¡¨æ ¼å†…æŒ‰é’®ä¸è®¾ç½® link å±æ€§**ï¼šè¡¨æ ¼å†…æŒ‰é’®å¿…é¡»è®¾ç½® `link`
8. âŒ **ç¦æ­¢æ‰‹åŠ¨è®¾ç½®æŒ‰é’®é—´è·**ï¼šä½¿ç”¨å…¨å±€æ ·å¼
9. âŒ **ç¦æ­¢åœ¨å•å…ƒæ ¼ä¸­æ‹¼æ¥å•ä½**ï¼šå•ä½ç»Ÿä¸€æ”¾åœ¨è¡¨å¤´
10. âŒ **ç¦æ­¢éšæ„æ·»åŠ æˆ–åˆ é™¤å­—æ®µ**ï¼šä¸¥æ ¼æŒ‰ç…§ç°æœ‰æ–‡ä»¶å®šä¹‰è¿›è¡Œä¿®æ”¹
11. âŒ **ç¦æ­¢æŸ¥è¯¢æ¡ä»¶ä¸ä½¿ç”¨ clearable**ï¼šæ‰€æœ‰æ”¯æŒ `clearable` çš„ç»„ä»¶å¿…é¡»é…ç½®
12. âŒ **ç¦æ­¢ el-select ä¸é…ç½® filterable**ï¼š`el-select` å¿…é¡»é…ç½® `filterable`

## ç»„ä»¶å›è°ƒå‡½æ•°è¯´æ˜

TableCommon ç»„ä»¶é€šè¿‡ `emit` æš´éœ²äº†å¤šä¸ªäº‹ä»¶å›è°ƒå‡½æ•°ï¼Œç”¨äºåœ¨ç‰¹å®šæ—¶æœºé€šçŸ¥çˆ¶ç»„ä»¶æ‰§è¡Œç›¸å…³æ“ä½œã€‚

### äº‹ä»¶åˆ—è¡¨

ç»„ä»¶å®šä¹‰äº†ä»¥ä¸‹äº‹ä»¶ï¼š

```javascript
const emit = defineEmits(['search', 'reset', 'onCellClick'])
```

### 1. search äº‹ä»¶

**è§¦å‘æ—¶æœº**ï¼šæ•°æ®åŠ è½½æˆåŠŸåè§¦å‘

**ä½¿ç”¨åœºæ™¯**ï¼š
- åŠ è½½æ±‡æ€»æ•°æ®ï¼ˆå¦‚ç»Ÿè®¡ä¿¡æ¯ã€KPI æ•°æ®ç­‰ï¼‰
- æ ¹æ®æŸ¥è¯¢å‚æ•°æ‰§è¡Œé¢å¤–æ“ä½œ
- ç›‘å¬æ•°æ®åŠ è½½å®Œæˆ

**äº‹ä»¶å‚æ•°**ï¼š

```javascript
/**
 * search äº‹ä»¶å‚æ•°
 * @param {Object} query - å½“å‰æŸ¥è¯¢å‚æ•°å¯¹è±¡
 * @description åŒ…å«åˆ†é¡µã€ç­›é€‰æ¡ä»¶ç­‰æ‰€æœ‰æŸ¥è¯¢å‚æ•°
 */
emit('search', query)
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```vue
<template>
  <TableCommon
    ref="tableRef"
    :list-data="listData"
    :methods="tableMethods"
    @search="handleSearch"
  />
</template>

<script setup>
// æœç´¢äº‹ä»¶å¤„ç†
const handleSearch = (query) => {
  console.log('æœç´¢å‚æ•°:', query)
  // æ ¹æ®æŸ¥è¯¢å‚æ•°åŠ è½½æ±‡æ€»æ•°æ®
  loadSummary(query)
}

// åŠ è½½æ±‡æ€»æ•°æ®
const loadSummary = async (query) => {
  try {
    const res = await fetchSummaryData(query)
    if (res.code === 0) {
      summaryData.value = res.data
    }
  } catch (error) {
    console.error('åŠ è½½æ±‡æ€»æ•°æ®å¤±è´¥:', error)
  }
}
</script>
```

**å®é™…åº”ç”¨åœºæ™¯**ï¼š

```vue
<template>
  <div class="page-container">
    <!-- æ±‡æ€»æ•°æ®å±•ç¤º -->
    <div class="summary-cards">
      <div class="card">
        <div class="label">æ€»æ•°é‡</div>
        <div class="value">{{ summaryData.totalCount }}</div>
      </div>
      <div class="card">
        <div class="label">æ€»é‡‘é¢</div>
        <div class="value">{{ summaryData.totalAmount }}</div>
      </div>
    </div>

    <!-- è¡¨æ ¼ç»„ä»¶ -->
    <TableCommon
      ref="tableRef"
      :list-data="listData"
      :methods="tableMethods"
      @search="loadSummary"
    />
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { fetchActivityAnalysisData } from '@/api/organizing/activityAnalysis'

const summaryData = ref({
  totalCount: 0,
  totalAmount: 0
})

// åŠ è½½æ±‡æ€»æ•°æ®ï¼ˆåœ¨æœç´¢æ—¶è§¦å‘ï¼‰
const loadSummary = async () => {
  const query = tableRef.value?.realtimeQueryParams
  try {
    const res = await fetchActivityAnalysisData(query)
    if (res.code === 0) {
      Object.assign(summaryData.value, {
        totalCount: res.data.totalCount ?? 0,
        totalAmount: res.data.totalAmount ?? 0
      })
    }
  } catch (error) {
    console.error('åŠ è½½æ±‡æ€»æ•°æ®å¤±è´¥:', error)
  }
}
</script>
```

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ `search` äº‹ä»¶åœ¨æ•°æ®åŠ è½½æˆåŠŸåè§¦å‘
- âš ï¸ äº‹ä»¶å‚æ•° `query` åŒ…å«å®Œæ•´çš„æŸ¥è¯¢å‚æ•°ï¼ˆåˆ†é¡µã€ç­›é€‰æ¡ä»¶ç­‰ï¼‰
- âš ï¸ å¯ä»¥é€šè¿‡ `tableRef.value?.realtimeQueryParams` è·å–å®æ—¶æŸ¥è¯¢å‚æ•°

### 2. reset äº‹ä»¶

**è§¦å‘æ—¶æœº**ï¼šé‡ç½®è¡¨å•æ—¶è§¦å‘

**ä½¿ç”¨åœºæ™¯**ï¼š
- é‡ç½®è‡ªå®šä¹‰æŸ¥è¯¢ç»„ä»¶ï¼ˆå¦‚ `NumberRange` æ•°å­—èŒƒå›´è¾“å…¥ç»„ä»¶ï¼‰
- æ¸…ç†è‡ªå®šä¹‰çŠ¶æ€
- æ‰§è¡Œé‡ç½®åçš„é¢å¤–æ“ä½œ

**äº‹ä»¶å‚æ•°**ï¼š

```javascript
/**
 * reset äº‹ä»¶
 * @description æ— å‚æ•°ï¼Œä»…é€šçŸ¥çˆ¶ç»„ä»¶æ‰§è¡Œé‡ç½®æ“ä½œ
 */
emit('reset')
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```vue
<template>
  <TableCommon
    ref="tableRef"
    :list-data="listData"
    :methods="tableMethods"
    @reset="handleReset"
  >
    <template #formSlot="{ data, field }">
      <!-- è‡ªå®šä¹‰æŸ¥è¯¢ç»„ä»¶ -->
      <template v-if="field === 'amountRange'">
        <NumberRange
          ref="amountRangeRef"
          v-model:start="data.amountStart"
          v-model:end="data.amountEnd"
        />
      </template>
    </template>
  </TableCommon>
</template>

<script setup>
import { ref } from 'vue'
import NumberRange from '@/components/NumberRange/index.vue'

const amountRangeRef = ref(null)

// é‡ç½®äº‹ä»¶å¤„ç†
const handleReset = () => {
  // é‡ç½®è‡ªå®šä¹‰ç»„ä»¶
  amountRangeRef.value?.reset()
}
</script>
```

**å®é™…åº”ç”¨åœºæ™¯**ï¼š

```vue
<template>
  <TableCommon
    ref="tableRef"
    :list-data="listData"
    :methods="tableMethods"
    @reset="handleReset"
  >
    <template #formSlot="{ data, field }">
      <!-- é¢ç§¯èŒƒå›´ -->
      <template v-if="field === 'areaRange'">
        <NumberRange
          ref="areaRangeRef"
          v-model:start="data.areaStart"
          v-model:end="data.areaEnd"
        />
      </template>
      
      <!-- ä»·æ ¼èŒƒå›´ -->
      <template v-if="field === 'priceRange'">
        <NumberRange
          ref="priceRangeRef"
          v-model:start="data.priceStart"
          v-model:end="data.priceEnd"
        />
      </template>
    </template>
  </TableCommon>
</template>

<script setup>
import { ref } from 'vue'
import NumberRange from '@/components/NumberRange/index.vue'

const areaRangeRef = ref(null)
const priceRangeRef = ref(null)

// é‡ç½®äº‹ä»¶å¤„ç†
const handleReset = () => {
  // é‡ç½®æ‰€æœ‰è‡ªå®šä¹‰ç»„ä»¶
  areaRangeRef.value?.reset()
  priceRangeRef.value?.reset()
}
</script>
```

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ `reset` äº‹ä»¶åœ¨é‡ç½®æŒ‰é’®ç‚¹å‡»æ—¶è§¦å‘
- âš ï¸ ç»„ä»¶å†…éƒ¨å·²å¤„ç†è¡¨å•é‡ç½®ï¼Œæ­¤äº‹ä»¶ä¸»è¦ç”¨äºé‡ç½®è‡ªå®šä¹‰ç»„ä»¶
- âš ï¸ å¦‚æœä½¿ç”¨äº†è‡ªå®šä¹‰æŸ¥è¯¢ç»„ä»¶ï¼ˆå¦‚ `NumberRange`ï¼‰ï¼Œéœ€è¦åœ¨ `reset` äº‹ä»¶ä¸­æ‰‹åŠ¨é‡ç½®

### 3. onCellClick äº‹ä»¶

**è§¦å‘æ—¶æœº**ï¼šç‚¹å‡»è¡¨æ ¼å•å…ƒæ ¼æ—¶è§¦å‘ï¼ˆæ“ä½œåˆ—é™¤å¤–ï¼‰

**ä½¿ç”¨åœºæ™¯**ï¼š
- å•å…ƒæ ¼ç‚¹å‡»äº¤äº’
- è¡Œé€‰æ‹©é€»è¾‘ï¼ˆç»„ä»¶å†…éƒ¨å·²å¤„ç†ï¼Œæ­¤äº‹ä»¶ç”¨äºé¢å¤–æ“ä½œï¼‰
- è‡ªå®šä¹‰å•å…ƒæ ¼ç‚¹å‡»è¡Œä¸º

**äº‹ä»¶å‚æ•°**ï¼š

```javascript
/**
 * onCellClick äº‹ä»¶å‚æ•°
 * @param {Object} row - å½“å‰è¡Œæ•°æ®å¯¹è±¡
 * @description ç‚¹å‡»å•å…ƒæ ¼æ‰€åœ¨è¡Œçš„å®Œæ•´æ•°æ®
 */
emit('onCellClick', row)
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```vue
<template>
  <TableCommon
    ref="tableRef"
    :list-data="listData"
    :methods="tableMethods"
    @onCellClick="handleCellClick"
  />
</template>

<script setup>
// å•å…ƒæ ¼ç‚¹å‡»äº‹ä»¶å¤„ç†
const handleCellClick = (row) => {
  console.log('ç‚¹å‡»äº†è¡Œæ•°æ®:', row)
  // æ‰§è¡Œè‡ªå®šä¹‰æ“ä½œï¼Œå¦‚è·³è½¬è¯¦æƒ…é¡µ
  router.push({
    name: 'Detail',
    params: { id: row.id }
  })
}
</script>
```

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ `onCellClick` äº‹ä»¶åœ¨ç‚¹å‡»å•å…ƒæ ¼æ—¶è§¦å‘ï¼ˆæ“ä½œåˆ—é™¤å¤–ï¼‰
- âš ï¸ ç»„ä»¶å†…éƒ¨å·²å¤„ç†è¡Œé€‰æ‹©é€»è¾‘ï¼ˆå¤šé€‰/å•é€‰ï¼‰ï¼Œæ­¤äº‹ä»¶ç”¨äºé¢å¤–æ“ä½œ
- âš ï¸ å¦‚æœ `hideSelection: true`ï¼Œè¡Œé€‰æ‹©åŠŸèƒ½è¢«ç¦ç”¨ï¼Œä½†äº‹ä»¶ä»ä¼šè§¦å‘

### 4. å›è°ƒå‡½æ•°ä½¿ç”¨ç¤ºä¾‹

**ç»¼åˆç¤ºä¾‹**ï¼š

```vue
<template>
  <TableCommon
    ref="tableRef"
    :list-data="listData"
    :methods="tableMethods"
    @search="handleSearch"
    @reset="handleReset"
    @onCellClick="handleCellClick"
  >
    <template #formSlot="{ data, field }">
      <template v-if="field === 'amountRange'">
        <NumberRange
          ref="amountRangeRef"
          v-model:start="data.amountStart"
          v-model:end="data.amountEnd"
        />
      </template>
    </template>
  </TableCommon>
</template>

<script setup>
import { ref } from 'vue'
import NumberRange from '@/components/NumberRange/index.vue'
import { fetchSummaryData } from '@/api/module/function'

const amountRangeRef = ref(null)
const summaryData = ref(null)

// æœç´¢äº‹ä»¶ï¼šåŠ è½½æ±‡æ€»æ•°æ®
const handleSearch = async (query) => {
  const res = await fetchSummaryData(query)
  if (res.code === 0) {
    summaryData.value = res.data
  }
}

// é‡ç½®äº‹ä»¶ï¼šé‡ç½®è‡ªå®šä¹‰ç»„ä»¶
const handleReset = () => {
  amountRangeRef.value?.reset()
  summaryData.value = null
}

// å•å…ƒæ ¼ç‚¹å‡»äº‹ä»¶ï¼šè‡ªå®šä¹‰æ“ä½œ
const handleCellClick = (row) => {
  console.log('ç‚¹å‡»äº†è¡Œæ•°æ®:', row)
}
</script>
```

### 5. äº‹ä»¶è§¦å‘æ—¶æœºæ€»ç»“

| äº‹ä»¶ | è§¦å‘æ—¶æœº | å‚æ•° | ä½¿ç”¨åœºæ™¯ |
|------|---------|------|---------|
| `search` | æ•°æ®åŠ è½½æˆåŠŸå | `query`ï¼ˆæŸ¥è¯¢å‚æ•°å¯¹è±¡ï¼‰ | åŠ è½½æ±‡æ€»æ•°æ®ã€ç›‘å¬æ•°æ®åŠ è½½å®Œæˆ |
| `reset` | é‡ç½®æŒ‰é’®ç‚¹å‡»æ—¶ | æ—  | é‡ç½®è‡ªå®šä¹‰æŸ¥è¯¢ç»„ä»¶ã€æ¸…ç†è‡ªå®šä¹‰çŠ¶æ€ |
| `onCellClick` | ç‚¹å‡»è¡¨æ ¼å•å…ƒæ ¼æ—¶ï¼ˆæ“ä½œåˆ—é™¤å¤–ï¼‰ | `row`ï¼ˆè¡Œæ•°æ®å¯¹è±¡ï¼‰ | å•å…ƒæ ¼ç‚¹å‡»äº¤äº’ã€è‡ªå®šä¹‰ç‚¹å‡»è¡Œä¸º |

### 6. æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æç¤º**ï¼š

1. **search äº‹ä»¶**ï¼šåœ¨æ•°æ®åŠ è½½æˆåŠŸåè§¦å‘ï¼Œå¯ç”¨äºåŠ è½½æ±‡æ€»æ•°æ®
2. **reset äº‹ä»¶**ï¼šç»„ä»¶å†…éƒ¨å·²å¤„ç†è¡¨å•é‡ç½®ï¼Œä¸»è¦ç”¨äºé‡ç½®è‡ªå®šä¹‰ç»„ä»¶
3. **onCellClick äº‹ä»¶**ï¼šç»„ä»¶å†…éƒ¨å·²å¤„ç†è¡Œé€‰æ‹©é€»è¾‘ï¼Œæ­¤äº‹ä»¶ç”¨äºé¢å¤–æ“ä½œ
4. **äº‹ä»¶å‚æ•°**ï¼š`search` ä¼ é€’æŸ¥è¯¢å‚æ•°ï¼Œ`onCellClick` ä¼ é€’è¡Œæ•°æ®ï¼Œ`reset` æ— å‚æ•°
5. **å¯é€‰ä½¿ç”¨**ï¼šè¿™äº›äº‹ä»¶éƒ½æ˜¯å¯é€‰çš„ï¼Œæ ¹æ®å®é™…éœ€æ±‚ä½¿ç”¨

## æ ·å¼è§„èŒƒ

### é¡µé¢å®¹å™¨æ ·å¼

```scss
.page-container {
  display: flex;
  flex: 1;
  flex-direction: column;
  height: 100%;
}

// è¡¨æ ¼å®¹å™¨æ ·å¼
.table-container {
  background: white;
  border-radius: 4px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}
```

## é”™è¯¯å¤„ç†è§„èŒƒ

### API é”™è¯¯å¤„ç†

```javascript
// åœ¨ getCustomTableData ä¸­ç»Ÿä¸€å¤„ç†
try {
  const response = await getCustomTableData(query, api.value)
  // å¤„ç†æˆåŠŸå“åº”
} catch (error) {
  console.error('æ•°æ®åŠ è½½å¤±è´¥:', error)
  // æ˜¾ç¤ºé”™è¯¯æç¤º
  proxy.$modal.msgError('æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•')
}
```

## æ€§èƒ½ä¼˜åŒ–è§„èŒƒ

### æ•°æ®ç¼“å­˜

```javascript
// ä½¿ç”¨ cacheKey è¿›è¡Œè¡¨æ ¼çŠ¶æ€ç¼“å­˜
cacheKey: 'userList_' + Date.now()

// æ¸…ç†æŒ‰é’®ç¼“å­˜
const clearCache = () => {
  tableRef.value.clearButtonCache()
}
```

### åˆ†é¡µä¼˜åŒ–

```javascript
// åˆç†è®¾ç½®åˆ†é¡µå¤§å°
pagerConfig: {
  pageSizes: [10, 20, 50, 100],
  pageSize: 20
}
```

## ç»´æŠ¤è§„èŒƒ

### ç‰ˆæœ¬ç®¡ç†

- ç»„ä»¶ç‰ˆæœ¬å·ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶
- é‡å¤§å˜æ›´éœ€è¦æä¾›è¿ç§»æŒ‡å—
- ä¿æŒå‘åå…¼å®¹æ€§

### æ–‡æ¡£æ›´æ–°

- æ¯æ¬¡åŠŸèƒ½æ›´æ–°éƒ½éœ€è¦æ›´æ–°ä½¿ç”¨æ–‡æ¡£
- æä¾›å®Œæ•´çš„ç¤ºä¾‹ä»£ç 
- è®°å½•å·²çŸ¥é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### å­—å…¸ç»´æŠ¤

- å­—å…¸ç±»å‹å˜æ›´éœ€è¦åŒæ­¥æ›´æ–°å‰ç«¯é…ç½®
- æ–°å¢å­—å…¸ç±»å‹éœ€è¦æ›´æ–°è§„åˆ™æ–‡æ¡£
- å­—å…¸æ•°æ®å¼‚å¸¸éœ€è¦åŠæ—¶æ’æŸ¥åç«¯æ¥å£

## åŠŸèƒ½æŒ‰é’®é…ç½®é¡¹é…ç½®è¯´æ˜

### å›¾æ ‡é…ç½®è¯´æ˜

1. è¡¨æ ¼ä¸Šæ–¹æŒ‰é’®é…ç½®

- åªæœ‰æ–°å¢æŒ‰é’®é…ç½® type=â€˜primaryâ€™
- icon é…ç½®: æ–°å¢ Plus åˆ é™¤/ä½œåºŸ Delete æ‰“å° Printer é”å®š Lock è§£é” Unlock å¯¼å…¥ Upload å¯¼å‡º/ä¸‹è½½ Download å…¶ä»–å¯æ ¹æ®æƒ…å†µåœ¨ Element-Plus å®˜ç½‘ icon åº“æŸ¥æ‰¾ä½¿ç”¨
- **åªæœ‰æ–°å¢æŒ‰é’® type å€¼æ˜¯ primaryï¼Œå…¶ä»–æŒ‰é’®é…ç½®ä¸ºç©º**

2. è¡¨æ ¼è¡Œå†…æŒ‰é’®é…ç½®

- è¡Œå†…æŒ‰é’® **icon å›ºå®šè®¾ç½®ä¸ºç©º**
- è¡Œå†…æŒ‰é’® **type å±æ€§å€¼å›ºå®š primary,åªæœ‰è¡Œå†…åˆ é™¤æŒ‰é’®è®¾ç½®ä¸º danger**
